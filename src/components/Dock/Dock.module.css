/* ===== Dock 组件样式 ===== */
/* 定义 Dock 容器及其子元素的布局和外观 */

/* Dock 外层容器 - 玻璃态效果 */
.dock {
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border);
    border-radius: 25px;
    padding: var(--spacing-border-default);
    box-shadow: var(--shadow-small);
    display: inline-block;
    position: relative;
    z-index: 2000;
    /* 空间切换时宽度平滑过渡 */
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Dock 内容容器 - 图标排列区域 */
.dockContent {
    background: var(--color-bg-secondary);
    border-radius: var(--radius-large);
    padding: var(--spacing-gap-small);
    /* 右边留出空间给 Navigator (约 136px = 128px Navigator + 8px gap) */
    padding-right: 144px;
    box-shadow: var(--shadow-small);
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    gap: 8px;
    /* Fixed gap - items slide using transform for smooth animation */
    /* 空间切换时平滑过渡宽度 */
    transition: width 0.3s var(--ease-smooth, ease);
}

/* Dock 项目包装器 - 控制间距和动画 */
.dockItemWrapper {
    will-change: transform;
    flex-shrink: 0;
}

/* 编辑模式下的动画延迟 - 使用 CSS 变量实现动态交错 */
/* --stagger-index 由 JS 设置，每个索引增加 40ms 延迟 */
.dockContent.editMode>div .dockItem {
    animation-delay: calc(var(--stagger-index, 0) * 40ms);
}

/* 分隔线 - 用于分隔固定图标和其他图标 */
.divider {
    display: flex;
    flex-direction: row;
    align-items: center;
    align-self: stretch;
    height: var(--icon-size, 64px);
    flex-shrink: 0;
    width: 8px;
    position: relative;
    /* Smooth size transition */
    transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 分隔线 SVG 图标 */
.divider svg {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    margin: 0 auto;
    /* Center the line horizontally */
    top: 8px;
    width: 1px;
    height: 48px;
}

/* 分隔线条样式 */
.divider svg line {
    stroke: var(--color-border);
}

/* Dock 导航器容器（预留） */
.dockNavigator {
    display: flex;
    gap: var(--spacing-gap-small);
    align-items: center;
    flex: 0 0 auto;
    width: 128px;
}

/* 导航器图标 */
.navigatorIcon {
    flex: 1 0 0;
    background: var(--color-text-tertiary);
    height: var(--icon-size, 64px);
    min-height: 0;
    min-width: 0;
    border-radius: var(--radius-default);
    flex-shrink: 0;
    /* Smooth size transition */
    transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 拖拽占位符 - 显示放置目标位置 */
.placeholder {
    width: var(--icon-size, 64px);
    height: var(--icon-size, 64px);
    flex-shrink: 0;
    border-radius: var(--radius-default);
    background: var(--color-bg-secondary);
    border: 2px dashed var(--color-border);
    transition: all var(--transition-medium),
        width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== 编辑模式动画 ===== */
/* 编辑工具容器 - 包含删除按钮等 */
.editTools {
    display: flex;
    align-items: center;
    width: 0;
    opacity: 0;
    margin-right: -8px;
    /* Counteract the flex gap when hidden */
    gap: var(--spacing-gap-small);
    transition: width var(--transition-normal),
        opacity var(--transition-medium),
        margin-right var(--transition-normal),
        gap var(--transition-normal);
}

/* 编辑工具可见状态 */
.editTools.visible {
    width: calc(var(--icon-size, 64px) + 8px + var(--spacing-gap-small));
    /* icon size + 8px 间距，或根据内容调整 */
    opacity: 1;
    margin-right: 0;
    /* Reset margin to restore gap */
}

/* 拖拽时隐藏源项目 */
.isBeingDragged {
    opacity: 0 !important;
    visibility: hidden !important;
}

/* ===== Focus Spaces 切换动画 ===== */

/* 容器隐藏溢出，确保动画不会溢出 */
.dockContent {
    overflow: hidden;
}

/* 退场动画 - 向上滑出 */
@keyframes slideOutUp {
    from {
        transform: translateY(0);
        opacity: 1;
    }

    to {
        transform: translateY(-40px);
        opacity: 0;
    }
}

/* 入场动画 - 从下滑入，带回弹效果 */
@keyframes slideInUp {
    from {
        transform: translateY(40px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* 应用退场动画 */
.itemExiting {
    animation: slideOutUp 0.12s ease-in forwards;
}

/* 隐藏状态 - 等待入场动画，使用 visibility 确保完全不可见 */
.itemHidden {
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateY(40px);
}

/* 应用入场动画 - 带 stagger 效果 */
/* 使用 both 填充模式：backwards 让延迟期间显示起始帧，forwards 让结束后保持终止帧 */
.itemEntering {
    visibility: visible !important;
    animation: slideInUp 0.2s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    animation-delay: calc(var(--stagger-index, 0) * 15ms);
}

/* Navigator 容器样式 - 使用绝对定位始终靠右 */
.dockNavigator {
    position: absolute;
    right: calc(var(--spacing-border-default) + 8px);
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    gap: var(--spacing-gap-small);
    align-items: center;
    /* 空间切换时平滑过渡透明度 */
    transition: opacity 0.15s ease;
}

/* Navigator 过渡状态 - 退场/隐藏期间淡出 */
.navigatorTransitioning {
    opacity: 0.3;
}