import{u as W,a as A,r as i,R as B,j as e,b as D,s as z,c as E,G as F}from"./main-a3455c10.js";const X="_backdrop_1vrpb_7",H="_modal_1vrpb_23",V="_innerContainer_1vrpb_51",q="_iconContainer_1vrpb_79",M="_defaultTheme_1vrpb_97",J="_defaultThemeActive_1vrpb_139",K="_themeGroupContainer_1vrpb_151",Q="_highlightBackground_1vrpb_177",Y="_themeGroupOption_1vrpb_203",Z="_textureOption_1vrpb_237",ee="_wallpaperUploadBtn_1vrpb_239",te="_textureSectionWrapper_1vrpb_251",le="_textureSectionWrapperOpen_1vrpb_281",ae="_textureSection_1vrpb_251",oe="_textureOptionActive_1vrpb_369",ne="_texturePreviewNone_1vrpb_381",re="_texturePreviewImage_1vrpb_399",ie="_colorOptionsContainer_1vrpb_415",se="_colorOption_1vrpb_415",ce="_colorOptionActive_1vrpb_473",ue="_wallpaperSection_1vrpb_487",pe="_disabled_1vrpb_507",de="_hidden_1vrpb_521",me="_error_1vrpb_531",he="_layoutSection_1vrpb_563",ge="_layoutRow_1vrpb_587",_e="_layoutLabel_1vrpb_603",xe="_layoutToggleGroup_1vrpb_621",ve="_layoutHighlight_1vrpb_641",fe="_layoutToggleOption_1vrpb_667",t={backdrop:X,modal:H,innerContainer:V,iconContainer:q,defaultTheme:M,defaultThemeActive:J,themeGroupContainer:K,highlightBackground:Q,themeGroupOption:Y,textureOption:Z,wallpaperUploadBtn:ee,textureSectionWrapper:te,textureSectionWrapperOpen:le,textureSection:ae,textureOptionActive:oe,texturePreviewNone:ne,texturePreviewImage:re,colorOptionsContainer:ie,colorOption:se,colorOptionActive:ce,wallpaperSection:ue,disabled:pe,hidden:de,error:me,layoutSection:he,layoutRow:ge,layoutLabel:_e,layoutToggleGroup:xe,layoutHighlight:ve,layoutToggleOption:fe},be=""+new URL("Point Texture Preview-17565573.svg",import.meta.url).href,ye=""+new URL("X Texture Preview-2004a0f7.svg",import.meta.url).href,we=""+new URL("star3-ef948816.svg",import.meta.url).href,je=""+new URL("sun-a529e1f6.svg",import.meta.url).href,Te=""+new URL("moon-cd98c44e.svg",import.meta.url).href,Ne=""+new URL("monitor-b828c770.svg",import.meta.url).href,Se=""+new URL("slash-f0692e0a.svg",import.meta.url).href,Ce=""+new URL("asterisk-d84f7b04.svg",import.meta.url).href,ke="_gridContainer_1wzd1_1",Oe="_uploadBtn_1wzd1_23",Ie="_uploading_1wzd1_57",Re="_pulse_1wzd1_1",We="_thumbnail_1wzd1_69",$e="_active_1wzd1_101",Ge="_image_1wzd1_111",Le="_deleteBtn_1wzd1_123",d={gridContainer:ke,uploadBtn:Oe,uploading:Ie,pulse:Re,thumbnail:We,active:$e,image:Ge,deleteBtn:Le},Pe=""+new URL("wallpaper-04f00454.svg",import.meta.url).href,Ue=""+new URL("close-664899ff.svg",import.meta.url).href,Ae=()=>{const{wallpaperId:r,setWallpaperId:N,uploadWallpaper:y,setWallpaper:m}=W(),{getRecentWallpapers:S,createWallpaperUrl:s,deleteWallpaper:w}=A(),[v,C]=i.useState([]),[f,c]=i.useState({}),[u,h]=i.useState(!1),g=B.useRef(null),_=async()=>{const l=await S();C(l);const o={};l.forEach(n=>{o[n.id]=s(n.thumbnail||n.data)}),c(o)};i.useEffect(()=>{_()},[]);const k=()=>{var l;(l=g.current)==null||l.click()},j=async l=>{var n;const o=(n=l.target.files)==null?void 0:n[0];if(o){h(!0);try{await y(o),await _()}catch(b){console.error("Upload failed:",b)}finally{h(!1),g.current&&(g.current.value="")}}},O=async l=>{l!==r&&await N(l)},p=async(l,o)=>{l.stopPropagation();try{await w(o),o===r&&m(null),await _()}catch(n){console.error("Delete failed:",n)}};return e.jsxs("div",{className:d.gridContainer,children:[e.jsxs("div",{className:`${d.uploadBtn} ${u?d.uploading:""}`,onClick:k,title:"Upload Wallpaper",children:[e.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:j,style:{display:"none"}}),e.jsx("img",{src:Pe,alt:"Upload",width:24,height:24})]}),v.map(l=>e.jsxs("div",{className:`${d.thumbnail} ${l.id===r?d.active:""}`,onClick:()=>O(l.id),title:new Date(l.createdAt).toLocaleDateString(),children:[f[l.id]&&e.jsx("img",{src:f[l.id],alt:"Wallpaper",className:d.image}),e.jsx("button",{className:d.deleteBtn,onClick:o=>p(o,l.id),title:"Delete",children:e.jsx("img",{src:Ue,alt:"Delete",width:10,height:10})})]},l.id))]})},De=({isOpen:r,onClose:N,anchorPosition:y})=>{const{theme:m,setTheme:S,followSystem:s,setFollowSystem:w,wallpaper:v,setWallpaper:C,gradientId:f,setGradientId:c,texture:u,setTexture:h,dockPosition:g,setDockPosition:_,iconSize:k,setIconSize:j}=W(),O=D(),[p,l]=i.useState(r),o=i.useRef(null),n=m==="default"&&!s;if(i.useEffect(()=>{n&&u!=="none"&&h("none")},[n,u,h]),i.useEffect(()=>{r&&l(!0)},[r]),i.useEffect(()=>{r&&p&&o.current&&z(o.current)},[r,p]),i.useEffect(()=>{!r&&p&&(o.current?E(o.current,300,()=>l(!1)):l(!1))},[r,p]),!p)return null;const b=a=>{S(a),a==="default"&&c("theme-default"),s&&w(!1)},$=()=>{w(!s)},G=a=>{if(v){C(null),c(a);return}f===a?(c(a==="theme-default"?"gradient-1":"theme-default"),requestAnimationFrame(()=>{c(a)})):c(a)},I=a=>{h(a)},L={left:`${y.x}px`,top:`${y.y+60}px`};let x=-1;s?x=2:m==="light"?x=0:m==="dark"&&(x=1);const P={transform:x>=0?`translateX(${x*56}px)`:"scale(0)",opacity:x>=0?1:0};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.backdrop,onClick:N}),e.jsx("div",{ref:o,className:t.modal,style:L,children:e.jsxs("div",{className:t.innerContainer,children:[e.jsxs("div",{className:t.iconContainer,children:[e.jsx("button",{className:`${t.defaultTheme} ${n?t.defaultThemeActive:""}`,onClick:()=>b("default"),title:"Default Theme",children:e.jsx("img",{src:we,alt:"Default Theme",width:24,height:24})}),e.jsxs("div",{className:t.themeGroupContainer,children:[e.jsx("div",{className:t.highlightBackground,style:P}),e.jsx("button",{className:t.themeGroupOption,onClick:()=>b("light"),title:"Light Theme",children:e.jsx("img",{src:je,alt:"Light Theme",width:24,height:24})}),e.jsx("button",{className:t.themeGroupOption,onClick:()=>b("dark"),title:"Dark Theme",children:e.jsx("img",{src:Te,alt:"Dark Theme",width:24,height:24})}),e.jsx("button",{className:t.themeGroupOption,onClick:$,title:"Follow System",children:e.jsx("img",{src:Ne,alt:"Follow System",width:24,height:24})})]})]}),e.jsx("div",{className:`${t.textureSectionWrapper} ${!n&&!v?t.textureSectionWrapperOpen:""}`,children:e.jsxs("div",{className:t.textureSection,children:[e.jsx("button",{className:`${t.textureOption} ${u==="none"?t.textureOptionActive:""}`,onClick:()=>I("none"),title:"No Texture",children:e.jsx("div",{className:t.texturePreviewNone,children:e.jsx("img",{src:Se,alt:"No Texture",width:24,height:24})})}),e.jsx("button",{className:`${t.textureOption} ${u==="point"?t.textureOptionActive:""}`,onClick:()=>I("point"),title:"Point Texture",children:e.jsx("img",{src:be,alt:"Point Texture",className:t.texturePreviewImage})}),e.jsx("button",{className:`${t.textureOption} ${u==="x"?t.textureOptionActive:""}`,onClick:()=>I("x"),title:"X Texture",children:e.jsx("img",{src:ye,alt:"X Texture",className:t.texturePreviewImage})})]})}),e.jsx("div",{className:t.colorOptionsContainer,children:F.map(a=>{let T="";const R=a.id==="theme-default";R?T="var(--color-bg-secondary)":T=n?a.gradient:a.solid;const U=!v&&f===a.id;return e.jsx("button",{className:`${t.colorOption} ${U?t.colorOptionActive:""}`,onClick:()=>G(a.id),title:a.name,style:{background:T,display:"flex",alignItems:"center",justifyContent:"center"},children:R&&e.jsx("img",{src:Ce,alt:"Default",width:24,height:24,style:{filter:m==="dark"||s&&O==="dark"?"invert(1)":"none"}})},a.id)})}),e.jsx("div",{className:t.wallpaperSection,children:e.jsx(Ae,{})}),e.jsxs("div",{className:t.layoutSection,children:[e.jsxs("div",{className:t.layoutRow,children:[e.jsx("span",{className:t.layoutLabel,children:"Position"}),e.jsxs("div",{className:t.layoutToggleGroup,children:[e.jsx("div",{className:t.layoutHighlight,style:{transform:`translateX(${g==="center"?0:100}%)`}}),e.jsx("button",{className:t.layoutToggleOption,onClick:()=>_("center"),title:"Center",children:"Center"}),e.jsx("button",{className:t.layoutToggleOption,onClick:()=>_("bottom"),title:"Bottom",children:"Bottom"})]})]}),e.jsxs("div",{className:t.layoutRow,children:[e.jsx("span",{className:t.layoutLabel,children:"Icon Size"}),e.jsxs("div",{className:t.layoutToggleGroup,children:[e.jsx("div",{className:t.layoutHighlight,style:{transform:`translateX(${k==="large"?0:100}%)`}}),e.jsx("button",{className:t.layoutToggleOption,onClick:()=>j("large"),title:"Large",children:"Large"}),e.jsx("button",{className:t.layoutToggleOption,onClick:()=>j("small"),title:"Small",children:"Small"})]})]})]})]})})]})};export{De as SettingsModal};
