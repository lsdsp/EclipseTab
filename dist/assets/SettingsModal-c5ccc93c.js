import{w as Es,x as wn,j as c,y as Ge,z as m,A as Ne,B as ys,C as I,p as As,I as fn,m as Ss,J as Ln,K as Cn,L as bn,N as Un,f as Qn,O as vn,s as ns,P as _n,Q as Yn,R as Rn,T as Pn,U as B,V as Bn,W as $n,X as Wn,Y as Gn,Z as Hn,_ as Zn,$ as Vn,a0 as as,a1 as Fn,a2 as Jn,a3 as cs}from"./main-7e1f7670.js";import{r as j,R as Kn}from"./vendor-react-3d7076e0.js";import"./vendor-utils-654bd828.js";const Xn="_backdrop_1jbu3_7",qn="_modal_1jbu3_23",ea="_innerContainer_1jbu3_51",ta="_iconContainer_1jbu3_79",sa="_defaultTheme_1jbu3_97",na="_defaultThemeActive_1jbu3_139",aa="_themeGroupContainer_1jbu3_151",ca="_highlightBackground_1jbu3_177",ia="_themeGroupOption_1jbu3_203",oa="_textureOption_1jbu3_237",ra="_wallpaperUploadBtn_1jbu3_239",la="_textureSectionWrapper_1jbu3_251",Ma="_textureSectionWrapperOpen_1jbu3_281",ua="_textureSection_1jbu3_251",ga="_textureOptionActive_1jbu3_369",Da="_texturePreviewNone_1jbu3_381",Na="_texturePreviewImage_1jbu3_399",da="_texturePreviewPattern_1jbu3_413",Ia="_colorOptionsContainer_1jbu3_431",ja="_colorOption_1jbu3_431",Ta="_colorOptionActive_1jbu3_489",pa="_wallpaperSection_1jbu3_503",Ea="_disabled_1jbu3_523",ya="_hidden_1jbu3_537",Aa="_error_1jbu3_547",Sa="_layoutSection_1jbu3_579",ha="_layoutRow_1jbu3_603",xa="_layoutHint_1jbu3_610",ma="_layoutLabel_1jbu3_620",ka="_layoutToggleGroup_1jbu3_638",Oa="_layoutHighlight_1jbu3_658",za="_layoutToggleOption_1jbu3_684",wa="_sectionDivider_1jbu3_722",fa="_subSectionTitle_1jbu3_728",La="_actionRow_1jbu3_735",Ca="_actionButton_1jbu3_740",ba="_actionButtonDanger_1jbu3_741",Ua="_actionButtonActive_1jbu3_762",Qa="_numberInput_1jbu3_773",va="_textInputSmall_1jbu3_784",_a="_timeInput_1jbu3_796",Ya="_ruleList_1jbu3_807",Ra="_ruleRow_1jbu3_813",Pa="_ruleMain_1jbu3_823",Ba="_ruleLabel_1jbu3_831",$a="_timeRuleEditor_1jbu3_840",Wa="_weekdayRow_1jbu3_846",Ga="_weekdayChip_1jbu3_852",Ha="_weekdayChipActive_1jbu3_863",Za="_timeRangeRow_1jbu3_868",Va="_timeRangeSeparator_1jbu3_874",Fa="_ruleActions_1jbu3_879",Ja="_ruleActionButton_1jbu3_885",Ka="_ruleActionButtonDanger_1jbu3_886",Xa="_previewBox_1jbu3_900",qa="_footer_1jbu3_912",ec="_githubLink_1jbu3_931",i={backdrop:Xn,modal:qn,innerContainer:ea,iconContainer:ta,defaultTheme:sa,defaultThemeActive:na,themeGroupContainer:aa,highlightBackground:ca,themeGroupOption:ia,textureOption:oa,wallpaperUploadBtn:ra,textureSectionWrapper:la,textureSectionWrapperOpen:Ma,textureSection:ua,textureOptionActive:ga,texturePreviewNone:Da,texturePreviewImage:Na,texturePreviewPattern:da,colorOptionsContainer:Ia,colorOption:ja,colorOptionActive:Ta,wallpaperSection:pa,disabled:Ea,hidden:ya,error:Aa,layoutSection:Sa,layoutRow:ha,layoutHint:xa,layoutLabel:ma,layoutToggleGroup:ka,layoutHighlight:Oa,layoutToggleOption:za,sectionDivider:wa,subSectionTitle:fa,actionRow:La,actionButton:Ca,actionButtonDanger:ba,actionButtonActive:Ua,numberInput:Qa,textInputSmall:va,timeInput:_a,ruleList:Ya,ruleRow:Ra,ruleMain:Pa,ruleLabel:Ba,timeRuleEditor:$a,weekdayRow:Wa,weekdayChip:Ga,weekdayChipActive:Ha,timeRangeRow:Za,timeRangeSeparator:Va,ruleActions:Fa,ruleActionButton:Ja,ruleActionButtonDanger:Ka,previewBox:Xa,footer:qa,githubLink:ec},tc="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xNiAxQzE2LjIwMjEgMS4wMDAwNyAxNi4zOTk0IDEuMDYxMzUgMTYuNTY1OSAxLjE3NTc4QzE2LjczMjUgMS4yOTAyIDE2Ljg2MDQgMS40NTI0IDE2LjkzMyAxLjY0MUwxOC4xMTIgNC43MDVDMTguNDEyIDUuNDg2IDE4LjUwNyA1LjcxMiAxOC42MzYgNS44OTNDMTguNzY1MyA2LjA3NTE0IDE4LjkyNDEgNi4yMzQzNSAxOS4xMDYgNi4zNjRDMTkuMjg4IDYuNDk0IDE5LjUxMyA2LjU4OCAyMC4yOTUgNi44ODhMMjMuMzU5IDguMDY3QzIzLjU0NzQgOC4xMzk2OCAyMy43MDk0IDguMjY3NzIgMjMuODIzNyA4LjQzNDI2QzIzLjkzOCA4LjYwMDggMjMuOTk5MSA4Ljc5ODAzIDIzLjk5OTEgOUMyMy45OTkxIDkuMjAxOTcgMjMuOTM4IDkuMzk5MiAyMy44MjM3IDkuNTY1NzRDMjMuNzA5NCA5LjczMjI4IDIzLjU0NzQgOS44NjAzMiAyMy4zNTkgOS45MzNMMjAuMjk1IDExLjExMkMxOS41MTMgMTEuNDEyIDE5LjI4OCAxMS41MDcgMTkuMTA3IDExLjYzNkMxOC45MjUgMTEuNzY2IDE4Ljc2NiAxMS45MjUgMTguNjM2IDEyLjEwNkMxOC41MDYgMTIuMjg4IDE4LjQxMiAxMi41MTQgMTguMTEyIDEzLjI5NUwxNi45MzMgMTYuMzU5QzE2Ljg2MDMgMTYuNTQ3NCAxNi43MzIzIDE2LjcwOTQgMTYuNTY1NyAxNi44MjM3QzE2LjM5OTIgMTYuOTM4IDE2LjIwMiAxNi45OTkxIDE2IDE2Ljk5OTFDMTUuNzk4IDE2Ljk5OTEgMTUuNjAwOCAxNi45MzggMTUuNDM0MyAxNi44MjM3QzE1LjI2NzcgMTYuNzA5NCAxNS4xMzk3IDE2LjU0NzQgMTUuMDY3IDE2LjM1OUwxMy44ODggMTMuMjk1QzEzLjU4OCAxMi41MTQgMTMuNDkzIDEyLjI4OCAxMy4zNjQgMTIuMTA3QzEzLjIzNDggMTEuOTI0OCAxMy4wNzU5IDExLjc2NTYgMTIuODk0IDExLjYzNkMxMi43MTIgMTEuNTA2IDEyLjQ4NiAxMS40MTIgMTEuNzA1IDExLjExMkw4LjY0MDk5IDkuOTMzQzguNDUyNTYgOS44NjAzMiA4LjI5MDU1IDkuNzMyMjggOC4xNzYyOSA5LjU2NTc0QzguMDYyMDMgOS4zOTkyIDguMDAwODcgOS4yMDE5NyA4LjAwMDg3IDlDOC4wMDA4NyA4Ljc5ODAzIDguMDYyMDMgOC42MDA4IDguMTc2MjkgOC40MzQyNkM4LjI5MDU1IDguMjY3NzIgOC40NTI1NiA4LjEzOTY4IDguNjQwOTkgOC4wNjdMMTEuNzA1IDYuODg4QzEyLjQ4NiA2LjU4OCAxMi43MTIgNi40OTMgMTIuODkzIDYuMzY0QzEzLjA3NTEgNi4yMzQ3MyAxMy4yMzQzIDYuMDc1ODcgMTMuMzY0IDUuODk0QzEzLjQ5NCA1LjcxMiAxMy41ODggNS40ODYgMTMuODg4IDQuNzA1TDE1LjA2NyAxLjY0MUMxNS4xMzk1IDEuNDUyNCAxNS4yNjc1IDEuMjkwMiAxNS40MzQxIDEuMTc1NzhDMTUuNjAwNiAxLjA2MTM1IDE1Ljc5NzkgMS4wMDAwNyAxNiAxWk0xNiA0Ljc4NkwxNS43NTUgNS40MjNMMTUuNzE1IDUuNTI1QzE1LjQ3MiA2LjE2IDE1LjI4OCA2LjYzOSAxNC45OTUgNy4wNTJDMTQuNzM1NiA3LjQxNjUzIDE0LjQxNjggNy43MzQ5NSAxNC4wNTIgNy45OTRDMTMuNjM5IDguMjg4IDEzLjE2IDguNDcyIDEyLjUyNSA4LjcxNkwxMi40MjMgOC43NTVMMTEuNzg2IDlMMTIuNDIzIDkuMjQ1TDEyLjUyNSA5LjI4NUMxMy4xNiA5LjUyOCAxMy42MzkgOS43MTIgMTQuMDUyIDEwLjAwNUMxNC40MTY1IDEwLjI2NDQgMTQuNzM0OSAxMC41ODMyIDE0Ljk5NCAxMC45NDhDMTUuMjg4IDExLjM2MSAxNS40NzIgMTEuODQgMTUuNzE2IDEyLjQ3NUwxNS43NTUgMTIuNTc3TDE2IDEzLjIxNEwxNi4yNDUgMTIuNTc3TDE2LjI4NSAxMi40NzVDMTYuNTI4IDExLjg0IDE2LjcxMiAxMS4zNjEgMTcuMDA1IDEwLjk0OEMxNy4yNjQ0IDEwLjU4MzUgMTcuNTgzMiAxMC4yNjUgMTcuOTQ4IDEwLjAwNkMxOC4zNjEgOS43MTIgMTguODQgOS41MjggMTkuNDc0IDkuMjg0TDE5LjU3NyA5LjI0NUwyMC4yMTQgOUwxOS41NzcgOC43NTVMMTkuNDc0IDguNzE1QzE4Ljg0IDguNDcyIDE4LjM2MSA4LjI4OCAxNy45NDggNy45OTVDMTcuNTgzNSA3LjczNTU2IDE3LjI2NSA3LjQxNjgxIDE3LjAwNiA3LjA1MkMxNi43MTIgNi42MzkgMTYuNTI4IDYuMTYgMTYuMjg0IDUuNTI1TDE2LjI0NSA1LjQyM0wxNiA0Ljc4NlpNNy40OTk5OSAxMkM3LjY4NTY2IDEyLjAwMDEgNy44Njc2MiAxMi4wNTE5IDguMDI1NTIgMTIuMTQ5NkM4LjE4MzQyIDEyLjI0NzIgOC4zMTEgMTIuMzg2OSA4LjM5Mzk5IDEyLjU1M0w5LjE3ODk5IDE0LjEyMkM5LjQ2MDk5IDE0LjY4NyA5LjU0Njk5IDE0Ljg0OSA5LjY1MTk5IDE0Ljk4NUM5Ljc1NjkgMTUuMTIxMSA5Ljg3ODkgMTUuMjQzMSAxMC4wMTUgMTUuMzQ4QzEwLjE1MSAxNS40NTIgMTAuMzEzIDE1LjUzOCAxMC44NzggMTUuODIxTDEyLjQ0OCAxNi42MDZDMTIuNjEzOSAxNi42ODkxIDEyLjc1MzQgMTYuODE2OCAxMi44NTA4IDE2Ljk3NDdDMTIuOTQ4MyAxNy4xMzI2IDEyLjk5OTkgMTcuMzE0NCAxMi45OTk5IDE3LjVDMTIuOTk5OSAxNy42ODU2IDEyLjk0ODMgMTcuODY3NCAxMi44NTA4IDE4LjAyNTNDMTIuNzUzNCAxOC4xODMyIDEyLjYxMzkgMTguMzEwOSAxMi40NDggMTguMzk0TDEwLjg3OCAxOS4xNzlDMTAuMzEzIDE5LjQ2MSAxMC4xNTEgMTkuNTQ4IDEwLjAxNSAxOS42NTJDOS44Nzg5MyAxOS43NTY5IDkuNzU2OTIgMTkuODc4OSA5LjY1MTk5IDIwLjAxNUM5LjU0Njk5IDIwLjE1MSA5LjQ2MTk5IDIwLjMxMyA5LjE3ODk5IDIwLjg3OEw4LjM5Mzk5IDIyLjQ0OEM4LjMxMDg1IDIyLjYxMzkgOC4xODMyIDIyLjc1MzQgOC4wMjUzMiAyMi44NTA4QzcuODY3NDMgMjIuOTQ4MyA3LjY4NTU0IDIyLjk5OTkgNy40OTk5OSAyMi45OTk5QzcuMzE0NDQgMjIuOTk5OSA3LjEzMjU1IDIyLjk0ODMgNi45NzQ2NyAyMi44NTA4QzYuODE2NzggMjIuNzUzNCA2LjY4OTEzIDIyLjYxMzkgNi42MDU5OSAyMi40NDhMNS44MjA5OSAyMC44NzhDNS41Mzg5OSAyMC4zMTMgNS40NTI5OSAyMC4xNTEgNS4zNDc5OSAyMC4wMTVDNS4yNDMwNiAxOS44Nzg5IDUuMTIxMDYgMTkuNzU2OSA0Ljk4NDk5IDE5LjY1MkM0Ljg0ODk5IDE5LjU0NyA0LjY4Njk5IDE5LjQ2MiA0LjEyMTk5IDE5LjE3OUwyLjU1MTk5IDE4LjM5NEMyLjM4NjExIDE4LjMxMDkgMi4yNDY2MyAxOC4xODMyIDIuMTQ5MTYgMTguMDI1M0MyLjA1MTY5IDE3Ljg2NzQgMi4wMDAwNiAxNy42ODU2IDIuMDAwMDYgMTcuNUMyLjAwMDA2IDE3LjMxNDQgMi4wNTE2OSAxNy4xMzI2IDIuMTQ5MTYgMTYuOTc0N0MyLjI0NjYzIDE2LjgxNjggMi4zODYxMSAxNi42ODkxIDIuNTUxOTkgMTYuNjA2TDQuMTIxOTkgMTUuODIxQzQuNjg2OTkgMTUuNTM5IDQuODQ4OTkgMTUuNDUzIDQuOTg0OTkgMTUuMzQ4QzUuMTIxMDkgMTUuMjQzMSA1LjI0MzA5IDE1LjEyMTEgNS4zNDc5OSAxNC45ODVDNS40NTI5OSAxNC44NDkgNS41Mzc5OSAxNC42ODcgNS44MjA5OSAxNC4xMjJMNi42MDU5OSAxMi41NTJDNi42ODkxMiAxMi4zODYxIDYuODE2NzcgMTIuMjQ2NiA2Ljk3NDY2IDEyLjE0OTFDNy4xMzI1NCAxMi4wNTE2IDcuMzE0NDQgMTIgNy40OTk5OSAxMlpNNy40OTk5OSAxNS4yMzZDNy4zMDQ5OSAxNS42MjYgNy4xNDM5OSAxNS45MzEgNi45MzE5OSAxNi4yMDZDNi43MjE5OSAxNi40NzggNi40Nzc5OSAxNi43MjIgNi4yMDU5OSAxNi45MzJDNS45MzA5OSAxNy4xNDQgNS42MjU5OSAxNy4zMDUgNS4yMzU5OSAxNy41QzUuNjI1OTkgMTcuNjk1IDUuOTMwOTkgMTcuODU2IDYuMjA1OTkgMTguMDY4QzYuNDc3OTkgMTguMjc4IDYuNzIxOTkgMTguNTIyIDYuOTMxOTkgMTguNzk0QzcuMTQzOTkgMTkuMDY5IDcuMzA0OTkgMTkuMzc0IDcuNDk5OTkgMTkuNzY0QzcuNjk0OTkgMTkuMzc0IDcuODU1OTkgMTkuMDY5IDguMDY3OTkgMTguNzk0QzguMjc3OTkgMTguNTIyIDguNTIxOTkgMTguMjc4IDguNzkzOTkgMTguMDY4QzkuMDY4OTkgMTcuODU2IDkuMzczOTkgMTcuNjk1IDkuNzYzOTkgMTcuNUM5LjM3Mzk5IDE3LjMwNSA5LjA2ODk5IDE3LjE0NCA4Ljc5Mzk5IDE2LjkzMkM4LjUyMTgzIDE2LjcyMjIgOC4yNzc4MiAxNi40NzgyIDguMDY3OTkgMTYuMjA2QzcuODU1OTkgMTUuOTMxIDcuNjk0OTkgMTUuNjI2IDcuNDk5OTkgMTUuMjM2WiIgZmlsbD0iYmxhY2siLz4NCjwvc3ZnPg0K",sc="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMiAxQzEyLjI2NTIgMSAxMi41MTk2IDEuMTA1MzYgMTIuNzA3MSAxLjI5Mjg5QzEyLjg5NDYgMS40ODA0MyAxMyAxLjczNDc4IDEzIDJWNEMxMyA0LjI2NTIyIDEyLjg5NDYgNC41MTk1NyAxMi43MDcxIDQuNzA3MTFDMTIuNTE5NiA0Ljg5NDY0IDEyLjI2NTIgNSAxMiA1QzExLjczNDggNSAxMS40ODA0IDQuODk0NjQgMTEuMjkyOSA0LjcwNzExQzExLjEwNTQgNC41MTk1NyAxMSA0LjI2NTIyIDExIDRWMkMxMSAxLjczNDc4IDExLjEwNTQgMS40ODA0MyAxMS4yOTI5IDEuMjkyODlDMTEuNDgwNCAxLjEwNTM2IDExLjczNDggMSAxMiAxWk00LjE5MyA0LjE5M0M0LjM4MDUzIDQuMDA1NTMgNC42MzQ4NCAzLjkwMDIxIDQuOSAzLjkwMDIxQzUuMTY1MTYgMy45MDAyMSA1LjQxOTQ3IDQuMDA1NTMgNS42MDcgNC4xOTNMNy4wMjEgNS42MDdDNy4xMTY1MSA1LjY5OTI1IDcuMTkyNjkgNS44MDk1OSA3LjI0NTEgNS45MzE2QzcuMjk3NTEgNi4wNTM2IDcuMzI1MSA2LjE4NDgyIDcuMzI2MjUgNi4zMTc2QzcuMzI3NDEgNi40NTAzOCA3LjMwMjEgNi41ODIwNiA3LjI1MTgyIDYuNzA0OTVDNy4yMDE1NCA2LjgyNzg1IDcuMTI3MjkgNi45Mzk1IDcuMDMzNCA3LjAzMzRDNi45Mzk1IDcuMTI3MjkgNi44Mjc4NSA3LjIwMTU0IDYuNzA0OTUgNy4yNTE4MkM2LjU4MjA2IDcuMzAyMSA2LjQ1MDM4IDcuMzI3NDEgNi4zMTc2IDcuMzI2MjVDNi4xODQ4MiA3LjMyNTEgNi4wNTM2IDcuMjk3NTEgNS45MzE2IDcuMjQ1MUM1LjgwOTU5IDcuMTkyNjkgNS42OTkyNSA3LjExNjUxIDUuNjA3IDcuMDIxTDQuMTkzIDUuNjA3QzQuMDA1NTMgNS40MTk0NyAzLjkwMDIxIDUuMTY1MTYgMy45MDAyMSA0LjlDMy45MDAyMSA0LjYzNDg0IDQuMDA1NTMgNC4zODA1MyA0LjE5MyA0LjE5M1pNMTkuODA3IDQuMTkzQzE5Ljk5NDUgNC4zODA1MyAyMC4wOTk4IDQuNjM0ODQgMjAuMDk5OCA0LjlDMjAuMDk5OCA1LjE2NTE2IDE5Ljk5NDUgNS40MTk0NyAxOS44MDcgNS42MDdMMTguMzkzIDcuMDIxQzE4LjMwMDggNy4xMTY1MSAxOC4xOTA0IDcuMTkyNjkgMTguMDY4NCA3LjI0NTFDMTcuOTQ2NCA3LjI5NzUxIDE3LjgxNTIgNy4zMjUxIDE3LjY4MjQgNy4zMjYyNUMxNy41NDk2IDcuMzI3NDEgMTcuNDE3OSA3LjMwMjEgMTcuMjk1IDcuMjUxODJDMTcuMTcyMSA3LjIwMTU0IDE3LjA2MDUgNy4xMjcyOSAxNi45NjY2IDcuMDMzNEMxNi44NzI3IDYuOTM5NSAxNi43OTg1IDYuODI3ODUgMTYuNzQ4MiA2LjcwNDk1QzE2LjY5NzkgNi41ODIwNiAxNi42NzI2IDYuNDUwMzggMTYuNjczOCA2LjMxNzZDMTYuNjc0OSA2LjE4NDgyIDE2LjcwMjUgNi4wNTM2IDE2Ljc1NDkgNS45MzE2QzE2LjgwNzMgNS44MDk1OSAxNi44ODM1IDUuNjk5MjUgMTYuOTc5IDUuNjA3TDE4LjM5MyA0LjE5M0MxOC41ODA1IDQuMDA1NTMgMTguODM0OCAzLjkwMDIxIDE5LjEgMy45MDAyMUMxOS4zNjUyIDMuOTAwMjEgMTkuNjE5NSA0LjAwNTUzIDE5LjgwNyA0LjE5M1pNNiAxMkM2IDEwLjQwODcgNi42MzIxNCA4Ljg4MjU4IDcuNzU3MzYgNy43NTczNkM4Ljg4MjU4IDYuNjMyMTQgMTAuNDA4NyA2IDEyIDZDMTMuNTkxMyA2IDE1LjExNzQgNi42MzIxNCAxNi4yNDI2IDcuNzU3MzZDMTcuMzY3OSA4Ljg4MjU4IDE4IDEwLjQwODcgMTggMTJDMTggMTMuNTkxMyAxNy4zNjc5IDE1LjExNzQgMTYuMjQyNiAxNi4yNDI2QzE1LjExNzQgMTcuMzY3OSAxMy41OTEzIDE4IDEyIDE4QzEwLjQwODcgMTggOC44ODI1OCAxNy4zNjc5IDcuNzU3MzYgMTYuMjQyNkM2LjYzMjE0IDE1LjExNzQgNiAxMy41OTEzIDYgMTJaTTEyIDhDMTEuNDc0NyA4IDEwLjk1NDYgOC4xMDM0NiAxMC40NjkzIDguMzA0NDhDOS45ODM5NiA4LjUwNTUgOS41NDMwMSA4LjgwMDE0IDkuMTcxNTcgOS4xNzE1N0M4LjgwMDE0IDkuNTQzMDEgOC41MDU1IDkuOTgzOTYgOC4zMDQ0OCAxMC40NjkzQzguMTAzNDYgMTAuOTU0NiA4IDExLjQ3NDcgOCAxMkM4IDEyLjUyNTMgOC4xMDM0NiAxMy4wNDU0IDguMzA0NDggMTMuNTMwN0M4LjUwNTUgMTQuMDE2IDguODAwMTQgMTQuNDU3IDkuMTcxNTcgMTQuODI4NEM5LjU0MzAxIDE1LjE5OTkgOS45ODM5NiAxNS40OTQ1IDEwLjQ2OTMgMTUuNjk1NUMxMC45NTQ2IDE1Ljg5NjUgMTEuNDc0NyAxNiAxMiAxNkMxMy4wNjA5IDE2IDE0LjA3ODMgMTUuNTc4NiAxNC44Mjg0IDE0LjgyODRDMTUuNTc4NiAxNC4wNzgzIDE2IDEzLjA2MDkgMTYgMTJDMTYgMTAuOTM5MSAxNS41Nzg2IDkuOTIxNzIgMTQuODI4NCA5LjE3MTU3QzE0LjA3ODMgOC40MjE0MyAxMy4wNjA5IDggMTIgOFpNMSAxMkMxIDExLjczNDggMS4xMDUzNiAxMS40ODA0IDEuMjkyODkgMTEuMjkyOUMxLjQ4MDQzIDExLjEwNTQgMS43MzQ3OCAxMSAyIDExSDRDNC4yNjUyMiAxMSA0LjUxOTU3IDExLjEwNTQgNC43MDcxMSAxMS4yOTI5QzQuODk0NjQgMTEuNDgwNCA1IDExLjczNDggNSAxMkM1IDEyLjI2NTIgNC44OTQ2NCAxMi41MTk2IDQuNzA3MTEgMTIuNzA3MUM0LjUxOTU3IDEyLjg5NDYgNC4yNjUyMiAxMyA0IDEzSDJDMS43MzQ3OCAxMyAxLjQ4MDQzIDEyLjg5NDYgMS4yOTI4OSAxMi43MDcxQzEuMTA1MzYgMTIuNTE5NiAxIDEyLjI2NTIgMSAxMlpNMTkgMTJDMTkgMTEuNzM0OCAxOS4xMDU0IDExLjQ4MDQgMTkuMjkyOSAxMS4yOTI5QzE5LjQ4MDQgMTEuMTA1NCAxOS43MzQ4IDExIDIwIDExSDIyQzIyLjI2NTIgMTEgMjIuNTE5NiAxMS4xMDU0IDIyLjcwNzEgMTEuMjkyOUMyMi44OTQ2IDExLjQ4MDQgMjMgMTEuNzM0OCAyMyAxMkMyMyAxMi4yNjUyIDIyLjg5NDYgMTIuNTE5NiAyMi43MDcxIDEyLjcwNzFDMjIuNTE5NiAxMi44OTQ2IDIyLjI2NTIgMTMgMjIgMTNIMjBDMTkuNzM0OCAxMyAxOS40ODA0IDEyLjg5NDYgMTkuMjkyOSAxMi43MDcxQzE5LjEwNTQgMTIuNTE5NiAxOSAxMi4yNjUyIDE5IDEyWk03LjAyMSAxNi45ODNDNy4yMDg0NyAxNy4xNzA1IDcuMzEzNzkgMTcuNDI0OCA3LjMxMzc5IDE3LjY5QzcuMzEzNzkgMTcuOTU1MiA3LjIwODQ3IDE4LjIwOTUgNy4wMjEgMTguMzk3TDUuNjA3IDE5LjgxMUM1LjQxODQgMTkuOTkzMiA1LjE2NTggMjAuMDk0IDQuOTAzNiAyMC4wOTE3QzQuNjQxNCAyMC4wODk0IDQuMzkwNTkgMTkuOTg0MiA0LjIwNTE4IDE5Ljc5ODhDNC4wMTk3NyAxOS42MTM0IDMuOTE0NiAxOS4zNjI2IDMuOTEyMzMgMTkuMTAwNEMzLjkxMDA1IDE4LjgzODIgNC4wMTA4NCAxOC41ODU2IDQuMTkzIDE4LjM5N0w1LjYwNyAxNi45ODNDNS43OTQ1MyAxNi43OTU1IDYuMDQ4ODQgMTYuNjkwMiA2LjMxNCAxNi42OTAyQzYuNTc5MTYgMTYuNjkwMiA2LjgzMzQ3IDE2Ljc5NTUgNy4wMjEgMTYuOTgzWk0xNi45NzkgMTYuOTgzQzE3LjE2NjUgMTYuNzk1NSAxNy40MjA4IDE2LjY5MDIgMTcuNjg2IDE2LjY5MDJDMTcuOTUxMiAxNi42OTAyIDE4LjIwNTUgMTYuNzk1NSAxOC4zOTMgMTYuOTgzTDE5LjgwNyAxOC4zOTdDMTkuOTg5MiAxOC41ODU2IDIwLjA5IDE4LjgzODIgMjAuMDg3NyAxOS4xMDA0QzIwLjA4NTQgMTkuMzYyNiAxOS45ODAyIDE5LjYxMzQgMTkuNzk0OCAxOS43OTg4QzE5LjYwOTQgMTkuOTg0MiAxOS4zNTg2IDIwLjA4OTQgMTkuMDk2NCAyMC4wOTE3QzE4LjgzNDIgMjAuMDk0IDE4LjU4MTYgMTkuOTkzMiAxOC4zOTMgMTkuODExTDE2Ljk3OSAxOC4zOTdDMTYuNzkxNSAxOC4yMDk1IDE2LjY4NjIgMTcuOTU1MiAxNi42ODYyIDE3LjY5QzE2LjY4NjIgMTcuNDI0OCAxNi43OTE1IDE3LjE3MDUgMTYuOTc5IDE2Ljk4M1pNMTIgMTlDMTIuMjY1MiAxOSAxMi41MTk2IDE5LjEwNTQgMTIuNzA3MSAxOS4yOTI5QzEyLjg5NDYgMTkuNDgwNCAxMyAxOS43MzQ4IDEzIDIwVjIyQzEzIDIyLjI2NTIgMTIuODk0NiAyMi41MTk2IDEyLjcwNzEgMjIuNzA3MUMxMi41MTk2IDIyLjg5NDYgMTIuMjY1MiAyMyAxMiAyM0MxMS43MzQ4IDIzIDExLjQ4MDQgMjIuODk0NiAxMS4yOTI5IDIyLjcwNzFDMTEuMTA1NCAyMi41MTk2IDExIDIyLjI2NTIgMTEgMjJWMjBDMTEgMTkuNzM0OCAxMS4xMDU0IDE5LjQ4MDQgMTEuMjkyOSAxOS4yOTI5QzExLjQ4MDQgMTkuMTA1NCAxMS43MzQ4IDE5IDEyIDE5WiIgZmlsbD0iYmxhY2siLz4NCjwvc3ZnPg0K",nc="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik04Ljg2MyAxLjI5MzAxQzkuMDA2ODggMS40MzY3OSA5LjEwMzQ4IDEuNjIxMDMgOS4xMzk5MyAxLjgyMTE1QzkuMTc2MzggMi4wMjEyNiA5LjE1MDk0IDIuMjI3NzMgOS4wNjcgMi40MTMwMUM4LjUxNDE0IDMuNjM2NjQgOC4yMjkxMSA0Ljk2NDI4IDguMjMxIDYuMzA3MDFDOC4yMzEgNy41NDk2NiA4LjQ3NTc4IDguNzgwMTQgOC45NTEzNSA5LjkyODE5QzkuNDI2OTIgMTEuMDc2MiAxMC4xMjQgMTIuMTE5NCAxMS4wMDI3IDEyLjk5OEMxMS44ODE0IDEzLjg3NjYgMTIuOTI0NiAxNC41NzM2IDE0LjA3MjcgMTUuMDQ5QzE1LjIyMDggMTUuNTI0NSAxNi40NTEzIDE1Ljc2OTEgMTcuNjk0IDE1Ljc2OUMxOS4wODQgMTUuNzY5IDIwLjQwMSAxNS40NjkgMjEuNTg4IDE0LjkzM0MyMS43NzMxIDE0Ljg0OTQgMjEuOTc5NCAxNC44MjQxIDIyLjE3OTIgMTQuODYwNkMyMi4zNzkxIDE0Ljg5NzEgMjIuNTYzMSAxNC45OTM2IDIyLjcwNjggMTUuMTM3MkMyMi44NTA0IDE1LjI4MDkgMjIuOTQ2OSAxNS40NjQ5IDIyLjk4MzQgMTUuNjY0OEMyMy4wMTk5IDE1Ljg2NDYgMjIuOTk0NiAxNi4wNzA5IDIyLjkxMSAxNi4yNTZDMjIuMDAyOCAxOC4yNjYzIDIwLjUzMzkgMTkuOTcxOCAxOC42ODA1IDIxLjE2OEMxNi44MjcxIDIyLjM2NDMgMTQuNjY3OSAyMy4wMDAzIDEyLjQ2MiAyM0M2LjEzMiAyMyAxIDE3Ljg2OCAxIDExLjUzOEMxIDYuODg4MDEgMy43NjkgMi44ODYwMSA3Ljc0NCAxLjA4ODAxQzcuOTI5MjUgMS4wMDQ0MiA4LjEzNTU4IDAuOTc5MjU5IDguMzM1NDkgMS4wMTU4OEM4LjUzNTQgMS4wNTI1MSA4LjcxOTQxIDEuMTQ5MTcgOC44NjMgMS4yOTMwMVpNNi40MTMgNC4yNjAwMUM1LjQwMzc1IDUuMTAxOTkgNC41ODA5OSA2LjE0NSAzLjk5NzE2IDcuMzIyNTZDMy40MTMzMyA4LjUwMDEyIDMuMDgxMjMgOS43ODY0IDMuMDIyMDMgMTEuMDk5NEMyLjk2MjgzIDEyLjQxMjQgMy4xNzc4NCAxMy43MjM0IDMuNjUzMzQgMTQuOTQ4N0M0LjEyODgzIDE2LjE3NCA0Ljg1NDQgMTcuMjg2OCA1Ljc4Mzc4IDE4LjIxNjJDNi43MTMxNyAxOS4xNDU2IDcuODI1OTkgMTkuODcxMiA5LjA1MTMxIDIwLjM0NjdDMTAuMjc2NiAyMC44MjIyIDExLjU4NzYgMjEuMDM3MiAxMi45MDA2IDIwLjk3OEMxNC4yMTM2IDIwLjkxODggMTUuNDk5OSAyMC41ODY3IDE2LjY3NzQgMjAuMDAyOEMxNy44NTUgMTkuNDE5IDE4Ljg5OCAxOC41OTYzIDE5Ljc0IDE3LjU4N0MxOS4wNzYgMTcuNzA3IDE4LjM5MiAxNy43NjkgMTcuNjk0IDE3Ljc2OUMxMS4zNjQgMTcuNzY5IDYuMjMyIDEyLjYzNyA2LjIzMiA2LjMwNzAxQzYuMjMyIDUuNjA5MDEgNi4yOTUgNC45MjUwMSA2LjQxNCA0LjI2MTAxTDYuNDEzIDQuMjYwMDFaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo=",ac="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik05IDdDOSA4LjEwNDU3IDguMTA0NTcgOSA3IDlDNS44OTU0MyA5IDUgOC4xMDQ1NyA1IDdDNSA1Ljg5NTQzIDUuODk1NDMgNSA3IDVDOC4xMDQ1NyA1IDkgNS44OTU0MyA5IDdaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTkgMTdDOSAxOC4xMDQ2IDguMTA0NTcgMTkgNyAxOUM1Ljg5NTQzIDE5IDUgMTguMTA0NiA1IDE3QzUgMTUuODk1NCA1Ljg5NTQzIDE1IDcgMTVDOC4xMDQ1NyAxNSA5IDE1Ljg5NTQgOSAxN1oiIGZpbGw9ImJsYWNrIi8+DQo8cGF0aCBkPSJNMTkgN0MxOSA4LjEwNDU3IDE4LjEwNDYgOSAxNyA5QzE1Ljg5NTQgOSAxNSA4LjEwNDU3IDE1IDdDMTUgNS44OTU0MyAxNS44OTU0IDUgMTcgNUMxOC4xMDQ2IDUgMTkgNS44OTU0MyAxOSA3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0xOSAxN0MxOSAxOC4xMDQ2IDE4LjEwNDYgMTkgMTcgMTlDMTUuODk1NCAxOSAxNSAxOC4xMDQ2IDE1IDE3QzE1IDE1Ljg5NTQgMTUuODk1NCAxNSAxNyAxNUMxOC4xMDQ2IDE1IDE5IDE1Ljg5NTQgMTkgMTdaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo=",cc="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik01LjI5MzAzIDUuMjkzQzUuNDgwNTYgNS4xMDU1MyA1LjczNDg3IDUuMDAwMjEgNi4wMDAwMyA1LjAwMDIxQzYuMjY1MTkgNS4wMDAyMSA2LjUxOTUgNS4xMDU1MyA2LjcwNzAzIDUuMjkzTDEyIDEwLjU4NkwxNy4yOTMgNS4yOTNDMTcuMzg1MyA1LjE5NzQ5IDE3LjQ5NTYgNS4xMjEzMSAxNy42MTc2IDUuMDY4OUMxNy43Mzk2IDUuMDE2NDkgMTcuODcwOCA0Ljk4ODkgMTguMDAzNiA0Ljk4Nzc1QzE4LjEzNjQgNC45ODY1OSAxOC4yNjgxIDUuMDExODkgMTguMzkxIDUuMDYyMThDMTguNTEzOSA1LjExMjQ2IDE4LjYyNTUgNS4xODY3MSAxOC43MTk0IDUuMjgwNkMxOC44MTMzIDUuMzc0NSAxOC44ODc2IDUuNDg2MTUgMTguOTM3OSA1LjYwOTA0QzE4Ljk4ODEgNS43MzE5NCAxOS4wMTM0IDUuODYzNjIgMTkuMDEyMyA1Ljk5NjRDMTkuMDExMSA2LjEyOTE4IDE4Ljk4MzUgNi4yNjA0IDE4LjkzMTEgNi4zODI0QzE4Ljg3ODcgNi41MDQ0MSAxOC44MDI1IDYuNjE0NzUgMTguNzA3IDYuNzA3TDEzLjQxNCAxMkwxOC43MDcgMTcuMjkzQzE4Ljg4OTIgMTcuNDgxNiAxOC45OSAxNy43MzQyIDE4Ljk4NzcgMTcuOTk2NEMxOC45ODU0IDE4LjI1ODYgMTguODgwMyAxOC41MDk0IDE4LjY5NDggMTguNjk0OEMxOC41MDk0IDE4Ljg4MDIgMTguMjU4NiAxOC45ODU0IDE3Ljk5NjQgMTguOTg3N0MxNy43MzQyIDE4Ljk4OTkgMTcuNDgxNiAxOC44ODkyIDE3LjI5MyAxOC43MDdMMTIgMTMuNDE0TDYuNzA3MDMgMTguNzA3QzYuNTE4NDMgMTguODg5MiA2LjI2NTgzIDE4Ljk4OTkgNi4wMDM2MyAxOC45ODc3QzUuNzQxNDMgMTguOTg1NCA1LjQ5MDYyIDE4Ljg4MDIgNS4zMDUyMSAxOC42OTQ4QzUuMTE5OCAxOC41MDk0IDUuMDE0NjQgMTguMjU4NiA1LjAxMjM2IDE3Ljk5NjRDNS4wMTAwOCAxNy43MzQyIDUuMTEwODcgMTcuNDgxNiA1LjI5MzAzIDE3LjI5M0wxMC41ODYgMTJMNS4yOTMwMyA2LjcwN0M1LjEwNTU2IDYuNTE5NDcgNS4wMDAyNCA2LjI2NTE2IDUuMDAwMjQgNkM1LjAwMDI0IDUuNzM0ODMgNS4xMDU1NiA1LjQ4MDUzIDUuMjkzMDMgNS4yOTNaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo=",ic="_gridContainer_1wzd1_1",oc="_uploadBtn_1wzd1_23",rc="_uploading_1wzd1_57",lc="_pulse_1wzd1_1",Mc="_thumbnail_1wzd1_69",uc="_active_1wzd1_101",gc="_image_1wzd1_111",Dc="_deleteBtn_1wzd1_123",ie={gridContainer:ic,uploadBtn:oc,uploading:rc,pulse:lc,thumbnail:Mc,active:uc,image:gc,deleteBtn:Dc},Nc="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS45ODczIDdDMTIuMjUyNCA3IDEyLjUwNjggNy4xMDU1NiAxMi42OTQzIDcuMjkyOTdMMTYuNjk0MyAxMS4yOTNDMTYuODc2NSAxMS40ODE1IDE2Ljk3NzggMTEuNzMzOSAxNi45NzU2IDExLjk5NjFDMTYuOTczMyAxMi4yNTgyIDE2Ljg2NzkgMTIuNTA4OSAxNi42ODI2IDEyLjY5NDNDMTYuNDk3MyAxMi44Nzk3IDE2LjI0NjUgMTIuOTg1IDE1Ljk4NDQgMTIuOTg3M0MxNS43MjIyIDEyLjk4OTYgMTUuNDY4OSAxMi44ODkyIDE1LjI4MDMgMTIuNzA3TDEyLjk4NzMgMTAuNDE0MVYxNkMxMi45ODczIDE2LjI2NTEgMTIuODgxOCAxNi41MTk1IDEyLjY5NDMgMTYuNzA3QzEyLjUwNjggMTYuODk0NCAxMi4yNTI0IDE3IDExLjk4NzMgMTdDMTEuNzIyMiAxNi45OTk5IDExLjQ2NzcgMTYuODk0NSAxMS4yODAzIDE2LjcwN0MxMS4wOTI5IDE2LjUxOTYgMTAuOTg3NCAxNi4yNjUxIDEwLjk4NzMgMTZWMTAuNDE0MUw4LjY5NDM0IDEyLjcwN0M4LjUwNTc3IDEyLjg4OSA4LjI1MzI2IDEyLjk4OTYgNy45OTEyMSAxMi45ODczQzcuNzI5MDUgMTIuOTg1IDcuNDc4MzUgMTIuODc5NyA3LjI5Mjk3IDEyLjY5NDNDNy4xMDc2MiAxMi41MDg5IDcuMDAyMjggMTIuMjU4MiA3IDExLjk5NjFDNi45OTc3NSAxMS43MzQxIDcuMDk4MzMgMTEuNDgxNSA3LjI4MDI4IDExLjI5M0wxMS4yODAzIDcuMjkyOTdDMTEuNDY3NyA3LjEwNTU5IDExLjcyMjMgNy4wMDAxMSAxMS45ODczIDdaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNy4yMDAyIDJDMTguMDIzNyAyIDE4LjcwMTYgMS45OTg5OCAxOS4yNTIgMi4wNDM5NEMxOS44MTQgMi4wODk4NyAyMC4zMzExIDIuMTg4MjcgMjAuODE2NCAyLjQzNTU0TDIxLjA5MTggMi41ODk4NEMyMS43MTgzIDIuOTc0MTMgMjIuMjI4OSAzLjUyNTEyIDIyLjU2NDUgNC4xODM1OUMyMi44MTE3IDQuNjY4OSAyMi45MTAxIDUuMTg1OTkgMjIuOTU2MSA1Ljc0ODA0QzIzLjAwMSA2LjI5ODQyIDIzIDYuOTc2MzEgMjMgNy43OTk4VjE2LjIwMDJDMjMgMTcuMDIzNyAyMy4wMDEgMTcuNzAxNiAyMi45NTYxIDE4LjI1MkMyMi45MTU5IDE4Ljc0MzggMjIuODM1NiAxOS4yMDExIDIyLjY1MDQgMTkuNjMyOEwyMi41NjQ1IDE5LjgxNjRDMjIuMjI4OSAyMC40NzQ5IDIxLjcxODMgMjEuMDI1OSAyMS4wOTE4IDIxLjQxMDJMMjAuODE2NCAyMS41NjQ1QzIwLjMzMTEgMjEuODExNyAxOS44MTQgMjEuOTEwMSAxOS4yNTIgMjEuOTU2MUMxOC43MDE2IDIyLjAwMSAxOC4wMjM3IDIyIDE3LjIwMDIgMjJINi43OTk4MUM1Ljk3NjMyIDIyIDUuMjk4NDMgMjIuMDAxIDQuNzQ4MDUgMjEuOTU2MUM0LjE4NiAyMS45MTAxIDMuNjY4OSAyMS44MTE3IDMuMTgzNiAyMS41NjQ1QzIuNTI1MTMgMjEuMjI4OSAxLjk3NDEzIDIwLjcxODMgMS41ODk4NSAyMC4wOTE4TDEuNDM1NTUgMTkuODE2NEMxLjE4ODI4IDE5LjMzMTEgMS4wODk4OCAxOC44MTQgMS4wNDM5NSAxOC4yNTJDMC45OTg5OCAxNy43MDE2IDEgMTcuMDIzNyAxIDE2LjIwMDJWNy43OTk4QzEgNi45NzYzMSAwLjk5ODk4IDYuMjk4NDIgMS4wNDM5NSA1Ljc0ODA0QzEuMDg5ODggNS4xODU5OSAxLjE4ODI3IDQuNjY4OSAxLjQzNTU1IDQuMTgzNTlDMS44MTkwMiAzLjQzMTA5IDIuNDMxMDkgMi44MTkwMSAzLjE4MzYgMi40MzU1NEMzLjY2ODkgMi4xODgyNyA0LjE4NiAyLjA4OTg3IDQuNzQ4MDUgMi4wNDM5NEM1LjI5ODQzIDEuOTk4OTggNS45NzYzMiAyIDYuNzk5ODEgMkgxNy4yMDAyWk02Ljc5OTgxIDRDNS45NDM0MiA0IDUuMzYxMTcgNC4wMDAzNSA0LjkxMTEzIDQuMDM3MTFDNC40NzI3MiA0LjA3MjkzIDQuMjQ4MiA0LjEzODA4IDQuMDkxOCA0LjIxNzc3QzMuNzE1NTUgNC40MDk1MSAzLjQwOTUxIDQuNzE1NTQgMy4yMTc3OCA1LjA5MTc5QzMuMTM4MDkgNS4yNDgxOSAzLjA3MjkzIDUuNDcyNzIgMy4wMzcxMSA1LjkxMTEzQzMuMDAwMzUgNi4zNjExNyAzIDYuOTQzNDEgMyA3Ljc5OThWMTYuMjAwMkMzIDE3LjA1NjYgMy4wMDAzNSAxNy42Mzg4IDMuMDM3MTEgMTguMDg4OUMzLjA3MjkzIDE4LjUyNzMgMy4xMzgwOSAxOC43NTE4IDMuMjE3NzggMTguOTA4MkwzLjI5NDkyIDE5LjA0NTlDMy40ODcwNyAxOS4zNTkxIDMuNzYyNTcgMTkuNjE0NCA0LjA5MTggMTkuNzgyMkM0LjI0ODIgMTkuODYxOSA0LjQ3MjcyIDE5LjkyNzEgNC45MTExMyAxOS45NjI5QzUuMzYxMTcgMTkuOTk5NiA1Ljk0MzQyIDIwIDYuNzk5ODEgMjBIMTcuMjAwMkMxOC4wNTY2IDIwIDE4LjYzODggMTkuOTk5NiAxOS4wODg5IDE5Ljk2MjlDMTkuNTI3MyAxOS45MjcxIDE5Ljc1MTggMTkuODYxOSAxOS45MDgyIDE5Ljc4MjJMMjAuMDQ1OSAxOS43MDUxQzIwLjM1OTIgMTkuNTEyOSAyMC42MTQ1IDE5LjIzNzQgMjAuNzgyMiAxOC45MDgyTDIwLjgzODkgMTguNzc1NEMyMC44OTI0IDE4LjYyNTggMjAuOTM2IDE4LjQxNzUgMjAuOTYyOSAxOC4wODg5QzIwLjk5OTcgMTcuNjM4OCAyMSAxNy4wNTY2IDIxIDE2LjIwMDJWNy43OTk4QzIxIDYuOTQzNDEgMjAuOTk5NyA2LjM2MTE3IDIwLjk2MjkgNS45MTExM0MyMC45MjcxIDUuNDcyNzIgMjAuODYxOSA1LjI0ODE5IDIwLjc4MjIgNS4wOTE3OUMyMC42MTQ1IDQuNzYyNTYgMjAuMzU5MiA0LjQ4NzA2IDIwLjA0NTkgNC4yOTQ5MkwxOS45MDgyIDQuMjE3NzdDMTkuNzUxOCA0LjEzODA4IDE5LjUyNzMgNC4wNzI5MyAxOS4wODg5IDQuMDM3MTFDMTguNjM4OCA0LjAwMDM1IDE4LjA1NjYgNCAxNy4yMDAyIDRINi43OTk4MVoiIGZpbGw9ImJsYWNrIi8+DQo8L3N2Zz4NCg==",dc="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik01LjI5MzAzIDUuMjkyOTlDNS40ODA1NiA1LjEwNTUyIDUuNzM0ODcgNS4wMDAyIDYuMDAwMDMgNS4wMDAyQzYuMjY1MTkgNS4wMDAyIDYuNTE5NSA1LjEwNTUyIDYuNzA3MDMgNS4yOTI5OUwxMiAxMC41ODZMMTcuMjkzIDUuMjkyOTlDMTcuMzg1MyA1LjE5NzQ4IDE3LjQ5NTYgNS4xMjEzIDE3LjYxNzYgNS4wNjg4OUMxNy43Mzk2IDUuMDE2NDggMTcuODcwOCA0Ljk4ODg5IDE4LjAwMzYgNC45ODc3NEMxOC4xMzY0IDQuOTg2NTkgMTguMjY4MSA1LjAxMTg5IDE4LjM5MSA1LjA2MjE3QzE4LjUxMzkgNS4xMTI0NSAxOC42MjU1IDUuMTg2NyAxOC43MTk0IDUuMjgwNTlDMTguODEzMyA1LjM3NDQ5IDE4Ljg4NzYgNS40ODYxNCAxOC45Mzc5IDUuNjA5MDRDMTguOTg4MSA1LjczMTkzIDE5LjAxMzQgNS44NjM2MSAxOS4wMTIzIDUuOTk2MzlDMTkuMDExMSA2LjEyOTE3IDE4Ljk4MzUgNi4yNjAzOSAxOC45MzExIDYuMzgyMzlDMTguODc4NyA2LjUwNDQgMTguODAyNSA2LjYxNDc0IDE4LjcwNyA2LjcwNjk5TDEzLjQxNCAxMkwxOC43MDcgMTcuMjkzQzE4Ljg4OTIgMTcuNDgxNiAxOC45OSAxNy43MzQyIDE4Ljk4NzcgMTcuOTk2NEMxOC45ODU0IDE4LjI1ODYgMTguODgwMyAxOC41MDk0IDE4LjY5NDggMTguNjk0OEMxOC41MDk0IDE4Ljg4MDIgMTguMjU4NiAxOC45ODU0IDE3Ljk5NjQgMTguOTg3N0MxNy43MzQyIDE4Ljk4OTkgMTcuNDgxNiAxOC44ODkxIDE3LjI5MyAxOC43MDdMMTIgMTMuNDE0TDYuNzA3MDMgMTguNzA3QzYuNTE4NDMgMTguODg5MSA2LjI2NTgzIDE4Ljk4OTkgNi4wMDM2MyAxOC45ODc3QzUuNzQxNDMgMTguOTg1NCA1LjQ5MDYyIDE4Ljg4MDIgNS4zMDUyMSAxOC42OTQ4QzUuMTE5OCAxOC41MDk0IDUuMDE0NjQgMTguMjU4NiA1LjAxMjM2IDE3Ljk5NjRDNS4wMTAwOCAxNy43MzQyIDUuMTEwODcgMTcuNDgxNiA1LjI5MzAzIDE3LjI5M0wxMC41ODYgMTJMNS4yOTMwMyA2LjcwNjk5QzUuMTA1NTYgNi41MTk0NiA1LjAwMDI0IDYuMjY1MTUgNS4wMDAyNCA1Ljk5OTk5QzUuMDAwMjQgNS43MzQ4MyA1LjEwNTU2IDUuNDgwNTIgNS4yOTMwMyA1LjI5Mjk5WiIgZmlsbD0iYmxhY2siLz4NCjwvc3ZnPg0K",Ic=()=>{const{wallpaperId:e,setWallpaperId:t,uploadWallpaper:n,setWallpaper:a}=Es(),{getRecentWallpapers:l,createWallpaperUrl:r,deleteWallpaper:u}=wn(),[d,E]=j.useState([]),[h,S]=j.useState({}),[y,T]=j.useState(!1),N=Kn.useRef(null),k=j.useCallback(async()=>{const o=await l();E(o);const p={};o.forEach(D=>{p[D.id]=r(D.thumbnail||D.data)}),S(p)},[r,l]);j.useEffect(()=>{k()},[k]);const x=()=>{N.current?.click()},b=async o=>{const p=o.target.files?.[0];if(p){T(!0);try{await n(p),await k()}catch(D){console.error("Upload failed:",D)}finally{T(!1),N.current&&(N.current.value="")}}},Q=async o=>{o!==e&&await t(o)},_=async(o,p)=>{o.stopPropagation();try{await u(p),p===e&&a(null),await k()}catch(D){console.error("Delete failed:",D)}};return c.jsxs("div",{className:ie.gridContainer,children:[c.jsxs("div",{className:`${ie.uploadBtn} ${y?ie.uploading:""}`,onClick:x,title:"Upload Wallpaper",children:[c.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:b,style:{display:"none"}}),c.jsx("img",{src:Nc,alt:"Upload",width:24,height:24})]}),d.map(o=>c.jsxs("div",{className:`${ie.thumbnail} ${o.id===e?ie.active:""}`,onClick:()=>Q(o.id),title:new Date(o.createdAt).toLocaleDateString(),children:[h[o.id]&&c.jsx("img",{src:h[o.id],alt:"Wallpaper",className:ie.image}),c.jsx("button",{className:ie.deleteBtn,onClick:p=>_(p,o.id),title:"Delete",children:c.jsx("img",{src:dc,alt:"Delete",width:10,height:10})})]},o.id))]})},hs=67324752,xs=33639248,ms=101010256,jc=(()=>{const e=new Uint32Array(256);for(let t=0;t<256;t++){let n=t;for(let a=0;a<8;a++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n>>>0}return e})(),Tc=e=>{let t=4294967295;for(let n=0;n<e.length;n++)t=jc[(t^e[n])&255]^t>>>8;return(t^4294967295)>>>0},is=new TextEncoder,os=new TextDecoder,pc=e=>{const t=Math.max(e.getFullYear(),1980),n=(e.getHours()&31)<<11|(e.getMinutes()&63)<<5|e.getSeconds()/2&31,a=(t-1980&127)<<9|(e.getMonth()+1&15)<<5|e.getDate()&31;return{time:n,date:a}},C=(e,t,n)=>{e.setUint16(t,n&65535,!0)},G=(e,t,n)=>{e.setUint32(t,n>>>0,!0)},ge=(e,t)=>e.getUint16(t,!0),De=(e,t)=>e.getUint32(t,!0),ks=(e,t)=>{const n=is.encode(e),a=is.encode(t),l=Tc(a),{time:r,date:u}=pc(new Date),d=30+n.length,E=46+n.length,h=22,S=d+a.length+E+h,y=new Uint8Array(S),T=new DataView(y.buffer);let N=0;G(T,N+0,hs),C(T,N+4,20),C(T,N+6,0),C(T,N+8,0),C(T,N+10,r),C(T,N+12,u),G(T,N+14,l),G(T,N+18,a.length),G(T,N+22,a.length),C(T,N+26,n.length),C(T,N+28,0),y.set(n,N+30),N+=d,y.set(a,N),N+=a.length;const k=N;G(T,N+0,xs),C(T,N+4,20),C(T,N+6,20),C(T,N+8,0),C(T,N+10,0),C(T,N+12,r),C(T,N+14,u),G(T,N+16,l),G(T,N+20,a.length),G(T,N+24,a.length),C(T,N+28,n.length),C(T,N+30,0),C(T,N+32,0),C(T,N+34,0),C(T,N+36,0),G(T,N+38,0),G(T,N+42,0),y.set(n,N+46),N+=E;const x=N-k;return G(T,N+0,ms),C(T,N+4,0),C(T,N+6,0),C(T,N+8,1),C(T,N+10,1),G(T,N+12,x),G(T,N+16,k),C(T,N+20,0),new Blob([y],{type:"application/zip"})},Ec=e=>{for(let t=e.length-22;t>=0;t--)if(De(new DataView(e.buffer),t)===ms)return t;return-1},yc=async e=>{const t=await e.arrayBuffer(),n=new Uint8Array(t),a=new DataView(t),l=Ec(n);if(l<0)throw new Error("Invalid ZIP: EOCD not found");const r=De(a,l+16);if(De(a,r)!==xs)throw new Error("Invalid ZIP: central directory header not found");if(ge(a,r+10)!==0)throw new Error("Unsupported ZIP compression method");const d=ge(a,r+28),E=ge(a,r+30),h=ge(a,r+32),S=De(a,r+20),y=De(a,r+42),T=n.slice(r+46,r+46+d),N=os.decode(T);if(r+46+d+E+h>n.length)throw new Error("Invalid ZIP: out-of-range central directory");if(De(a,y)!==hs)throw new Error("Invalid ZIP: local file header not found");const x=ge(a,y+26),b=ge(a,y+28),Q=y+30+x+b,_=Q+S;if(_>n.length)throw new Error("Invalid ZIP: out-of-range file data");const o=n.slice(Q,_),p=os.decode(o);return{fileName:N,content:p}},St="1.0.0",Fe="app_language",Os={space:!0,zenShelf:!0,config:!0},Ac={searchEngineConflictPolicy:"keepLocal"},Sc=e=>({...Ac,...e||{}}),zs=()=>[...m.getManagedStorageKeys(),Fe],rs=async e=>{const t=await e.arrayBuffer(),n=new Uint8Array(t);let a="";const l=32768;for(let r=0;r<n.length;r+=l){const u=n.subarray(r,r+l);a+=String.fromCharCode(...u)}return`data:${e.type||"application/octet-stream"};base64,${btoa(a)}`},ls=e=>{const[t,n]=e.split(",");if(!t||!n)throw new Error("Invalid data url");const l=t.match(/^data:(.*?);base64$/)?.[1]||"application/octet-stream",r=atob(n),u=new Uint8Array(r.length);for(let d=0;d<r.length;d++)u[d]=r.charCodeAt(d);return new Blob([u],{type:l})},K=(e,t)=>{if(!e)return t;try{return JSON.parse(e)}catch{return t}},V=e=>`${e}_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,q=(e,t,n)=>{if(!t.has(e))return t.add(e),e;let a=V(n);for(;t.has(a);)a=V(n);return t.add(a),a},yt=(e,t)=>e.map(n=>{const a=q(n.id||V("dock_item"),t,"dock_item");if(n.type==="folder"){const l=yt(n.items||[],t);return{...n,id:a,items:l}}return{...n,id:a}}),Ie=e=>{const t=new Set,n=a=>{a.forEach(l=>{if(l.type==="folder"){n(l.items||[]);return}l.url&&t.add(l.url)})};return n(e),t},hc=(e,t,n)=>{let a=0;const l=r=>{const u=[];return r.forEach(d=>{if(d.type==="folder"){const h=l(d.items||[]);if(h.length===0)return;const S=q(d.id||V("folder"),n,"folder");u.push({...d,id:S,items:h});return}if(d.url&&t.has(d.url)){a+=1;return}d.url&&t.add(d.url);const E=q(d.id||V("dock_item"),n,"dock_item");u.push({...d,id:E})}),u};return{items:l(e),duplicates:a}},He=e=>({spacesState:K(e[I.SPACES],ys()),stickers:K(e[I.STICKERS],[]),deletedStickers:K(e[I.DELETED_STICKERS],[]),deletedDockItems:K(e[I.DELETED_DOCK_ITEMS],[]),deletedSpaces:K(e[I.DELETED_SPACES],[]),searchEngine:K(e[I.SEARCH_ENGINE],null),searchEngines:K(e[I.SEARCH_ENGINES],null),language:e[Fe]||"en",configRaw:e[I.CONFIG]??null,wallpaperIdRaw:e[I.WALLPAPER_ID]??null,wallpaperRaw:e[I.WALLPAPER]??null,lastWallpaperRaw:e[I.LAST_WALLPAPER]??null}),ws=e=>({...Os,...e}),$=()=>({current:0,incoming:0,add:0,overwrite:0,conflict:0}),xc=[I.SPACES,I.DELETED_DOCK_ITEMS,I.DELETED_SPACES],mc=[I.STICKERS,I.DELETED_STICKERS],kc=[I.SEARCH_ENGINE,I.SEARCH_ENGINES,I.CONFIG,I.WALLPAPER,I.LAST_WALLPAPER,I.WALLPAPER_ID,I.SPACE_RULES,I.SPACE_OVERRIDES,Fe],gt=(e,t,n)=>{n.forEach(a=>{t[a]=e[a]??null})},fs=()=>{const e={};return zs().forEach(t=>{e[t]=localStorage.getItem(t)}),e},Oc=async()=>{const[e,t]=await Promise.all([Ne.getAll(),Ne.getAllStickerAssets()]);return{wallpapers:await Promise.all(e.map(async a=>({id:a.id,createdAt:a.createdAt,data:await rs(a.data),thumbnail:a.thumbnail?await rs(a.thumbnail):void 0}))),stickerAssets:t}},Dt=e=>{zs().forEach(t=>{const n=e[t];if(n==null){localStorage.removeItem(t);return}localStorage.setItem(t,n)})},Nt=async e=>{await Ne.clearWallpapers(),await Ne.clearStickerAssets();const t=e.wallpapers.map(n=>({id:n.id,createdAt:n.createdAt,data:ls(n.data),thumbnail:n.thumbnail?ls(n.thumbnail):void 0}));await Promise.all([Ne.saveMultiple(t),Ne.saveStickerAssets(e.stickerAssets)])},fe=async(e,t)=>({type:e,exportVersion:St,createdAt:Date.now(),localStorageEntries:t||fs(),assets:await Oc()}),Ls=(e,t)=>{const n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)},Cs=e=>JSON.stringify(e),zc=e=>JSON.parse(e),bs=()=>new Date().toISOString().slice(0,10).replace(/-/g,""),wc=(e,t)=>{const n=[...e.spaces],a=new Set(e.spaces.map(E=>E.id)),l=new Set;e.spaces.forEach(E=>{yt(E.apps,l)});const r=new Map;n.forEach(E=>{r.set(E.name.trim().toLowerCase(),E)});let u=0,d=0;return t.spaces.forEach(E=>{const h=E.name.trim().toLowerCase(),S=r.get(h);if(!S){const N=q(E.id||V("space"),a,"space"),k=yt(E.apps||[],l),x={...E,id:N,apps:k};n.push(x),r.set(h,x);return}u+=1;const y=Ie(S.apps||[]),T=hc(E.apps||[],y,l);d+=T.duplicates,S.apps=[...S.apps||[],...T.items]}),{merged:{spaces:n,activeSpaceId:e.activeSpaceId,version:Math.max(e.version||1,t.version||1)},nameConflicts:u,dockUrlConflicts:d}},Ms=(e,t,n)=>{let a=0;return{stickers:e.map(r=>{const u=q(r.id||V("sticker"),t,"sticker");u!==r.id&&(a+=1);const d=r.assetId?n.get(r.assetId)||r.assetId:void 0;return{...r,id:u,assetId:d}}),conflicts:a}},fc=(e,t,n)=>{const a=[...e.wallpapers],l=[...e.stickerAssets],r=new Set(a.map(S=>S.id)),u=new Set(l.map(S=>S.id)),d=new Map;let E=0;n.config&&t.wallpapers.forEach(S=>{let y=S.id;r.has(y)?(E+=1,y=q(V("wallpaper"),r,"wallpaper")):r.add(y),a.push({...S,id:y})});let h=0;return n.zenShelf&&t.stickerAssets.forEach(S=>{let y=S.id;u.has(y)?(h+=1,y=q(V("sticker_asset"),u,"sticker_asset")):u.add(y),d.set(S.id,y),l.push({...S,id:y})}),{assets:{wallpapers:a,stickerAssets:l},wallpaperConflicts:E,stickerAssetConflicts:h,stickerAssetIdRemap:d}},Lc=(e,t,n,a,l)=>{const r=He(e),u=He(t),{merged:d,nameConflicts:E,dockUrlConflicts:h}=a.space?wc(r.spacesState,u.spacesState):{merged:r.spacesState,nameConflicts:0,dockUrlConflicts:0},S=new Set(r.stickers.map(z=>z.id)),y=a.zenShelf?Ms(u.stickers,S,n):{stickers:[],conflicts:0},T=new Set(r.deletedStickers.map(z=>z.id)),N=a.zenShelf?Ms(u.deletedStickers,T,n):{stickers:[],conflicts:0},k=r.searchEngines||[],x=u.searchEngines||[],Q=(()=>{if(!a.config)return{engines:k,conflicts:0};const z=[],Y=new Map,ne=new Map;k.forEach(w=>{z.push(w.id),Y.set(w.id,w),ne.set(w.url,w.id)});let Le=0;return x.forEach(w=>{const oe=Y.has(w.id),ee=ne.get(w.url),te=oe||!!ee;if(te&&(Le+=1),te&&l.searchEngineConflictPolicy==="keepLocal")return;if(te&&l.searchEngineConflictPolicy==="keepRemote"){if(oe){const F=Y.get(w.id);F&&ne.delete(F.url)}if(ee&&ee!==w.id){const F=Y.get(ee);F&&(Y.delete(ee),ne.delete(F.url))}}const je=Y.has(w.id);Y.set(w.id,w),ne.set(w.url,w.id),je||z.push(w.id)}),{engines:z.filter((w,oe)=>z.indexOf(w)===oe).filter(w=>Y.has(w)).map(w=>Y.get(w)),conflicts:Le}})(),_=Q.engines,o=Q.conflicts,p=[...r.deletedDockItems],D=new Set(p.map(z=>z.id));a.space&&u.deletedDockItems.forEach(z=>{const Y=q(z.id||V("deleted_dock"),D,"deleted_dock");p.push({...z,id:Y})});const v=[...r.deletedSpaces],Je=new Set(v.map(z=>z.id));return a.space&&u.deletedSpaces.forEach(z=>{const Y=q(z.id||V("deleted_space"),Je,"deleted_space");v.push({...z,id:Y})}),{entries:{...e,[I.SPACES]:JSON.stringify(d),[I.STICKERS]:JSON.stringify([...r.stickers,...y.stickers]),[I.DELETED_STICKERS]:JSON.stringify([...r.deletedStickers,...N.stickers]),[I.DELETED_DOCK_ITEMS]:JSON.stringify(p),[I.DELETED_SPACES]:JSON.stringify(v),[I.SEARCH_ENGINES]:JSON.stringify(_),[I.SEARCH_ENGINE]:a.config?u.searchEngine&&_.some(z=>z.id===u.searchEngine?.id)?JSON.stringify(u.searchEngine):_[0]?JSON.stringify(_[0]):null:e[I.SEARCH_ENGINE]??null,[I.CONFIG]:a.config?u.configRaw:r.configRaw,[Fe]:a.config?u.language:r.language,[I.WALLPAPER]:a.config?u.wallpaperRaw:r.wallpaperRaw,[I.LAST_WALLPAPER]:a.config?u.lastWallpaperRaw:r.lastWallpaperRaw,[I.WALLPAPER_ID]:a.config?u.wallpaperIdRaw:r.wallpaperIdRaw,[I.SPACE_RULES]:a.config?t[I.SPACE_RULES]??null:e[I.SPACE_RULES]??null,[I.SPACE_OVERRIDES]:a.config?t[I.SPACE_OVERRIDES]??null:e[I.SPACE_OVERRIDES]??null},preview:{spaces:a.space?{current:r.spacesState.spaces.length,incoming:u.spacesState.spaces.length,add:u.spacesState.spaces.length-E,overwrite:E,conflict:E}:$(),dockUrls:a.space?{current:Ie(r.spacesState.spaces.flatMap(z=>z.apps||[])).size,incoming:Ie(u.spacesState.spaces.flatMap(z=>z.apps||[])).size,add:Math.max(0,Ie(u.spacesState.spaces.flatMap(z=>z.apps||[])).size-h),overwrite:h,conflict:h}:$(),stickers:a.zenShelf?{current:r.stickers.length,incoming:u.stickers.length,add:u.stickers.length-y.conflicts,overwrite:y.conflicts,conflict:y.conflicts}:$(),deletedStickers:a.zenShelf?{current:r.deletedStickers.length,incoming:u.deletedStickers.length,add:u.deletedStickers.length-N.conflicts,overwrite:N.conflicts,conflict:N.conflicts}:$(),searchEngines:a.config?{current:k.length,incoming:x.length,add:x.length-o,overwrite:o,conflict:o}:$(),wallpapers:$(),stickerAssets:$()}}},ht=(e,t,n,a)=>{const l=He(e.localStorageEntries),r=He(t.localStorageEntries),u=new Set(l.spacesState.spaces.map(p=>p.name.trim().toLowerCase())),d=r.spacesState.spaces.filter(p=>u.has(p.name.trim().toLowerCase())).length,E=new Set(l.stickers.map(p=>p.id)),h=r.stickers.filter(p=>E.has(p.id)).length,S=new Set(l.deletedStickers.map(p=>p.id)),y=r.deletedStickers.filter(p=>S.has(p.id)).length,T=new Set((l.searchEngines||[]).map(p=>p.id)),N=new Set((l.searchEngines||[]).map(p=>p.url)),k=(r.searchEngines||[]).filter(p=>T.has(p.id)||N.has(p.url)).length,x=new Set(e.assets.wallpapers.map(p=>p.id)),b=t.assets.wallpapers.filter(p=>x.has(p.id)).length,Q=new Set(e.assets.stickerAssets.map(p=>p.id)),_=t.assets.stickerAssets.filter(p=>Q.has(p.id)).length,o=(p,D,v)=>({current:p,incoming:D,add:n==="overwrite"?D:D-v,overwrite:n==="overwrite"?p:v,conflict:v});return{spaces:a.space?o(l.spacesState.spaces.length,r.spacesState.spaces.length,d):$(),dockUrls:a.space?o(Ie(l.spacesState.spaces.flatMap(p=>p.apps||[])).size,Ie(r.spacesState.spaces.flatMap(p=>p.apps||[])).size,0):$(),stickers:a.zenShelf?o(l.stickers.length,r.stickers.length,h):$(),deletedStickers:a.zenShelf?o(l.deletedStickers.length,r.deletedStickers.length,y):$(),searchEngines:a.config?o((l.searchEngines||[]).length,(r.searchEngines||[]).length,k):$(),wallpapers:a.config?o(e.assets.wallpapers.length,t.assets.wallpapers.length,b):$(),stickerAssets:a.zenShelf?o(e.assets.stickerAssets.length,t.assets.stickerAssets.length,_):$()}},Cc=(e,t,n,a)=>{const l=fc(e.assets,t.assets,n),r=Lc(e.localStorageEntries,t.localStorageEntries,l.stickerAssetIdRemap,n,a),u=ht(e,t,"merge",n);return n.config&&(u.wallpapers.conflict=l.wallpaperConflicts,u.wallpapers.overwrite=l.wallpaperConflicts,u.wallpapers.add=t.assets.wallpapers.length-l.wallpaperConflicts),n.zenShelf&&(u.stickerAssets.conflict=l.stickerAssetConflicts,u.stickerAssets.overwrite=l.stickerAssetConflicts,u.stickerAssets.add=t.assets.stickerAssets.length-l.stickerAssetConflicts),{merged:{type:"eclipse-full-backup",exportVersion:St,createdAt:Date.now(),localStorageEntries:r.entries,assets:l.assets},preview:u}},bc=e=>{if(!e||typeof e!="object")throw new Error("Invalid backup package");const t=e;if(t.type!=="eclipse-full-backup"&&t.type!=="eclipse-space-snapshot"||typeof t.exportVersion!="string"||!t.localStorageEntries||!t.assets)throw new Error("Invalid backup package structure");if(t.exportVersion!==St)throw new Error(`Unsupported backup version: ${t.exportVersion}`);return t},Uc=(e,t,n)=>{const a={...e.localStorageEntries};return n.space&&gt(t.localStorageEntries,a,xc),n.zenShelf&&gt(t.localStorageEntries,a,mc),n.config&&gt(t.localStorageEntries,a,kc),{type:e.type,exportVersion:e.exportVersion,createdAt:Date.now(),localStorageEntries:a,assets:{wallpapers:n.config?t.assets.wallpapers:e.assets.wallpapers,stickerAssets:n.zenShelf?t.assets.stickerAssets:e.assets.stickerAssets}}},Qc=e=>{const t=fs(),n=K(t[I.SPACES],ys()),a={spaces:[{...e}],activeSpaceId:e.id,version:n.version||1};t[I.SPACES]=JSON.stringify(a);const l=K(t[I.DELETED_DOCK_ITEMS],[]);t[I.DELETED_DOCK_ITEMS]=JSON.stringify(l.filter(u=>u.spaceId===e.id));const r=K(t[I.DELETED_SPACES],[]);return t[I.DELETED_SPACES]=JSON.stringify(r.filter(u=>u.space.id===e.id)),t},vc=async()=>{const e=await fe("eclipse-full-backup"),t=ks("backup.json",Cs(e));Ls(t,`eclipse-full-backup-${bs()}.zip`)},dt=async()=>fe("eclipse-full-backup"),Oe=e=>bc(zc(e)),_c=async e=>{const t=Qc(e),n=await fe("eclipse-space-snapshot",t),a=ks("snapshot.json",Cs(n));Ls(a,`eclipse-space-snapshot-${e.name.toLowerCase()}-${bs()}.zip`)},Yc=async e=>{const t=async()=>{const n=await e.text();return Oe(n)};try{if(e.name.toLowerCase().endsWith(".zip")){const{content:n}=await yc(e);return Oe(n)}return await t()}catch(n){return Ge.warn("Failed to parse as zip, fallback to JSON parsing",n),t()}},Be=async(e,t,n,a)=>{const l=await fe("eclipse-full-backup");return ht(l,e,t,ws(n))},us=async(e,t,n,a)=>{const l=await fe("eclipse-full-backup"),r=ws(n),u=Sc(a);let d=!1;try{if(t==="overwrite"){const h=ht(l,e,t,r),S=Uc(l,e,r);return Dt(S.localStorageEntries),await Nt(S.assets),m.resetMemoryCache(),{strategy:t,preview:h,restoredFromRollback:d}}const E=Cc(l,e,r,u);return Dt(E.merged.localStorageEntries),await Nt(E.merged.assets),m.resetMemoryCache(),{strategy:t,preview:E.preview,restoredFromRollback:d}}catch(E){throw Ge.error("[Backup] Import failed, rolling back snapshot",E),d=!0,Dt(l.localStorageEntries),await Nt(l.assets),m.resetMemoryCache(),E}},Us=1,xt=12e4,Rc="SHA-256",mt="AES-GCM",Pc=256,Bc=16,$c=12,Wc=e=>{let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return typeof btoa=="function"?btoa(t):Buffer.from(t,"binary").toString("base64")},Gc=e=>{const t=typeof atob=="function"?atob(e):Buffer.from(e,"base64").toString("binary"),n=new Uint8Array(t.length);for(let a=0;a<t.length;a+=1)n[a]=t.charCodeAt(a);return n},It=e=>Wc(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,""),jt=e=>{const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Gc(n)},gs=e=>{const t=new Uint8Array(e);return crypto.getRandomValues(t),t},we=e=>e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength),Qs=async(e,t)=>{if(!e.trim())throw new Error("Password is required");if(!crypto?.subtle)throw new Error("Web Crypto API is unavailable");const n=new TextEncoder,a=await crypto.subtle.importKey("raw",n.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:we(t),iterations:xt,hash:Rc},a,{name:mt,length:Pc},!1,["encrypt","decrypt"])},Hc=async(e,t)=>{const n=new TextEncoder,a=gs(Bc),l=gs($c),r=await Qs(t,a),u=n.encode(e),d=await crypto.subtle.encrypt({name:mt,iv:we(l)},r,we(u)),E={version:Us,algorithm:"AES-GCM",kdf:"PBKDF2-SHA256",iterations:xt,salt:It(a),iv:It(l),cipherText:It(new Uint8Array(d)),createdAt:Date.now()};return JSON.stringify(E)},Zc=e=>{let t;try{t=JSON.parse(e)}catch{throw new Error("Encrypted backup payload is not valid JSON")}if(!t||typeof t!="object")throw new Error("Encrypted backup payload is invalid");const n=t;if(n.version!==Us||n.algorithm!=="AES-GCM"||n.kdf!=="PBKDF2-SHA256"||typeof n.iterations!="number"||typeof n.salt!="string"||typeof n.iv!="string"||typeof n.cipherText!="string")throw new Error("Encrypted backup payload structure is invalid");return n},Vc=async(e,t)=>{const n=Zc(e);if(n.iterations!==xt)throw new Error(`Unsupported encryption iterations: ${n.iterations}`);const a=jt(n.salt),l=jt(n.iv),r=jt(n.cipherText),u=await Qs(t,a);try{const d=await crypto.subtle.decrypt({name:mt,iv:we(l)},u,we(r));return new TextDecoder().decode(d)}catch{throw new Error("Failed to decrypt backup payload")}},Fc=e=>e.trim(),Jc=e=>{const t=new TextEncoder().encode(e);let n="";for(let a=0;a<t.length;a+=1)n+=String.fromCharCode(t[a]);return typeof btoa=="function"?btoa(n):Buffer.from(n,"binary").toString("base64")},vs=(e,t)=>`Basic ${Jc(`${e}:${t}`)}`,Ze=e=>{const t=e.trim();if(!t)throw new Error("WebDAV endpoint is required");let n;try{n=new URL(t)}catch{throw new Error("WebDAV endpoint URL is invalid")}if(n.protocol!=="https:"&&n.protocol!=="http:")throw new Error("WebDAV endpoint must use http or https");return n.toString()},Kc=e=>{const t=Ze(e);return`${new URL(t).origin}/*`},Xc=async e=>{if(typeof chrome>"u"||!chrome.permissions?.contains||!chrome.permissions?.request)return!0;const t=Kc(e);return await new Promise(a=>{chrome.permissions.contains({origins:[t]},l=>{if(chrome.runtime?.lastError){Ge.warn("[WebDAV] permissions.contains failed",chrome.runtime.lastError),a(!1);return}a(!!l)})})?!0:new Promise(a=>{chrome.permissions.request({origins:[t]},l=>{if(chrome.runtime?.lastError){Ge.warn("[WebDAV] permissions.request failed",chrome.runtime.lastError),a(!1);return}a(!!l)})})},_s=e=>{const t=Ze(e.endpoint),n=Fc(e.username),a=e.password;if(!n)throw new Error("WebDAV username is required");if(!a)throw new Error("WebDAV password is required");return{endpoint:t,username:n,password:a}},qc=async(e,t)=>{const{endpoint:n,username:a,password:l}=_s(e),r=await fetch(n,{method:"PUT",headers:{Authorization:vs(a,l),"Content-Type":"application/json; charset=utf-8","Cache-Control":"no-store"},body:t});if(!r.ok)throw new Error(`WebDAV upload failed (${r.status})`)},ei=async e=>{const{endpoint:t,username:n,password:a}=_s(e),l=await fetch(t,{method:"GET",headers:{Authorization:vs(n,a),"Cache-Control":"no-store"}});if(l.status===404)throw new Error("Remote backup does not exist");if(!l.ok)throw new Error(`WebDAV download failed (${l.status})`);return l.text()},At=1,ti="app_language",si=[I.SPACES,I.DELETED_DOCK_ITEMS,I.DELETED_SPACES],ni=[I.STICKERS,I.DELETED_STICKERS],ai=[I.SEARCH_ENGINE,I.SEARCH_ENGINES,I.CONFIG,I.WALLPAPER,I.LAST_WALLPAPER,I.WALLPAPER_ID,I.SPACE_RULES,I.SPACE_OVERRIDES,ti],kt={spaceName:"keepBoth",searchEngine:"keepLocal"},Tt=(e,t)=>{const n={};return t.forEach(a=>{n[a]=e[a]??null}),n},Ys=(e,t)=>{if(!e)return t;try{return JSON.parse(e)}catch{return t}},de=e=>e.trim().toLowerCase(),Ve=e=>{const t=Ys(e[I.SPACES],{spaces:[],activeSpaceId:"",version:1});return{spaces:Array.isArray(t.spaces)?t.spaces:[],activeSpaceId:typeof t.activeSpaceId=="string"?t.activeSpaceId:"",version:typeof t.version=="number"?t.version:1}},Ds=e=>Ys(e[I.SEARCH_ENGINES],[]).filter(t=>!!t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.url=="string").map(t=>({id:t.id.trim(),name:typeof t.name=="string"?t.name:"",url:t.url.trim()})).filter(t=>t.id.length>0&&t.url.length>0),ci=e=>{const t=new Date(e),n=t.getFullYear().toString(),a=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0"),r=t.getHours().toString().padStart(2,"0"),u=t.getMinutes().toString().padStart(2,"0"),d=t.getSeconds().toString().padStart(2,"0");return`${n}${a}${l}-${r}${u}${d}`},Ns=(e,t,n)=>n<=1?`${e} (conflict-${t})`:`${e} (conflict-${t}-${n})`,ii=e=>e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength),oi=e=>{let t="";for(let a=0;a<e.length;a+=1)t+=String.fromCharCode(e[a]);return(typeof btoa=="function"?btoa(t):Buffer.from(t,"binary").toString("base64")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")},pt=async e=>{if(!crypto?.subtle)throw new Error("Web Crypto API is unavailable");const t=JSON.stringify(e),n=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",ii(n));return oi(new Uint8Array(a))},ri=async e=>{const t={entries:Tt(e.localStorageEntries,si)},n={entries:Tt(e.localStorageEntries,ni),stickerAssets:e.assets.stickerAssets},a={entries:Tt(e.localStorageEntries,ai),wallpapers:e.assets.wallpapers},[l,r,u]=await Promise.all([pt(t),pt(n),pt(a)]);return{space:l,zenShelf:r,config:u}},ze=async e=>({schemaVersion:At,generatedAt:Date.now(),backup:e,sectionHashes:await ri(e)}),li=async e=>{let t;try{t=JSON.parse(e)}catch{const a=Oe(e);return ze(a)}if(t&&typeof t=="object"){const a=t;if(a.schemaVersion===At&&typeof a.generatedAt=="number"&&typeof a.sectionHashes?.space=="string"&&typeof a.sectionHashes?.zenShelf=="string"&&typeof a.sectionHashes?.config=="string"&&a.backup!==void 0){const r=Oe(JSON.stringify(a.backup));return{schemaVersion:At,generatedAt:Number(a.generatedAt),sectionHashes:a.sectionHashes,backup:r}}}const n=Oe(e);return ze(n)},Et=(e,t)=>{const n=[];return e.sectionHashes.space!==t.sectionHashes.space&&n.push("space"),e.sectionHashes.zenShelf!==t.sectionHashes.zenShelf&&n.push("zenShelf"),e.sectionHashes.config!==t.sectionHashes.config&&n.push("config"),{changedSections:n,localHashes:e.sectionHashes,remoteHashes:t.sectionHashes}},Mi=(e,t)=>{const n=new Set(t);return{space:e.space&&n.has("space"),zenShelf:e.zenShelf&&n.has("zenShelf"),config:e.config&&n.has("config")}},ui=e=>e.space||e.zenShelf||e.config,ds=(e,t)=>{const n=Ve(e.localStorageEntries).spaces,a=Ve(t.localStorageEntries).spaces,l=new Set;n.forEach(x=>{const b=de(x?.name||"");b&&l.add(b)});const r=[],u=new Set;a.forEach(x=>{const b=typeof x?.name=="string"?x.name.trim():"",Q=de(b);!Q||!l.has(Q)||u.has(Q)||(u.add(Q),r.push(b))});const d=Ds(e.localStorageEntries),E=Ds(t.localStorageEntries),h=new Set(d.map(x=>x.id)),S=new Set(d.map(x=>x.url)),y=[],T=[],N=new Set,k=new Set;return E.forEach(x=>{if(h.has(x.id)){N.has(x.id)||(N.add(x.id),y.push(x.id));return}S.has(x.url)&&!k.has(x.url)&&(k.add(x.url),T.push(x.url))}),{spaceNameConflicts:r,searchEngineIdConflicts:y,searchEngineUrlConflicts:T}},Is=e=>e.spaceNameConflicts.length>0||e.searchEngineIdConflicts.length>0||e.searchEngineUrlConflicts.length>0,gi=(e,t,n=kt,a=Date.now())=>{const l=Ve(e.localStorageEntries).spaces,r=Ve(t.localStorageEntries),u=new Set,d=new Set;l.forEach(k=>{const x=de(k?.name||"");u.add(x),d.add(x)});const E=ci(a),h=[],S=[],y=[];if(r.spaces.forEach(k=>{const x=typeof k?.name=="string"?k.name:"",b=de(x),Q=!!b&&u.has(b);if(!(!!b&&d.has(b))){d.add(b),y.push(k);return}if(Q&&n.spaceName==="keepLocal"){S.push(x);return}const o=x.trim()||"Space";let p=1,D=Ns(o,E,p),v=de(D);for(;d.has(v);)p+=1,D=Ns(o,E,p),v=de(D);d.add(v),h.push({from:x,to:D}),y.push({...k,name:D})}),h.length===0&&S.length===0)return{package:t,renamedSpaces:[],skippedSpaceConflicts:[]};const T={...r,spaces:y,activeSpaceId:y.some(k=>k.id===r.activeSpaceId)?r.activeSpaceId:y[0]?.id||""};return{package:{...t,localStorageEntries:{...t.localStorageEntries,[I.SPACES]:JSON.stringify(T)}},renamedSpaces:h,skippedSpaceConflicts:S}},Rs=(e,t)=>{e.forEach(n=>{n.url&&t.push(n),n.children?.length&&Rs(n.children,t)})},Di=e=>{const t=[];return Rs(e,t),t},Ni=e=>{const t=new Set,n=a=>{a.forEach(l=>{if(l.type==="folder"&&l.items){n(l.items);return}if(l.url)try{t.add(As(l.url))}catch{}})};return n(e),t},di=(e,t,n)=>{const a=Math.max(1,n.limit),l=Ni(t),r=new Set,u=new Set;let d=0,E=0,h=0;const S=[],y=Di(e);for(const T of y){if(S.length>=a)break;if(!T.url){h+=1;continue}let N="";try{N=As(T.url)}catch{h+=1;continue}if(l.has(N)||r.has(N)){d+=1;continue}const k=fn(N);if(n.mergeByDomain&&u.has(k)){E+=1;continue}r.add(N),n.mergeByDomain&&u.add(k),S.push({title:(T.title||k||"Bookmark").trim()||k||"Bookmark",url:N,domain:k})}return{total:y.length,selected:S,skippedExistingUrl:d,skippedDomainMerged:E,skippedInvalid:h}},Ii=e=>e.map((t,n)=>({id:`bookmark_${Date.now()}_${n}_${Math.random().toString(36).slice(2,7)}`,name:t.title,url:t.url,type:"app"})),js="merge",Ps=e=>typeof window>"u"||typeof window.confirm!="function"?!1:window.confirm(e),Ts=(e,t=Ps)=>t(e==="zh"?" =  = ":"Import strategy: OK = merge import; Cancel = continue to overwrite option.")?"merge":t(e==="zh"?"":"Use overwrite import? (Cancel to abort this import)")?"overwrite":null,ps=(e,t=3)=>e.length<=t?e.join(", "):`${e.slice(0,t).join(", ")}, ...`,ji=(e,t,n=Ps)=>{let a={...kt};if(t.spaceNameConflicts.length!==0){const r=ps(t.spaceNameConflicts),u=n(e==="zh"?` Space ${r}
 = 
 =  Space`:`Space name conflicts found: ${r}
OK = keep both (rename remote copy, recommended)
Cancel = keep local (skip conflicting remote spaces)`);a={...a,spaceName:u?"keepBoth":"keepLocal"}}if(t.searchEngineIdConflicts.length>0||t.searchEngineUrlConflicts.length>0){const r=[...t.searchEngineIdConflicts.map(E=>`id:${E}`),...t.searchEngineUrlConflicts.map(E=>`url:${E}`)],u=ps(r),d=n(e==="zh"?`${u}
 = 
 = `:`Search engine conflicts found: ${u}
OK = keep local (skip conflicting remote items, recommended)
Cancel = keep remote (override local conflicting items)`);a={...a,searchEngine:d?"keepLocal":"keepRemote"}}return a},$e=e=>{const t=Math.max(0,Math.min(1439,Math.floor(e))),n=Math.floor(t/60).toString().padStart(2,"0"),a=(t%60).toString().padStart(2,"0");return`${n}:${a}`},We=(e,t)=>{const n=e.match(/^(\d{1,2}):(\d{2})$/);if(!n)return t;const a=Number(n[1]),l=Number(n[2]);return!Number.isFinite(a)||!Number.isFinite(l)||a<0||a>23||l<0||l>59?t:a*60+l},Ti=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],pi=["","","","","","",""],Ei=()=>{const[e,t]=j.useState(null),[n,a]=j.useState(!1),[l,r]=j.useState(!0),{t:u}=Ss(),d=j.useCallback(async()=>{if(typeof chrome>"u"||!chrome.permissions?.contains){r(!1),t(!1);return}r(!0);const[h,S]=await Promise.all($n.map(y=>Wn(y)));t(h||S)},[]);j.useEffect(()=>{d()},[d]);const E=()=>{if(!(n||e===null||!l)){if(a(!0),typeof chrome>"u"||!chrome.permissions){a(!1);return}e?chrome.permissions.remove({origins:[...cs]},h=>{h&&d(),a(!1)}):chrome.permissions.request({origins:[...cs]},h=>{h&&d(),a(!1)})}};return c.jsxs("div",{className:i.layoutToggleGroup,children:[e!==null&&c.jsx("div",{className:i.layoutHighlight,style:{transform:`translateX(${e?0:100}%)`}}),c.jsx("button",{className:i.layoutToggleOption,onClick:e===!0||!l?void 0:E,title:u.settings.on,disabled:!l||n,children:u.settings.on}),c.jsx("button",{className:i.layoutToggleOption,onClick:e===!1||!l?void 0:E,title:u.settings.off,disabled:!l||n,children:u.settings.off})]})},xi=({isOpen:e,onClose:t,anchorPosition:n})=>{const{theme:a,setTheme:l,followSystem:r,setFollowSystem:u,wallpaper:d,setWallpaper:E,gradientId:h,setGradientId:S,texture:y,setTexture:T,dockPosition:N,setDockPosition:k,iconSize:x,setIconSize:b,openInNewTab:Q,setOpenInNewTab:_}=Es(),{language:o,setLanguage:p,t:D}=Ss(),{currentSpace:v,spaces:Je}=Ln(),{dockItems:Ot,setDockItems:z,appendDockItems:Y}=Cn(),{showUndo:ne}=bn(),[Le,w]=j.useState(()=>m.getAllowThirdPartyIconService()),[oe,ee]=j.useState(()=>m.getSearchStickerContent()),[te,je]=j.useState(()=>m.getWebDavEndpoint()),[F,Ke]=j.useState(()=>m.getWebDavUsername()),[Ce,Bs]=j.useState(""),[X,re]=j.useState(null),[be,Z]=j.useState(""),[zt,Te]=j.useState(""),[wt,ft]=j.useState(()=>m.getCloudSyncLastBackupAt()),[Lt,Ct]=j.useState(()=>m.getCloudSyncLastRestoreAt()),[W,$s]=j.useState(null),[Ws,bt]=j.useState(!1),[ae,Xe]=j.useState(null),[R,Gs]=j.useState(Os),[Ut,le]=j.useState(""),[qe,Qt]=j.useState(!1),Ue=j.useRef(null),[Qe,Hs]=j.useState(20),[vt,_t]=j.useState(!0),[P,Zs]=j.useState(null),[Yt,Rt]=j.useState(!1),[se,Pt]=j.useState(()=>m.getSpaceRules()),[et,tt]=j.useState(""),[st,ve]=j.useState(!1),[Vs,Bt]=j.useState(()=>m.getSpaceSuggestionCooldownMinutes()),[nt,$t]=j.useState(()=>m.getSpaceSuggestionQuietHoursEnabled()),[Wt,Gt]=j.useState(()=>m.getSpaceSuggestionQuietStartMinute()),[Ht,Zt]=j.useState(()=>m.getSpaceSuggestionQuietEndMinute()),Vt=Un(),[pe,Ee]=j.useState(e),ce=j.useRef(null),ye=j.useRef(!1),at=a==="default"&&!r;j.useEffect(()=>{e&&(ye.current=!1,Ee(!0))},[e]),j.useEffect(()=>{e&&pe&&ce.current&&Qn(ce.current)},[e,pe]);const Ae=j.useCallback(async()=>{bt(!0);try{const s=await vn();$s(s)}finally{bt(!1)}},[]);j.useEffect(()=>{e&&Ae()},[e,Ae]);const Se=j.useCallback(s=>{Pt(s),m.saveSpaceRules(s)},[]),Ft=j.useCallback(async()=>{if(typeof chrome>"u"||!chrome.permissions?.contains){ve(!1);return}const s=await new Promise(M=>{chrome.permissions.contains({permissions:["tabs"]},g=>{if(chrome.runtime?.lastError){M(!1);return}M(!!g)})});ve(s)},[]),Fs=j.useCallback(async()=>{if(typeof chrome>"u"||!chrome.permissions?.request){ve(!1);return}const s=await new Promise(M=>{chrome.permissions.request({permissions:["tabs"]},g=>{if(chrome.runtime?.lastError){M(!1);return}M(!!g)})});ve(s)},[]);j.useEffect(()=>{const s=()=>{Pt(m.getSpaceRules())};return window.addEventListener("eclipse-space-rules-changed",s),()=>{window.removeEventListener("eclipse-space-rules-changed",s)}},[]),j.useEffect(()=>{e&&Ft()},[e,Ft]),j.useEffect(()=>{const s=()=>{Bt(m.getSpaceSuggestionCooldownMinutes()),$t(m.getSpaceSuggestionQuietHoursEnabled()),Gt(m.getSpaceSuggestionQuietStartMinute()),Zt(m.getSpaceSuggestionQuietEndMinute()),ee(m.getSearchStickerContent()),je(m.getWebDavEndpoint()),Ke(m.getWebDavUsername()),ft(m.getCloudSyncLastBackupAt()),Ct(m.getCloudSyncLastRestoreAt())};return window.addEventListener("eclipse-config-changed",s),()=>{window.removeEventListener("eclipse-config-changed",s)}},[]),j.useEffect(()=>{!e&&pe&&!ye.current&&(ye.current=!0,ce.current?ns(ce.current,300,()=>Ee(!1)):Ee(!1))},[e,pe]);const ct=s=>{l(s),s==="default"&&S("theme-default"),r&&u(!1)},Js=()=>{u(!r)},Ks=s=>{if(d){E(null),S(s);return}h===s?(S(s==="theme-default"?"gradient-1":"theme-default"),requestAnimationFrame(()=>{S(s)})):S(s)},Jt=s=>{T(s)},Kt=s=>{s&&!m.getThirdPartyIconServicePrompted()&&(m.saveThirdPartyIconServicePrompted(!0),!window.confirm(D.settings.thirdPartyIconServiceHint))||(w(s),m.saveAllowThirdPartyIconService(s))},Xt=s=>{ee(s),m.saveSearchStickerContent(s)},_e=j.useCallback(s=>{if(!s)return o==="zh"?"":"Not yet";try{return new Date(s).toLocaleString()}catch{return String(s)}},[o]),Me=j.useCallback(s=>s.map(g=>g==="space"?"Space":g==="zenShelf"?"ZenShelf":o==="zh"?"":"Config").join(", "),[o]),qt=j.useCallback((s,M)=>{const g=M?.renamedSpaces||[],A=M?.skippedSpaceConflicts||[],O=M?.policy,f=[],L=(U,H=4)=>{if(U.length<=H)return U.join(", ");const xe=U.length-H,me=o==="zh"?` ${U.length} `:`${xe} more`;return`${U.slice(0,H).join(", ")}, ${me}`};if(s.spaceNameConflicts.length>0&&(f.push(o==="zh"?`Space ${L(s.spaceNameConflicts)}`:`Space name conflicts: ${L(s.spaceNameConflicts)}`),O?.spaceName==="keepBoth"?f.push(o==="zh"?"Space ":"Space conflict policy: keep both (rename remote copy)"):O?.spaceName==="keepLocal"&&f.push(o==="zh"?"Space  Space":"Space conflict policy: keep local (skip conflicting remote spaces)")),s.searchEngineIdConflicts.length>0&&f.push(o==="zh"?` ID ${L(s.searchEngineIdConflicts)}`:`Search engine ID conflicts: ${L(s.searchEngineIdConflicts)}`),s.searchEngineUrlConflicts.length>0&&f.push(o==="zh"?` URL ${L(s.searchEngineUrlConflicts)}`:`Search engine URL conflicts: ${L(s.searchEngineUrlConflicts)}`),(s.searchEngineIdConflicts.length>0||s.searchEngineUrlConflicts.length>0)&&O?.searchEngine==="keepLocal"?f.push(o==="zh"?"":"Search engine conflict policy: keep local (skip conflicting remote items)"):(s.searchEngineIdConflicts.length>0||s.searchEngineUrlConflicts.length>0)&&O?.searchEngine==="keepRemote"&&f.push(o==="zh"?"":"Search engine conflict policy: keep remote (override local conflicting items)"),g.length>0){const U=g.map(H=>`${H.from} -> ${H.to}`);f.push(o==="zh"?`${L(U)}`:`Conflict copies prepared: ${L(U)}`)}return A.length>0&&f.push(o==="zh"?` Space${L(A)}`:`Skipped conflicting remote spaces: ${L(A)}`),f.join(`
`)},[o]),it=j.useCallback(()=>{const s=Ze(te),M=F.trim();if(!M)throw new Error(o==="zh"?" WebDAV ":"WebDAV username is required.");if(!Ce)throw new Error(o==="zh"?" WebDAV ":"WebDAV password is required.");return{endpoint:s,username:M,password:Ce}},[o,te,Ce,F]),Ye=j.useCallback((s,M)=>{m.saveWebDavEndpoint(s),m.saveWebDavUsername(M),je(s),Ke(M)},[]),ot=j.useCallback(async s=>await Xc(s)?!0:(window.alert(o==="zh"?" WebDAV ":"WebDAV host permission was not granted."),!1),[o]),rt=j.useCallback(async(s,M,g)=>{const A=await ei({endpoint:s,username:M,password:g}),O=await Vc(A,g);return li(O)},[]),Xs=()=>{try{const s=Ze(te),M=F.trim();if(!M){window.alert(o==="zh"?" WebDAV ":"WebDAV username is required.");return}Ye(s,M),Z(o==="zh"?" WebDAV ":"WebDAV config saved.")}catch(s){const M=s instanceof Error?s.message:"Invalid WebDAV config";window.alert(M)}},qs=async()=>{if(!X){re("backup"),Te("");try{const s=it();if(Ye(s.endpoint,s.username),!await ot(s.endpoint))return;const g=await dt(),A=await ze(g);let O=["space","zenShelf","config"];try{const U=await rt(s.endpoint,s.username,s.password);O=Et(A,U).changedSections}catch(U){if((U instanceof Error?U.message:"")!=="Remote backup does not exist")throw U}if(O.length===0){Z(o==="zh"?"":"Remote backup is already up to date.");return}const f=await Hc(JSON.stringify(A),s.password);await qc(s,f);const L=Date.now();m.saveCloudSyncLastBackupAt(L),ft(L),Z(o==="zh"?`WebDAV ${Me(O)}`:`WebDAV incremental backup completed (${Me(O)})`)}catch(s){const M=s instanceof Error?s.message:"WebDAV backup failed";Z(M),window.alert(M)}finally{re(null)}}},en=async()=>{if(!X){re("restore"),Te("");try{const s=it();if(Ye(s.endpoint,s.username),!await ot(s.endpoint))return;const g=await ze(await dt()),A=await rt(s.endpoint,s.username,s.password),O=Et(g,A).changedSections;if(O.length===0){Z(o==="zh"?"":"Remote and local states are identical.");return}const f=Mi(R,O);if(!ui(f)){Z(o==="zh"?"":"Remote changes are outside current import scope.");return}const L=A.backup,U=ds(g.backup,L);let H=L,xe=[],me=[],ke;const J=Ts(o);if(!J)return;if(J==="merge"){ke=Is(U)?ji(o,U):kt;const Pe=gi(g.backup,L,ke);H=Pe.package,xe=Pe.renamedSpaces,me=Pe.skippedSpaceConflicts}Xe(H);const ut=qt(U,{renamedSpaces:xe,skippedSpaceConflicts:me,policy:ke});Te(ut);const kn=Is(U)||xe.length>0||me.length>0,On=J==="merge"&&ke?{searchEngineConflictPolicy:ke.searchEngine}:void 0;if(J==="overwrite"&&!window.confirm(o==="zh"?"":"Overwrite will replace local data. Merge (keep both) is recommended. Continue?"))return;const zn=await Be(H,J,f);le(he(zn,f));const Re=[];if(kn&&ut&&(Re.push(ut),Re.push("")),Re.push(o==="zh"?` ${J==="merge"?"":""}`:`Import with strategy "${J}" now?`),!window.confirm(Re.join(`
`)))return;await us(H,J,f,On);const ss=Date.now();m.saveCloudSyncLastRestoreAt(ss),Ct(ss),Z(o==="zh"?`WebDAV ${Me(O)}`:`WebDAV incremental restore completed (${Me(O)})`),window.alert(o==="zh"?`${J}`:`Restore completed (${J})`),window.location.reload()}catch(s){const M=s instanceof Error?s.message:"WebDAV restore failed";Z(M),window.alert(M)}finally{re(null)}}},tn=async()=>{if(!X){re("check"),Te("");try{const s=it();if(Ye(s.endpoint,s.username),!await ot(s.endpoint))return;const g=await ze(await dt()),A=await rt(s.endpoint,s.username,s.password),O=Et(g,A).changedSections;if(O.length===0){Z(o==="zh"?"":"No differences.");return}const f=ds(g.backup,A.backup),L=qt(f);Te(L),Z(o==="zh"?`${Me(O)}${L?"":""}`:`Differences found: ${Me(O)}${L?" (conflicts found, see summary below)":""}`)}catch(s){const M=s instanceof Error?s.message:"Diff check failed";Z(M),window.alert(M)}finally{re(null)}}},he=j.useCallback((s,M=R)=>{const g=[];return M.space&&g.push(o==="zh"?` ${s.spaces.add} /  ${s.spaces.overwrite} /  ${s.spaces.conflict}`:`Spaces: +${s.spaces.add} / overwrite ${s.spaces.overwrite} / conflicts ${s.spaces.conflict}`,o==="zh"?`Dock URL ${s.dockUrls.add} /  ${s.dockUrls.overwrite} /  ${s.dockUrls.conflict}`:`Dock URLs: +${s.dockUrls.add} / overwrite ${s.dockUrls.overwrite} / conflicts ${s.dockUrls.conflict}`),M.zenShelf&&g.push(o==="zh"?` ${s.stickers.add} /  ${s.stickers.overwrite} /  ${s.stickers.conflict}`:`Stickers: +${s.stickers.add} / overwrite ${s.stickers.overwrite} / conflicts ${s.stickers.conflict}`,o==="zh"?` ${s.stickerAssets.add} /  ${s.stickerAssets.overwrite} /  ${s.stickerAssets.conflict}`:`Sticker assets: +${s.stickerAssets.add} / overwrite ${s.stickerAssets.overwrite} / conflicts ${s.stickerAssets.conflict}`),M.config&&g.push(o==="zh"?` ${s.searchEngines.add} /  ${s.searchEngines.overwrite} /  ${s.searchEngines.conflict}`:`Search engines: +${s.searchEngines.add} / overwrite ${s.searchEngines.overwrite} / conflicts ${s.searchEngines.conflict}`,o==="zh"?` ${s.wallpapers.add} /  ${s.wallpapers.overwrite} /  ${s.wallpapers.conflict}`:`Wallpapers: +${s.wallpapers.add} / overwrite ${s.wallpapers.overwrite} / conflicts ${s.wallpapers.conflict}`),g.join(`
`)},[R,o]),lt=j.useCallback(s=>{Gs(M=>{const g={...M,[s]:!M[s]};return!g.space&&!g.zenShelf&&!g.config?M:g})},[]);j.useEffect(()=>{if(!ae)return;let s=!1;return(async()=>{try{const g=await Be(ae,js,R);if(s)return;le(he(g))}catch(g){if(s)return;const A=g instanceof Error?g.message:"Import preview failed";le(A)}})(),()=>{s=!0}},[he,ae,R]);const sn=async()=>{try{await vc()}catch(s){window.alert(s instanceof Error?s.message:"Export failed")}},nn=async()=>{try{await _c(v)}catch(s){window.alert(s instanceof Error?s.message:"Export failed")}},an=()=>{Ue.current?.click()},cn=async s=>{const M=s.target.files?.[0];if(M)try{const g=await Yc(M);Xe(g);const A=await Be(g,js,R);le(he(A))}catch(g){const A=g instanceof Error?g.message:"Import file parse failed";window.alert(A),Xe(null),le("")}finally{Ue.current&&(Ue.current.value="")}},on=async()=>{if(!ae||qe)return;if(!R.space&&!R.zenShelf&&!R.config){window.alert(o==="zh"?"":"Select at least one import scope.");return}const s=Ts(o);if(!(!s||!window.confirm(o==="zh"?` ${s==="merge"?"":""}`:`Import with strategy "${s}" now?`))){Qt(!0);try{const g=await Be(ae,s,R);le(he(g));const A=await us(ae,s,R);window.alert(o==="zh"?`${A.strategy}`:`Import completed (${A.strategy})`),window.location.reload()}catch(g){const A=g instanceof Error?g.message:"Import failed";window.alert(A)}finally{Qt(!1)}}},rn=async()=>typeof chrome>"u"||!chrome.permissions?.request||!chrome.permissions?.contains?!1:await new Promise(M=>{chrome.permissions.contains({permissions:["bookmarks"]},g=>{if(chrome.runtime?.lastError){M(!1);return}M(!!g)})})?!0:new Promise(M=>{chrome.permissions.request({permissions:["bookmarks"]},g=>{if(chrome.runtime?.lastError){M(!1);return}M(!!g)})}),ln=async()=>{Rt(!0);try{if(!await rn()){window.alert(o==="zh"?"":"Bookmark permission was not granted.");return}const M=await new Promise(A=>{chrome.bookmarks.getTree(O=>A(O))}),g=di(M,Ot,{limit:Qe,mergeByDomain:vt});Zs(g)}finally{Rt(!1)}},Mn=async()=>{if(!P||P.selected.length===0)return;const s=Ii(P.selected),M=await Promise.all(s.map(async A=>{if(!A.url)return A;try{const O=await Gn(A.url);return{...A,icon:O.url}}catch{return A}}));Y(M);const g=new Set(M.map(A=>A.id));ne(o==="zh"?` ${M.length} `:`Imported ${M.length} bookmarks`,()=>{z(A=>A.filter(O=>!g.has(O.id)))})},un=async()=>{const s=await Hn(6);window.alert(o==="zh"?` ${s.removedCount}  ${B(s.estimatedFreedBytes)}`:`Removed ${s.removedCount} wallpapers, freed ~${B(s.estimatedFreedBytes)}`),Ae()},gn=async()=>{const s=await Zn();window.alert(o==="zh"?` ${s.removedCount}  ${B(s.estimatedFreedBytes)}`:`Recompressed ${s.removedCount} sticker assets, freed ~${B(s.estimatedFreedBytes)}`),Ae()},Mt=(s,M)=>{const g=se.map(A=>A.id!==s||A.type!=="time"?A:M(A));Se(g)},Dn=(s,M)=>{Mt(s,g=>{const O=g.days.includes(M)?g.days.filter(f=>f!==M):[...g.days,M];return O.length===0?g:{...g,days:O.sort((f,L)=>f-L)}})},Nn=(s,M,g)=>{const A=We(M,g);Mt(s,O=>({...O,startMinute:A}))},dn=(s,M,g)=>{const A=We(M,g);Mt(s,O=>({...O,endMinute:A}))},In=s=>{const M=Number(s),g=Number.isFinite(M)?Math.max(1,Math.min(180,Math.floor(M))):10;Bt(g),m.saveSpaceSuggestionCooldownMinutes(g)},es=s=>{$t(s),m.saveSpaceSuggestionQuietHoursEnabled(s)},jn=s=>{const M=We(s,Wt);Gt(M),m.saveSpaceSuggestionQuietStartMinute(M)},Tn=s=>{const M=We(s,Ht);Zt(M),m.saveSpaceSuggestionQuietEndMinute(M)},pn=()=>{Se([...se,Vn(v.id)])},ts=()=>{const s=as(et);if(!s)return;if(se.some(g=>g.type==="domain"&&g.spaceId===v.id&&as(g.domain)===s)){tt("");return}Se([...se,Fn(v.id,s)]),tt("")},En=s=>{Se(se.map(M=>M.id===s?{...M,enabled:!M.enabled}:M))},yn=s=>{Se(se.filter(M=>M.id!==s))},An={left:`${n.x}px`,top:`${n.y}px`},Sn=new Map(Je.map(s=>[s.id,s.name])),hn=o==="zh"?pi:Ti;let ue=-1;r?ue=0:a==="light"?ue=1:a==="dark"&&(ue=2);const xn={transform:ue>=0?`translateX(${ue*56}px)`:"scale(0)",opacity:ue>=0?1:0},mn=()=>{ye.current||(ye.current=!0,ce.current?ns(ce.current,300,()=>{Ee(!1),t()}):(Ee(!1),t()))};return pe?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:i.backdrop,"data-ui-zone":"settings-modal",onClick:mn}),c.jsx("div",{ref:ce,className:i.modal,"data-ui-zone":"settings-modal",style:An,children:c.jsxs("div",{className:i.innerContainer,children:[c.jsxs("div",{className:i.iconContainer,children:[c.jsxs("div",{className:i.themeGroupContainer,children:[c.jsx("div",{className:i.highlightBackground,style:xn}),c.jsx("button",{className:i.themeGroupOption,onClick:Js,title:D.settings.followSystem,children:c.jsx("img",{src:_n,alt:"Follow System",width:24,height:24})}),c.jsx("button",{className:i.themeGroupOption,onClick:()=>ct("light"),title:D.settings.lightTheme,children:c.jsx("img",{src:sc,alt:"Light Theme",width:24,height:24})}),c.jsx("button",{className:i.themeGroupOption,onClick:()=>ct("dark"),title:D.settings.darkTheme,children:c.jsx("img",{src:nc,alt:"Dark Theme",width:24,height:24})})]}),c.jsx("button",{className:`${i.defaultTheme} ${at?i.defaultThemeActive:""}`,onClick:()=>ct("default"),title:D.settings.defaultTheme,children:c.jsx("img",{src:tc,alt:"Default Theme",width:24,height:24})})]}),c.jsx("div",{className:`${i.textureSectionWrapper} ${!at&&!d?i.textureSectionWrapperOpen:""}`,children:c.jsxs("div",{className:i.textureSection,children:[c.jsx("button",{className:`${i.textureOption} ${y==="none"?i.textureOptionActive:""}`,onClick:()=>Jt("none"),title:D.settings.noTexture,children:c.jsx("div",{className:i.texturePreviewNone,children:c.jsx("img",{src:Yn,alt:"No Texture",width:24,height:24})})}),["point","cross"].map(s=>{const M=Jn[s],g=s==="point"?ac:cc;return c.jsx("button",{className:`${i.textureOption} ${y===s?i.textureOptionActive:""}`,onClick:()=>Jt(s),title:M.name,children:c.jsx("div",{className:i.texturePreviewNone,children:c.jsx("img",{src:g,alt:M.name,width:24,height:24})})},s)})]})}),c.jsx("div",{className:i.colorOptionsContainer,children:Rn.map(s=>{let M="";const g=s.id==="theme-default";g?M="var(--color-bg-secondary)":at?M=s.gradient:M=(a==="dark"||r&&Vt==="dark")&&"solidDark"in s?s.solidDark:s.solid;const A=!d&&h===s.id;return c.jsx("button",{className:`${i.colorOption} ${A?i.colorOptionActive:""}`,onClick:()=>Ks(s.id),title:s.name,style:{background:M,display:"flex",alignItems:"center",justifyContent:"center"},children:g&&c.jsx("img",{src:Pn,alt:"Default",width:24,height:24,style:{filter:a==="dark"||r&&Vt==="dark"?"invert(1)":"none"}})},s.id)})}),c.jsx("div",{className:i.wallpaperSection,children:c.jsx(Ic,{})}),c.jsxs("div",{className:i.layoutSection,children:[c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.settings.language}),c.jsxs("div",{className:i.layoutToggleGroup,children:[c.jsx("div",{className:i.layoutHighlight,style:{transform:`translateX(${o==="zh"?0:100}%)`}}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>p("zh"),title:"",children:""}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>p("en"),title:"EN",children:"EN"})]})]}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.settings.position}),c.jsxs("div",{className:i.layoutToggleGroup,children:[c.jsx("div",{className:i.layoutHighlight,style:{transform:`translateX(${N==="bottom"?0:100}%)`}}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>k("bottom"),title:D.settings.bottom,children:D.settings.bottom}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>k("center"),title:D.settings.center,children:D.settings.center})]})]}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.settings.iconSize}),c.jsxs("div",{className:i.layoutToggleGroup,children:[c.jsx("div",{className:i.layoutHighlight,style:{transform:`translateX(${x==="large"?0:100}%)`}}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>b("large"),title:D.settings.large,children:D.settings.large}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>b("small"),title:D.settings.small,children:D.settings.small})]})]}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.settings.suggestions}),c.jsx(Ei,{})]}),c.jsx("div",{className:i.layoutHint,children:D.settings.suggestionsPrivacyHint}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.settings.thirdPartyIconService}),c.jsxs("div",{className:i.layoutToggleGroup,children:[c.jsx("div",{className:i.layoutHighlight,style:{transform:`translateX(${Le?0:100}%)`}}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>Kt(!0),title:D.settings.on,children:D.settings.on}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>Kt(!1),title:D.settings.off,children:D.settings.off})]})]}),c.jsx("div",{className:i.layoutHint,children:D.settings.thirdPartyIconDomainsHint}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:o==="zh"?"":"Search Sticker Content"}),c.jsxs("div",{className:i.layoutToggleGroup,children:[c.jsx("div",{className:i.layoutHighlight,style:{transform:`translateX(${oe?0:100}%)`}}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>Xt(!0),title:D.settings.on,children:D.settings.on}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>Xt(!1),title:D.settings.off,children:D.settings.off})]})]}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.settings.openInNewTab}),c.jsxs("div",{className:i.layoutToggleGroup,children:[c.jsx("div",{className:i.layoutHighlight,style:{transform:`translateX(${Q?0:100}%)`}}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>_(!0),title:D.settings.on,children:D.settings.on}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>_(!1),title:D.settings.off,children:D.settings.off})]})]}),c.jsx("div",{className:i.sectionDivider}),c.jsx("div",{className:i.subSectionTitle,children:o==="zh"?"":"Data Management"}),c.jsxs("div",{className:i.actionRow,children:[c.jsx("button",{className:i.actionButton,onClick:sn,children:o==="zh"?"":"Export Full Backup"}),c.jsx("button",{className:i.actionButton,onClick:nn,children:o==="zh"?"":"Export Current Space"})]}),c.jsxs("div",{className:i.actionRow,children:[c.jsx("button",{className:i.actionButton,onClick:an,children:o==="zh"?"":"Select Import File"}),c.jsx("input",{ref:Ue,type:"file",accept:".zip,.json",style:{display:"none"},onChange:cn})]}),c.jsxs("div",{className:i.actionRow,children:[c.jsx("button",{className:`${i.actionButton} ${R.space?i.actionButtonActive:""}`,onClick:()=>lt("space"),children:o==="zh"?" Space":"Import Space"}),c.jsx("button",{className:`${i.actionButton} ${R.zenShelf?i.actionButtonActive:""}`,onClick:()=>lt("zenShelf"),children:o==="zh"?" ZenShelf":"Import ZenShelf"}),c.jsx("button",{className:`${i.actionButton} ${R.config?i.actionButtonActive:""}`,onClick:()=>lt("config"),children:o==="zh"?"":"Import Config"})]}),Ut&&c.jsx("pre",{className:i.previewBox,children:Ut}),c.jsx("div",{className:i.actionRow,children:c.jsx("button",{className:i.actionButton,disabled:!ae||qe,onClick:on,children:qe?o==="zh"?"...":"Importing...":o==="zh"?"":"Run Import"})}),c.jsx("div",{className:i.sectionDivider}),c.jsx("div",{className:i.subSectionTitle,children:o==="zh"?"WebDAV ":"WebDAV Sync (Manual)"}),c.jsx("div",{className:i.actionRow,children:c.jsx("input",{className:i.textInputSmall,value:te,onChange:s=>je(s.target.value),placeholder:o==="zh"?"WebDAV  URL":"WebDAV file URL"})}),c.jsxs("div",{className:i.actionRow,children:[c.jsx("input",{className:i.textInputSmall,value:F,onChange:s=>Ke(s.target.value),placeholder:o==="zh"?"":"Username"}),c.jsx("input",{className:i.textInputSmall,type:"password",value:Ce,onChange:s=>Bs(s.target.value),placeholder:o==="zh"?"":"Password (session only)"})]}),c.jsxs("div",{className:i.actionRow,children:[c.jsx("button",{className:i.actionButton,onClick:Xs,children:o==="zh"?"":"Save Config"}),c.jsx("button",{className:i.actionButton,disabled:X!==null,onClick:()=>void tn(),children:X==="check"?o==="zh"?"...":"Checking...":o==="zh"?"":"Check Diff"})]}),c.jsxs("div",{className:i.actionRow,children:[c.jsx("button",{className:i.actionButton,disabled:X!==null,onClick:()=>void qs(),children:X==="backup"?o==="zh"?"...":"Backing up...":o==="zh"?"":"Incremental Backup"}),c.jsx("button",{className:i.actionButton,disabled:X!==null,onClick:()=>void en(),children:X==="restore"?o==="zh"?"...":"Restoring...":o==="zh"?"":"Incremental Restore"})]}),c.jsx("pre",{className:i.previewBox,children:o==="zh"?`${_e(wt)}
${_e(Lt)}${be?`
${be}`:""}`:`Last backup: ${_e(wt)}
Last restore: ${_e(Lt)}${be?`
Status: ${be}`:""}`}),zt&&c.jsx("pre",{className:i.previewBox,children:zt}),c.jsx("div",{className:i.sectionDivider}),c.jsx("div",{className:i.subSectionTitle,children:o==="zh"?"":"Bookmarks Import"}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:o==="zh"?` N  ${Qe}`:`Top N (${Qe})`}),c.jsx("input",{className:i.numberInput,type:"number",min:1,max:200,value:Qe,onChange:s=>Hs(Math.max(1,Math.min(200,Number(s.target.value)||20)))})]}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:o==="zh"?"":"Merge Same Domain"}),c.jsxs("div",{className:i.layoutToggleGroup,children:[c.jsx("div",{className:i.layoutHighlight,style:{transform:`translateX(${vt?0:100}%)`}}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>_t(!0),children:D.settings.on}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>_t(!1),children:D.settings.off})]})]}),c.jsxs("div",{className:i.actionRow,children:[c.jsx("button",{className:i.actionButton,onClick:ln,disabled:Yt,children:Yt?o==="zh"?"...":"Loading...":o==="zh"?"":"Load Preview"}),c.jsx("button",{className:i.actionButton,onClick:Mn,disabled:!P||P.selected.length===0,children:o==="zh"?" Dock":"Import to Dock"})]}),P&&c.jsx("pre",{className:i.previewBox,children:o==="zh"?` ${P.total}  ${P.selected.length} 
 URL  ${P.skippedExistingUrl} 
 ${P.skippedDomainMerged} `:`Total ${P.total}, selected ${P.selected.length}
Skipped existing URLs: ${P.skippedExistingUrl}
Skipped by domain merge: ${P.skippedDomainMerged}`}),c.jsx("div",{className:i.sectionDivider}),c.jsx("div",{className:i.subSectionTitle,children:o==="zh"?"":"Storage Dashboard"}),c.jsx("div",{className:i.layoutRow,children:c.jsx("span",{className:i.layoutLabel,children:Ws?o==="zh"?"...":"Loading...":o==="zh"?` ${B(W?.overview.usedBytes??null)} /  ${B(W?.overview.quotaBytes??null)}`:`Used ${B(W?.overview.usedBytes??null)} / Quota ${B(W?.overview.quotaBytes??null)}`})}),W&&c.jsx("pre",{className:i.previewBox,children:o==="zh"?` ${W.stickersCount}
 ${B(W.imageStickerBytes)}
 ${B(W.wallpaperBytes)}
 ${B(W.iconBytes)}`:`Stickers ${W.stickersCount}
Image stickers ${B(W.imageStickerBytes)}
Wallpapers ${B(W.wallpaperBytes)}
Icon cache estimate ${B(W.iconBytes)}`}),c.jsxs("div",{className:i.actionRow,children:[c.jsx("button",{className:i.actionButton,onClick:()=>void Ae(),children:o==="zh"?"":"Refresh"}),c.jsx("button",{className:i.actionButton,onClick:()=>void un(),children:o==="zh"?"":"Clean Old Wallpapers"})]}),c.jsx("div",{className:i.actionRow,children:c.jsx("button",{className:i.actionButton,onClick:()=>void gn(),children:o==="zh"?"":"Recompress Stickers"})}),c.jsx("div",{className:i.sectionDivider}),c.jsx("div",{className:i.subSectionTitle,children:D.space.rulesTitle}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:st?D.space.rulesPermissionEnabled:D.space.rulesEnableTabPermission}),c.jsx("button",{className:i.actionButton,onClick:()=>void Fs(),disabled:st,children:st?D.settings.on:D.settings.off})]}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.space.rulesCooldown}),c.jsx("input",{className:i.numberInput,type:"number",min:1,max:180,value:Vs,onChange:s=>In(s.target.value)})]}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.space.rulesQuietHours}),c.jsxs("div",{className:i.layoutToggleGroup,children:[c.jsx("div",{className:i.layoutHighlight,style:{transform:`translateX(${nt?0:100}%)`}}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>es(!0),title:D.settings.on,children:D.settings.on}),c.jsx("button",{className:i.layoutToggleOption,onClick:()=>es(!1),title:D.settings.off,children:D.settings.off})]})]}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.space.rulesQuietStart}),c.jsx("input",{className:i.timeInput,type:"time",value:$e(Wt),onChange:s=>jn(s.target.value),disabled:!nt})]}),c.jsxs("div",{className:i.layoutRow,children:[c.jsx("span",{className:i.layoutLabel,children:D.space.rulesQuietEnd}),c.jsx("input",{className:i.timeInput,type:"time",value:$e(Ht),onChange:s=>Tn(s.target.value),disabled:!nt})]}),c.jsx("div",{className:i.actionRow,children:c.jsx("button",{className:i.actionButton,onClick:pn,children:D.space.rulesAddTime})}),c.jsxs("div",{className:i.actionRow,children:[c.jsx("input",{className:i.textInputSmall,value:et,onChange:s=>tt(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),ts())},placeholder:D.space.rulesDomainPlaceholder}),c.jsx("button",{className:i.actionButton,disabled:!et.trim(),onClick:ts,children:D.space.rulesAddDomain})]}),se.length===0?c.jsx("pre",{className:i.previewBox,children:D.space.rulesNoItems}):c.jsx("div",{className:i.ruleList,children:se.map(s=>c.jsxs("div",{className:i.ruleRow,children:[c.jsxs("div",{className:i.ruleMain,children:[c.jsx("span",{className:i.ruleLabel,children:Bn(s,o,Sn.get(s.spaceId))}),s.type==="time"&&c.jsxs("div",{className:i.timeRuleEditor,children:[c.jsx("div",{className:i.weekdayRow,children:hn.map((M,g)=>c.jsx("button",{type:"button",className:`${i.weekdayChip} ${s.days.includes(g)?i.weekdayChipActive:""}`,onClick:()=>Dn(s.id,g),children:M},`${s.id}_day_${g}`))}),c.jsxs("div",{className:i.timeRangeRow,children:[c.jsx("input",{className:i.timeInput,type:"time",value:$e(s.startMinute),onChange:M=>Nn(s.id,M.target.value,s.startMinute)}),c.jsx("span",{className:i.timeRangeSeparator,children:"-"}),c.jsx("input",{className:i.timeInput,type:"time",value:$e(s.endMinute),onChange:M=>dn(s.id,M.target.value,s.endMinute)})]})]})]}),c.jsxs("div",{className:i.ruleActions,children:[c.jsx("button",{className:i.ruleActionButton,onClick:()=>En(s.id),children:s.enabled?D.settings.on:D.settings.off}),c.jsx("button",{className:i.ruleActionButtonDanger,onClick:()=>yn(s.id),children:D.contextMenu.delete})]})]},s.id))})]}),c.jsx("div",{className:i.footer,children:c.jsx("a",{href:"https://github.com/lsdsp/EclipseTab",target:"_blank",rel:"noopener noreferrer",className:i.githubLink,title:"View on GitHub",children:c.jsx("span",{children:"GitHub"})})})]})})]}):null};export{xi as SettingsModal,Ts as promptImportStrategy,ji as promptMergeConflictPolicy};
