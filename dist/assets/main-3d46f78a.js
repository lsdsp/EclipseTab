import{r,a as Ye,R as fe,b as Bn}from"./vendor-react-d4bca6d7.js";import{k as Fn,w as Wn}from"./vendor-utils-654bd828.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();var Tn={exports:{}},yt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gn=r,$n=Symbol.for("react.element"),Zn=Symbol.for("react.fragment"),Vn=Object.prototype.hasOwnProperty,Hn=Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xn={key:!0,ref:!0,__self:!0,__source:!0};function yn(e,t,n){var s,i={},c=null,a=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)Vn.call(t,s)&&!Xn.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:$n,type:e,key:c,ref:a,props:i,_owner:Hn.current}}yt.Fragment=Zn;yt.jsx=yn;yt.jsxs=yn;Tn.exports=yt;var o=Tn.exports,bt={},$t=Ye;bt.createRoot=$t.createRoot,bt.hydrateRoot=$t.hydrateRoot;const Jn="modulepreload",Kn=function(e,t){return new URL(e,t).href},Zt={},Et=function(t,n,s){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(c=>{if(c=Kn(c,s),c in Zt)return;Zt[c]=!0;const a=c.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!s)for(let d=i.length-1;d>=0;d--){const x=i[d];if(x.href===c&&(!a||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${l}`))return;const M=document.createElement("link");if(M.rel=a?"stylesheet":Jn,a||(M.as="script",M.crossOrigin=""),M.href=c,document.head.appendChild(M),a)return new Promise((d,x)=>{M.addEventListener("load",d),M.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>t()).catch(c=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=c,window.dispatchEvent(a),!a.defaultPrevented)throw c})},En=[{id:"default",name:"系统默认",url:""},{id:"google",name:"Google",url:"https://www.google.com/search?q="},{id:"bing",name:"Bing",url:"https://www.bing.com/search?q="},{id:"baidu",name:"Baidu",url:"https://www.baidu.com/s?wd="},{id:"duckduckgo",name:"DuckDuckGo",url:"https://duckduckgo.com/?q="}],qn=En[0];function Qt(e="Main",t=[]){return{id:crypto.randomUUID(),name:e,iconType:"text",apps:t,createdAt:Date.now()}}function zt(e=[]){const t=Qt("Main",e),n=Qt("Google",er());return{spaces:[t,n],activeSpaceId:t.id,version:1}}function er(){return[{id:crypto.randomUUID(),name:"Gmail",url:"https://mail.google.com",icon:"https://www.google.com/gmail/about/static-2.0/images/logo-gmail.png",type:"app"},{id:crypto.randomUUID(),name:"Drive",url:"https://drive.google.com",icon:"https://ssl.gstatic.com/images/branding/product/2x/drive_2020q4_48dp.png",type:"app"},{id:crypto.randomUUID(),name:"Calendar",url:"https://calendar.google.com",icon:"https://ssl.gstatic.com/calendar/images/dynamiclogo_2020q4/calendar_31_2x.png",type:"app"},{id:crypto.randomUUID(),name:"Maps",url:"https://maps.google.com",icon:"https://www.google.com/images/branding/product/2x/maps_96dp.png",type:"app"},{id:crypto.randomUUID(),name:"YouTube",url:"https://www.youtube.com",icon:"https://www.youtube.com/s/desktop/f506bd45/img/favicon_144x144.png",type:"app"},{id:crypto.randomUUID(),name:"Photos",url:"https://photos.google.com",icon:"https://ssl.gstatic.com/social/photosui/images/logo/favicon_96.png",type:"app"}]}const tr={color:"#1C1C1E",textAlign:"left",fontSize:40},it=400,oe={DOCK_ITEMS:"EclipseTab_dockItems",SEARCH_ENGINE:"EclipseTab_searchEngine",CONFIG:"EclipseTab_config",WALLPAPER:"EclipseTab_wallpaper",LAST_WALLPAPER:"EclipseTab_lastWallpaper",WALLPAPER_ID:"EclipseTab_wallpaperId",SPACES:"EclipseTab_spaces",STICKERS:"EclipseTab_stickers"},pt={theme:"light",followSystem:!0,dockPosition:"bottom",iconSize:"large",texture:"point",gradient:null},Se={spaces:null,stickers:null,config:null};function ht(e,t){if(!t)return null;try{if(localStorage.getItem(e)===t.raw)return t.data}catch{}return null}const ie={getConfig(){try{const e=ht(oe.CONFIG,Se.config);if(e)return e;const t=localStorage.getItem(oe.CONFIG);if(t){const d=JSON.parse(t),x={...pt,...d};return Se.config={data:x,raw:t},x}const n={...pt},s=localStorage.getItem("EclipseTab_theme");s&&(n.theme=s);const i=localStorage.getItem("EclipseTab_followSystem");i!==null&&(n.followSystem=i==="true");const c=localStorage.getItem("EclipseTab_dockPosition");(c==="center"||c==="bottom")&&(n.dockPosition=c);const a=localStorage.getItem("EclipseTab_iconSize");(a==="small"||a==="large")&&(n.iconSize=a);const l=localStorage.getItem("EclipseTab_texture");l&&(n.texture=l);const g=localStorage.getItem("EclipseTab_gradient");g&&(n.gradient=g);const M=JSON.stringify(n);return localStorage.setItem(oe.CONFIG,M),Se.config={data:n,raw:M},n}catch{return pt}},saveConfig(e){try{const t=JSON.stringify(e);localStorage.setItem(oe.CONFIG,t),Se.config={data:e,raw:t}}catch{}},updateConfig(e){const n={...this.getConfig(),...e};this.saveConfig(n)},getTheme(){return this.getConfig().theme},saveTheme(e){this.updateConfig({theme:e})},getFollowSystem(){return this.getConfig().followSystem},saveFollowSystem(e){this.updateConfig({followSystem:e})},getDockPosition(){return this.getConfig().dockPosition},saveDockPosition(e){this.updateConfig({dockPosition:e})},getIconSize(){return this.getConfig().iconSize},saveIconSize(e){this.updateConfig({iconSize:e})},getTexture(){return this.getConfig().texture},saveTexture(e){this.updateConfig({texture:e})},getGradient(){return this.getConfig().gradient},saveGradient(e){this.updateConfig({gradient:e})},getDockItems(){try{const e=localStorage.getItem(oe.DOCK_ITEMS);return e?JSON.parse(e):[]}catch{return[]}},saveDockItems(e){try{localStorage.setItem(oe.DOCK_ITEMS,JSON.stringify(e))}catch{}},getSearchEngine(){try{const e=localStorage.getItem(oe.SEARCH_ENGINE);return e?JSON.parse(e):null}catch{return null}},saveSearchEngine(e){try{localStorage.setItem(oe.SEARCH_ENGINE,JSON.stringify(e))}catch{}},getWallpaper(){try{return localStorage.getItem(oe.WALLPAPER)}catch{return null}},saveWallpaper(e){try{e?(localStorage.setItem(oe.WALLPAPER,e),localStorage.setItem(oe.LAST_WALLPAPER,e)):localStorage.removeItem(oe.WALLPAPER)}catch{}},getWallpaperId(){try{return localStorage.getItem(oe.WALLPAPER_ID)}catch{return null}},saveWallpaperId(e){try{e?localStorage.setItem(oe.WALLPAPER_ID,e):localStorage.removeItem(oe.WALLPAPER_ID)}catch{}},getLastWallpaper(){try{return localStorage.getItem(oe.LAST_WALLPAPER)}catch{return null}},saveLastWallpaper(e){try{e?localStorage.setItem(oe.LAST_WALLPAPER,e):localStorage.removeItem(oe.LAST_WALLPAPER)}catch{}},getSpaces(){try{const e=ht(oe.SPACES,Se.spaces);if(e)return e;const t=localStorage.getItem(oe.SPACES);if(t){const i=JSON.parse(t);if(i&&i.spaces&&i.spaces.length>0)return Se.spaces={data:i,raw:t},i}const n=this.getDockItems();if(n.length>0){const i=zt(n);return this.saveSpaces(i),i}const s=zt();return this.saveSpaces(s),s}catch{const t=zt();return this.saveSpaces(t),t}},saveSpaces(e){try{const t=JSON.stringify(e);localStorage.setItem(oe.SPACES,t),Se.spaces={data:e,raw:t}}catch{}},clearSpaces(){try{localStorage.removeItem(oe.SPACES)}catch{}},getStickers(){try{const e=ht(oe.STICKERS,Se.stickers);if(e)return e;const t=localStorage.getItem(oe.STICKERS);if(t){const n=JSON.parse(t);return Se.stickers={data:n,raw:t},n}return[]}catch{return[]}},saveStickers(e){try{const t=JSON.stringify(e);localStorage.setItem(oe.STICKERS,t),Se.stickers={data:e,raw:t}}catch{}}},nr=100,be=new Map,rr=e=>{const t=be.get(e);return t&&(be.delete(e),be.set(e,t)),t},sr=(e,t)=>{if(be.has(e)&&be.delete(e),be.size>=nr){const n=be.keys().next().value;n&&be.delete(n)}be.set(e,t)},Ge=192,Ct=800,Vt=.6,Ht=.85;let pe=null,rt=null;function mn(e,t){try{return pe||(typeof OffscreenCanvas<"u"?(pe=new OffscreenCanvas(e,t),rt=pe.getContext("2d")):(pe=document.createElement("canvas"),pe.width=e,pe.height=t,rt=pe.getContext("2d"))),rt?((pe.width!==e||pe.height!==t)&&(pe.width=e,pe.height=t),rt.clearRect(0,0,e,t),{canvas:pe,ctx:rt}):null}catch{return null}}async function Ut(e){return e?.startsWith("data:image")?new Promise((t,n)=>{const s=new Image;s.onload=()=>{try{let{width:i,height:c}=s;(i>Ge||c>Ge)&&(i>c?(c=Math.round(c*Ge/i),i=Ge):(i=Math.round(i*Ge/c),c=Ge));const a=mn(i,c);if(!a){t(e);return}const{canvas:l,ctx:g}=a;g.drawImage(s,0,0,i,c);let M;if(l instanceof OffscreenCanvas){const d=document.createElement("canvas");d.width=i,d.height=c;const x=d.getContext("2d");if(x)x.drawImage(l,0,0),M=d.toDataURL("image/webp",Vt);else{t(e);return}}else M=l.toDataURL("image/webp",Vt);M.length>e.length?t(e):t(M)}catch{t(e)}},s.onerror=()=>{t(e)},s.src=e}):e}async function Xt(e){return e?.startsWith("data:image")?new Promise(t=>{const n=new Image;n.onload=()=>{try{let{width:s,height:i}=n;s>Ct&&(i=Math.round(i*Ct/s),s=Ct);const c=mn(s,i);if(!c){t(e);return}const{canvas:a,ctx:l}=c;l.drawImage(n,0,0,s,i);let g;if(a instanceof OffscreenCanvas){const M=document.createElement("canvas");M.width=s,M.height=i;const d=M.getContext("2d");if(d)d.drawImage(a,0,0),g=M.toDataURL("image/webp",Ht);else{t(e);return}}else g=a.toDataURL("image/webp",Ht);g.length>e.length?t(e):t(g)}catch{t(e)}},n.onerror=()=>{t(e)},n.src=e}):e}async function _t(e){return Promise.all(e.map(async t=>{const n={...t};return n.icon&&(n.icon=await Ut(n.icon)),n.type==="folder"&&n.items&&(n.items=await _t(n.items)),n}))}const Lt=new Map,vt=async(e,t=100)=>{try{const s=new URL(e).hostname,i=rr(s);if(i)return i;const c=`${s}:${t}`,a=Lt.get(c);if(a)return a;const l=ir(e,s,t);Lt.set(c,l);try{return await l}finally{Lt.delete(c)}}catch{return{url:ct(e),isFallback:!0}}},oa=async(e,t=100)=>{try{const n=await vt(e,t);return n.isFallback?n:{url:await Ut(n.url),isFallback:!1}}catch{return{url:ct(e),isFallback:!0}}},ir=async(e,t,n)=>{try{const c=`${new URL(e).protocol}//${t}`,a=[`${c}/apple-touch-icon.png`,`${c}/apple-touch-icon-180x180.png`,`${c}/apple-touch-icon-precomposed.png`,`${c}/icon-192x192.png`,`${c}/favicon.ico`],l=[`https://icons.duckduckgo.com/ip3/${t}.ico`,`https://www.google.com/s2/favicons?domain=${t}&sz=256`],g=x=>new Promise((D,N)=>{const I=new Image;let u=!1;const j=()=>{I.onload=null,I.onerror=null,u||(I.src="")};I.onload=()=>{if(u=!0,I.naturalWidth>=n&&I.naturalHeight>=n)D({url:x,width:I.naturalWidth,height:I.naturalHeight});else if(I.naturalWidth>1){if(n===0){D({url:x,width:I.naturalWidth,height:I.naturalHeight});return}N(`Image too small (< ${n}x${n})`)}else N("Image invalid")},I.onerror=()=>{u=!0,N("Failed to load")},I.src=x,setTimeout(()=>{u||(j(),N("Timeout"))},5e3)}),M=async x=>{const N=(await Promise.allSettled(x.map(I=>g(I)))).filter(I=>I.status==="fulfilled").map(I=>I.value).sort((I,u)=>u.width-I.width);return N.length>0?N[0]:null};let d=await M(a);if(d||(d=await M(l)),d){const x={url:d.url,isFallback:!1};return sr(t,x),x}throw new Error("未找到高分辨率图标")}catch{return{url:ct(e),isFallback:!0}}},Xe=576;let $e=null,Mt=null;function or(){return $e||($e=document.createElement("canvas"),$e.width=Xe,$e.height=Xe,Mt=$e.getContext("2d")),Mt?(Mt.clearRect(0,0,Xe,Xe),{canvas:$e,ctx:Mt}):null}const ct=e=>{try{const t=or();if(!t)return"";const{canvas:n,ctx:s}=t;let i=e;try{if(e.startsWith("http")||e.includes(".")){let I=e;try{I=new URL(e.startsWith("http")?e:`https://${e}`).hostname}catch{I=e}I=I.replace(/^www\./,"");const u=I.split(".")[0];u&&(i=u)}}catch{}const c=/[\u4e00-\u9fa5]/.test(i);if(c){const N=i.match(/[\u4e00-\u9fa5]/);i=N?N[0]:i.charAt(0)}else{const N=i.substring(0,2).toLowerCase();i=N.charAt(0).toUpperCase()+N.slice(1)}const a=Math.floor(Math.random()*360),l=40+Math.floor(Math.random()*40),g=20+Math.floor(Math.random()*15);s.fillStyle=`hsl(${a}, ${l}%, ${g}%)`,s.fillRect(0,0,576,576);const M=Math.floor(Math.random()*360),d=50+Math.floor(Math.random()*40),x=80+Math.floor(Math.random()*15);s.fillStyle=`hsl(${M}, ${d}%, ${x}%)`,s.font='900 360px "Bricolage Grotesque", sans-serif',s.textBaseline="middle",s.textAlign="center";const D=c?40:20;return s.fillText(i,Xe/2,Xe/2+D),n.toDataURL("image/png")}catch{return""}},ke=e=>{if(e.length===0)return ct("");const n=`
    <svg width="64" height="64" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <clipPath id="clip-0">
          <rect x="0" y="0" width="32" height="32" rx="8"/>
        </clipPath>
        <clipPath id="clip-1">
          <rect x="32" y="0" width="32" height="32" rx="8"/>
        </clipPath>
        <clipPath id="clip-2">
          <rect x="0" y="32" width="32" height="32" rx="8"/>
        </clipPath>
        <clipPath id="clip-3">
          <rect x="32" y="32" width="32" height="32" rx="8"/>
        </clipPath>
      </defs>
      ${e.slice(0,4).map(s=>s.icon||ct("")).map((s,i)=>{const c=i%2*32,a=Math.floor(i/2)*32;return`
          <g clip-path="url(#clip-${i})">
            <image href="${s}" x="${c}" y="${a}" width="32" height="32" preserveAspectRatio="xMidYMid slice"/>
          </g>
        `}).join("")}
    </svg>
  `;return`data:image/svg+xml;base64,${btoa(n)}`};async function Yt(e){const t={title:e.name,type:e.type};return e.url&&(t.url=e.url),e.icon&&(t.icon=await Ut(e.icon)),e.type==="folder"&&e.items&&(t.children=await Promise.all(e.items.map(Yt))),t}async function cr(e){const t=await Promise.all(e.apps.map(Yt)),n={version:"1.0",type:"eclipse-space-export",data:{name:e.name,iconType:e.iconType,iconValue:e.iconValue,apps:t}},s=JSON.stringify(n,null,2),i=new Blob([s],{type:"application/json"}),c=new Date().toISOString().slice(0,10).replace(/-/g,""),l=`eclipse-space-${e.name.toLowerCase().replace(/[^a-z0-9]/g,"-")}-${c}.json`,g=URL.createObjectURL(i),M=document.createElement("a");M.href=g,M.download=l,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(g)}async function ar(e){const n={version:"1.0",type:"eclipse-multi-space-export",data:{spaces:await Promise.all(e.map(async M=>{const d=await Promise.all(M.apps.map(Yt));return{name:M.name,iconType:M.iconType,iconValue:M.iconValue,apps:d}}))}},s=JSON.stringify(n,null,2),i=new Blob([s],{type:"application/json"}),a=`eclipse-all-spaces-${new Date().toISOString().slice(0,10).replace(/-/g,"")}.json`,l=URL.createObjectURL(i),g=document.createElement("a");g.href=l,g.download=a,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(l)}function Mr(e){if(!e||typeof e!="object")return!1;const t=e;if(t.type!=="eclipse-space-export"||!t.data||typeof t.data!="object")return!1;const n=t.data;return!(typeof n.name!="string"||!n.name||!Array.isArray(n.apps))}function lr(e){if(!e||typeof e!="object")return!1;const t=e;if(t.type!=="eclipse-multi-space-export"||!t.data||typeof t.data!="object")return!1;const n=t.data;if(!Array.isArray(n.spaces)||n.spaces.length===0)return!1;for(const s of n.spaces){if(!s||typeof s!="object")return!1;const i=s;if(typeof i.name!="string"||!i.name||!Array.isArray(i.apps))return!1}return!0}async function ur(e){return new Promise((t,n)=>{const s=new FileReader;s.onload=i=>{try{const c=i.target?.result,a=JSON.parse(c);if(lr(a)){t({type:"multi",data:a});return}if(Mr(a)){t({type:"single",data:a});return}n(new Error("Invalid file format: missing required fields"))}catch{n(new Error("Invalid JSON file"))}},s.onerror=()=>{n(new Error("Failed to read file"))},s.readAsText(e)})}function Rt(e){const t={id:crypto.randomUUID(),name:e.title,type:e.type};return e.url&&(t.url=e.url),e.icon&&(t.icon=e.icon),e.type==="folder"&&e.children&&(t.items=e.children.map(Rt)),t}function fn(e,t){if(!t.includes(e))return e;let n=1,s=`${e} (${n})`;for(;t.includes(s);)n++,s=`${e} (${n})`;return s}async function gr(e,t){const n=t.map(a=>a.name),s=fn(e.data.name,n),i=e.data.apps.map(Rt),c=await _t(i);return{id:crypto.randomUUID(),name:s,iconType:e.data.iconType||"text",iconValue:e.data.iconValue,apps:c,createdAt:Date.now()}}async function dr(e,t){const n=t.map(i=>i.name),s=[];for(const i of e.data.spaces){const c=[...n,...s.map(M=>M.name)],a=fn(i.name,c),l=i.apps.map(Rt),g=await _t(l);s.push({id:crypto.randomUUID(),name:a,iconType:i.iconType||"text",iconValue:i.iconValue,apps:g,createdAt:Date.now()})}return s}const An=r.createContext(void 0),zn=r.createContext(void 0);function Ir({children:e}){const[t,n]=r.useState(()=>ie.getSpaces()),[s,i]=r.useState(!1),c=r.useRef(!0),{spaces:a,activeSpaceId:l}=t,g=r.useMemo(()=>a.find(p=>p.id===l)||a[0],[a,l]),M=r.useMemo(()=>a.findIndex(p=>p.id===l),[a,l]),d=r.useRef();r.useEffect(()=>{if(c.current){c.current=!1;return}return d.current&&clearTimeout(d.current),d.current=window.setTimeout(()=>{ie.saveSpaces(t)},500),()=>{d.current&&clearTimeout(d.current)}},[t]);const x=r.useCallback(()=>{if(s||a.length<=1)return;const p=(M+1)%a.length,L=a[p];n(E=>({...E,activeSpaceId:L.id}))},[s,a,M]),D=r.useCallback(p=>{s||!a.find(E=>E.id===p)||n(E=>({...E,activeSpaceId:p}))},[s,a]),N=r.useCallback(p=>{const L=Qt(p||`Space ${a.length+1}`);n(E=>({...E,spaces:[...E.spaces,L],activeSpaceId:L.id}))},[a.length]),I=r.useCallback(p=>{if(a.length<=1)return;const L=a.findIndex(Q=>Q.id===p);if(L===-1)return;let E=l;if(p===l){const Q=L===0?1:L-1;E=a[Q].id}n(Q=>({...Q,spaces:Q.spaces.filter(J=>J.id!==p),activeSpaceId:E}))},[a,l]),u=r.useCallback((p,L)=>{L.trim()&&n(E=>({...E,spaces:E.spaces.map(Q=>Q.id===p?{...Q,name:L.trim()}:Q)}))},[]),j=r.useCallback(async p=>{const L=await gr(p,a);return n(E=>({...E,spaces:[...E.spaces,L],activeSpaceId:L.id})),L},[a]),y=r.useCallback(async p=>{const L=await dr(p,a);return L.length>0&&n(E=>({...E,spaces:[...E.spaces,...L],activeSpaceId:L[0].id})),L},[a]),C=r.useCallback(p=>{n(L=>{const E=L.spaces.findIndex(K=>K.id===p);if(E<=0)return L;const J=[L.spaces[E],...L.spaces.slice(0,E),...L.spaces.slice(E+1)];return{...L,spaces:J}})},[]),O=r.useCallback(p=>{n(L=>({...L,spaces:L.spaces.map(E=>E.id===L.activeSpaceId?{...E,apps:p}:E)}))},[]),F=r.useMemo(()=>({spaces:a,activeSpaceId:l,isSwitching:s,currentSpace:g,currentIndex:M}),[a,l,s,g,M]),b=r.useMemo(()=>({switchToNextSpace:x,switchToSpace:D,addSpace:N,deleteSpace:I,renameSpace:u,updateCurrentSpaceApps:O,importSpace:j,importMultipleSpaces:y,pinSpace:C,setIsSwitching:i}),[x,D,N,I,u,O,j,y,C]);return o.jsx(An.Provider,{value:F,children:o.jsx(zn.Provider,{value:b,children:e})})}function pn(){const e=r.useContext(An),t=r.useContext(zn);if(!e||!t)throw new Error("useSpaces must be used within a SpacesProvider");return{...e,...t}}const hn=r.createContext(void 0),Cn=r.createContext(void 0),Ln=r.createContext(void 0),Dr=({children:e})=>{const{currentSpace:t,updateCurrentSpaceApps:n}=pn(),[s,i]=r.useState(t.apps),[c,a]=r.useState(qn),[l,g]=r.useState(!1),[M,d]=r.useState(null),[x,D]=r.useState(null),[N,I]=r.useState(null),[u,j]=r.useState(!1);r.useEffect(()=>{i(t.apps)},[t.id,t.apps]);const y=r.useCallback(T=>{i(S=>{const G=typeof T=="function"?T(S):T;return setTimeout(()=>n(G),0),G})},[n]),C=fe.useRef(!1);r.useEffect(()=>{if(!C.current&&t.apps.length===0&&s.length===0&&t.name==="Main"){C.current=!0;const S=[{id:"bilibili",name:"Bilibili",url:"https://www.bilibili.com/",type:"app"},{id:"notion",name:"Notion",url:"https://www.notion.so/",type:"app"},{id:"notion-calendar",name:"NotionCalendar",url:"https://calendar.notion.so/",type:"app"},{id:"gemini",name:"Gemini",url:"https://gemini.google.com/app",type:"app"},{id:"jike",name:"即刻",url:"https://web.okjike.com",type:"app"},{id:"behance",name:"Behance",url:"https://www.behance.net/",type:"app"},{id:"x",name:"X",url:"https://x.com/",type:"app"},{id:"chatgpt",name:"ChatGPT",url:"https://chatgpt.com/",type:"app"},{id:"claude",name:"Claude",url:"https://claude.ai/new",type:"app"}];S.forEach(Y=>{Y.type==="folder"&&Y.items&&(Y.icon=ke(Y.items))}),y(S),(async()=>{let Y=!0;const w=(await Promise.all(S.map(async m=>{if(m.type==="folder"&&m.items){const $=(await Promise.all(m.items.map(async X=>{if(X.url)try{const{url:ne}=await vt(X.url);return{id:X.id,icon:ne}}catch{return null}return null}))).filter(X=>X!==null);if($.length>0)return{id:m.id,isFolder:!0,subItems:$}}else if(m.url)try{const{url:v}=await vt(m.url);return{id:m.id,icon:v}}catch{}return null}))).filter(m=>m!==null);if(Y)return y(m=>m.map(v=>{const $=w.find(X=>X&&X.id===v.id);if(!$)return v;if($.isFolder&&v.type==="folder"&&v.items){const X=v.items.map(ne=>{const q=$.subItems?.find(V=>V.id===ne.id);return q?{...ne,icon:q.icon}:ne});return{...v,items:X,icon:ke(X)}}else if(!$.isFolder&&$.icon)return{...v,icon:$.icon};return v})),()=>{Y=!1}})()}const T=ie.getSearchEngine();T&&a(T)},[]),r.useEffect(()=>{ie.saveSearchEngine(c)},[c]);const O=r.useCallback((T,S)=>{const G=S.find(W=>W.id===T);if(!G||G.type!=="folder"||!G.items)return S;const Y=S.findIndex(W=>W.id===T);if(Y===-1)return S;if(G.items.length===0)return S.filter(W=>W.id!==T);if(G.items.length===1){const W=G.items[0],w=[...S];return w[Y]=W,w}return S},[]),F=r.useCallback(T=>{g(T)},[]),b=r.useCallback(T=>{a(T)},[]),p=r.useCallback(T=>{d(T),T||D(null)},[]),L=r.useCallback(T=>{window.confirm(`确定要删除 "${T.name}" 吗？${T.type==="folder"?"文件夹内的所有内容也将被删除。":""}`)&&(y(S=>S.filter(Y=>Y.id!==T.id)),M===T.id&&d(null))},[M]),E=r.useCallback((T,S)=>{if(S){const G=Y=>Y.map(W=>W.id===S.id?{...W,...T}:W.type==="folder"&&W.items?{...W,items:G(W.items)}:W);y(Y=>G(Y))}else{const G={id:`item-${Date.now()}`,name:T.name||"",url:T.url,icon:T.icon,type:"app"};y(Y=>[...Y,G])}},[]),Q=r.useCallback(T=>{const S=T.map(G=>G.type==="folder"&&G.items&&G.items.length>0?{...G,icon:ke(G.items)}:G);y(S)},[]),J=r.useCallback((T,S)=>{y(G=>G.map(Y=>Y.id===T&&Y.type==="folder"?{...Y,items:S,icon:ke(S)}:Y))},[]),K=r.useCallback((T,S)=>{y(G=>{const Y=G.find(W=>W.id===T);if(Y&&Y.type==="folder"&&Y.items){const W=Y.items.filter(v=>v.id!==S.id);let w=G.map(v=>v.id===T?{...v,items:W,icon:ke(W)}:v);w=O(T,w);const m=w.find(v=>v.id===T);return(!m||m.type!=="folder")&&d(null),w}return G})},[O]),U=r.useCallback((T,S)=>{M&&y(G=>{const Y=G.find(V=>V.id===M);if(!Y||Y.type!=="folder"||!Y.items)return G;const W=Y.items.filter(V=>V.id!==T.id);let w=G.map(V=>V.id===M?{...V,items:W,icon:W.length>0?ke(W):void 0}:V);const m=O(M,w),v=m.find(V=>V.id===M);(!v||v.type!=="folder")&&d(null);const $=document.querySelector('[data-dock-container="true"]');if(!$){const V=[...m],ue=V.findIndex(Ie=>Ie.id===T.id);return ue!==-1&&V.splice(ue,1),V.push(T),V}const X=Array.from($.querySelectorAll('[data-dock-item-wrapper="true"]'));let ne=m.length;for(let V=0;V<X.length;V++){const ue=X[V].getBoundingClientRect(),Ie=ue.left+ue.width/2;if(S.x<Ie){ne=V;break}}let q=m.filter(V=>V.id!==T.id);return ne=Math.max(0,Math.min(ne,q.length)),q.splice(ne,0,T),q})},[M,O]),P=r.useCallback(T=>{!M||T.type==="folder"||y(S=>{const G=S.find(W=>W.id===M);if(!G||G.type!=="folder")return S;const Y=[...G.items||[],T];return S.map(W=>W.id===M?{...W,items:Y,icon:ke(Y)}:W).filter(W=>W.id!==T.id)})},[M]),H=r.useCallback((T,S)=>{if(S.type!=="folder")return;let G=[];T.type==="folder"&&T.items?G=T.items:G=[T],y(Y=>Y.map(W=>{if(W.id===S.id){const w=new Set((W.items||[]).map($=>$.id)),m=G.filter($=>!w.has($.id)),v=[...W.items||[],...m];return{...W,items:v,icon:ke(v)}}return W}).filter(W=>W.id!==T.id))},[]),k=r.useMemo(()=>({dockItems:s,selectedSearchEngine:c,setDockItems:y,setSelectedSearchEngine:b,handleItemSave:E,handleItemsReorder:Q,handleItemDelete:L,handleFolderItemsReorder:J,handleFolderItemDelete:K,handleDragFromFolder:U,handleDragToFolder:P,handleDropOnFolder:H}),[s,c,E,Q,L,J,K,U,P,H]),_=r.useMemo(()=>({isEditMode:l,openFolderId:M,folderAnchor:x,setIsEditMode:F,setOpenFolderId:p,setFolderAnchor:D}),[l,M,x,F,p]),z=r.useMemo(()=>({draggingItem:N,setDraggingItem:I,folderPlaceholderActive:u,setFolderPlaceholderActive:j}),[N,u]);return o.jsx(hn.Provider,{value:k,children:o.jsx(Cn.Provider,{value:_,children:o.jsx(Ln.Provider,{value:z,children:e})})})},Nr=()=>{const e=r.useContext(hn);if(e===void 0)throw new Error("useDockData must be used within a DockProvider");return e},Pt=()=>{const e=r.useContext(Cn);if(e===void 0)throw new Error("useDockUI must be used within a DockProvider");return e},Sn=()=>{const e=r.useContext(Ln);if(e===void 0)throw new Error("useDockDrag must be used within a DockProvider");return e},xr=()=>{const e=()=>typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[t,n]=r.useState(e);return r.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)"),i=c=>{n(c.matches?"dark":"light")};return s.addEventListener?(s.addEventListener("change",i),()=>s.removeEventListener("change",i)):(s.addListener(i),()=>s.removeListener(i))},[]),t},jr="EclipseTabDB",je="wallpapers",Tr=1;class yr{dbPromise=null;getDB(){return this.dbPromise||(this.dbPromise=new Promise((t,n)=>{if(typeof window>"u"||!window.indexedDB){n(new Error("IndexedDB is not supported"));return}try{const s=window.indexedDB.open(jr,Tr);s.onerror=i=>{this.dbPromise=null;const c=i.target.error;n(c||new Error("Failed to open IndexedDB"))},s.onsuccess=()=>t(s.result),s.onupgradeneeded=i=>{const c=i.target.result;c.objectStoreNames.contains(je)||c.createObjectStore(je,{keyPath:"id"})}}catch(s){this.dbPromise=null,n(s)}})),this.dbPromise}async save(t){try{const n=await this.getDB();return new Promise((s,i)=>{const l=n.transaction(je,"readwrite").objectStore(je).put(t);l.onsuccess=()=>s(t.id),l.onerror=()=>i(l.error)})}catch(n){throw n}}async saveMultiple(t){if(t.length===0)return[];try{const n=await this.getDB();return new Promise((s,i)=>{const c=n.transaction(je,"readwrite"),a=c.objectStore(je),l=[];t.forEach(g=>{a.put(g),l.push(g.id)}),c.oncomplete=()=>s(l),c.onerror=()=>i(c.error)})}catch(n){throw n}}async get(t){try{const n=await this.getDB();return new Promise((s,i)=>{const l=n.transaction(je,"readonly").objectStore(je).get(t);l.onsuccess=()=>s(l.result||null),l.onerror=()=>i(l.error)})}catch{return null}}async remove(t){try{const n=await this.getDB();return new Promise((s,i)=>{const l=n.transaction(je,"readwrite").objectStore(je).delete(t);l.onsuccess=()=>s(),l.onerror=()=>i(l.error)})}catch(n){throw n}}async removeMultiple(t){if(t.length!==0)try{const n=await this.getDB();return new Promise((s,i)=>{const c=n.transaction(je,"readwrite"),a=c.objectStore(je);t.forEach(l=>{a.delete(l)}),c.oncomplete=()=>s(),c.onerror=()=>i(c.error)})}catch(n){throw n}}async getAll(){try{const t=await this.getDB();return new Promise((n,s)=>{const a=t.transaction(je,"readonly").objectStore(je).getAll();a.onsuccess=()=>n(a.result||[]),a.onerror=()=>s(a.error)})}catch{return[]}}}const lt=new yr,Er=15*1024*1024,mr=async e=>e.size<=Er?e:new Promise((t,n)=>{const s=new Image,i=URL.createObjectURL(e);s.onload=()=>{URL.revokeObjectURL(i);const c=document.createElement("canvas");c.width=s.width,c.height=s.height;const a=c.getContext("2d");if(!a){t(e);return}a.drawImage(s,0,0),c.toBlob(l=>{l&&l.size<e.size?t(l):t(e)},"image/webp",.8)},s.onerror=()=>{URL.revokeObjectURL(i),n(new Error("Failed to load image for compression"))},s.src=i}),fr=async e=>new Promise((t,n)=>{const s=new Image,i=URL.createObjectURL(e);s.onload=()=>{URL.revokeObjectURL(i);const c=document.createElement("canvas"),a=200;c.width=a,c.height=a;const l=c.getContext("2d");if(!l){n(new Error("Failed to get canvas context"));return}const g=Math.min(s.width,s.height),M=(s.width-g)/2,d=(s.height-g)/2,x=g,D=g;l.drawImage(s,M,d,x,D,0,0,a,a),c.toBlob(N=>{N?t(N):n(new Error("Failed to generate thumbnail blob"))},"image/webp",.6)},s.onerror=()=>{URL.revokeObjectURL(i),n(new Error("Failed to load image for thumbnail"))},s.src=i}),Ar=()=>{const[e,t]=r.useState(!0),[n,s]=r.useState(!1),[i,c]=r.useState(null),a=r.useRef(new Set);r.useEffect(()=>{(typeof window>"u"||!window.indexedDB)&&(t(!1),c(new Error("IndexedDB is not supported in this browser")))},[]),r.useEffect(()=>{const D=a;return()=>{D.current.forEach(N=>URL.revokeObjectURL(N))}},[]);const l=r.useCallback(D=>{const N=URL.createObjectURL(D);return a.current.add(N),N},[]),g=r.useCallback(async D=>{if(!e)throw new Error("Storage not supported");s(!0);try{const[N,I]=await Promise.all([mr(D),fr(D).catch(y=>{})]),u=`wallpaper_${Date.now()}`,j={id:u,data:N,thumbnail:I,createdAt:Date.now()};return await lt.save(j),u}catch(N){const I=N instanceof Error?N:new Error("Failed to save wallpaper");throw c(I),I}finally{s(!1)}},[e]),M=r.useCallback(async D=>{if(!e)return null;try{const N=await lt.get(D);return N?N.data:null}catch(N){const I=N instanceof Error?N:new Error("Failed to get wallpaper");return c(I),null}},[e]),d=r.useCallback(async D=>{if(e)try{await lt.remove(D)}catch(N){const I=N instanceof Error?N:new Error("Failed to delete wallpaper");throw c(I),I}},[e]),x=r.useCallback(async()=>{if(!e)return[];try{return(await lt.getAll()).sort((N,I)=>I.createdAt-N.createdAt)}catch(D){const N=D instanceof Error?D:new Error("Failed to get recent wallpapers");return c(N),[]}},[e]);return{saveWallpaper:g,getWallpaper:M,deleteWallpaper:d,getRecentWallpapers:x,createWallpaperUrl:l,isSupported:e,isProcessing:n,error:i}},zr=[{id:"theme-default",name:"默认",gradient:"#F3F3F3",solid:"#F3F3F3"},{id:"gradient-1",name:"紫粉",gradient:"linear-gradient(to top, #a18cd1 0%, #fbc2eb 100%)",solid:"#FEFAEF",solidDark:"#8B7A5E"},{id:"gradient-2",name:"粉蓝",gradient:"linear-gradient(to top, #fbc2eb 0%, #a6c1ee 100%)",solid:"#E9EDF6",solidDark:"#6B7B9B"},{id:"gradient-3",name:"紫白",gradient:"linear-gradient(to top, #cd9cf2 0%, #f6f3ff 100%)",solid:"#E8E6F1",solidDark:"#6E6B7C"},{id:"gradient-4",name:"蓝灰",gradient:"linear-gradient(to top, #6a85b6 0%, #bac8e0 100%)",solid:"#E3F8FD",solidDark:"#6A8FA1"},{id:"gradient-5",name:"蓝紫",gradient:"linear-gradient(to top, #505285 0%, #585e92 12%, #65689f 25%, #7474b0 37%, #7e7ebb 50%, #8389c7 62%, #9795d4 75%, #a2a1dc 87%, #b5aee4 100%)",solid:"#F1F6EF",solidDark:"#7C8A77"},{id:"gradient-6",name:"灰紫",gradient:"linear-gradient(to top, #bdc2e8 0%, #bdc2e8 1%, #e6dee9 100%)",solid:"#F2EADD",solidDark:"#847B6F"},{id:"gradient-7",name:"微光",gradient:"linear-gradient(to bottom, #323232 0%, #3F3F3F 40%, #1C1C1C 150%), linear-gradient(to top, rgba(255,255,255,0.40) 0%, rgba(0,0,0,0.25) 200%)",solid:"#FBEEE6",solidDark:"#8E7D73",blendMode:"multiply"},{id:"gradient-8",name:"深蓝",gradient:"linear-gradient(to top, #0c3483 0%, #a2b6df 100%, #6b8cce 100%, #a2b6df 100%)",solid:"#BDC2E8",solidDark:"#5F6380"},{id:"gradient-9",name:"流彩",gradient:"linear-gradient(-225deg, #473B7B 0%, #3584A7 51%, #30D2BE 100%)",solid:"#323232",solidDark:"#1A1A1A"}],pr=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" fill="currentColor"/>
</svg>
`,hr=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M18.7176 4.78256C19.4986 5.56361 19.4986 6.82994 18.7176 7.61099L14.8285 11.5001L18.7176 15.3892C19.4986 16.1702 19.4986 17.4365 18.7176 18.2176C17.9365 18.9986 16.6702 18.9986 15.8892 18.2176L12.0001 14.3285L8.11099 18.2176C7.32994 18.9986 6.06361 18.9986 5.28256 18.2176C4.50152 17.4365 4.50152 16.1702 5.28256 15.3892L9.17165 11.5001L5.28256 7.61099C4.50152 6.82994 4.50152 5.56361 5.28256 4.78256C6.06361 4.00152 7.32994 4.00152 8.11099 4.78256L12.0001 8.67165L15.8892 4.78256C16.6702 4.00152 17.9365 4.00152 18.7176 4.78256Z" fill="currentColor"/>
</svg>
`;function Jt(e){return e.replace(/\r?\n/g,"").trim()}const kn={point:{id:"point",name:"Circle",nameZh:"Circle",svgRaw:Jt(pr),iconSize:20,tileSize:36,supportsColor:!0},cross:{id:"cross",name:"Cross",nameZh:"Cross",svgRaw:Jt(hr),iconSize:20,tileSize:54,supportsColor:!0}};function Cr(e,t="rgba(128, 128, 128, 0.1)"){const n=kn[e];if(!n)return"";const{svgRaw:s,iconSize:i,tileSize:c}=n,a=(c-i)/2,l=s.replace(/<svg[^>]*>/,"").replace(/<\/svg>/,"").replace(/currentColor/g,t),g=`<svg width="${c}" height="${c}" viewBox="0 0 ${c} ${c}" xmlns="http://www.w3.org/2000/svg"><svg x="${a}" y="${a}" width="${i}" height="${i}" viewBox="0 0 24 24">`+l+"</svg></svg>";return`data:image/svg+xml;base64,${btoa(g)}`}function Kt(e){if(e==="none")return"cover";const t=kn[e];return t?`${t.tileSize}px ${t.tileSize}px`:"48px 48px"}function Lr(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var i in n)s[n[i]]=i;var c={};e.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,g,M=s[this.toHex()];if(M)return M;if(a?.closest){var d=this.toRgb(),x=1/0,D="black";if(!c.length)for(var N in n)c[N]=new e(n[N]).toRgb();for(var I in n){var u=(l=d,g=c[I],Math.pow(l.r-g.r,2)+Math.pow(l.g-g.g,2)+Math.pow(l.b-g.b,2));u<x&&(x=u,D=I)}return D}},t.string.push([function(a){var l=a.toLowerCase(),g=l==="transparent"?"#0000":n[l];return g?new e(g).toRgb():null},"name"])}var we=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e>t?e:t},St=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},kt=function(e){return 255*(e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e)},Bt=96.422,Ft=100,Wt=82.521,Sr=function(e){var t,n,s={x:.9555766*(t=e).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return n={r:kt(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:kt(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:kt(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:e.a},{r:we(n.r,0,255),g:we(n.g,0,255),b:we(n.b,0,255),a:we(n.a)}},kr=function(e){var t=St(e.r),n=St(e.g),s=St(e.b);return function(i){return{x:we(i.x,0,Bt),y:we(i.y,0,Ft),z:we(i.z,0,Wt),a:we(i.a)}}(function(i){return{x:1.0478112*i.x+.0228866*i.y+-.050127*i.z,y:.0295424*i.x+.9904844*i.y+-.0170491*i.z,z:-.0092345*i.x+.0150436*i.y+.7521316*i.z,a:i.a}}({x:100*(.4124564*t+.3575761*n+.1804375*s),y:100*(.2126729*t+.7151522*n+.072175*s),z:100*(.0193339*t+.119192*n+.9503041*s),a:e.a}))},ot=216/24389,Je=24389/27,qt=function(e){var t=kr(e),n=t.x/Bt,s=t.y/Ft,i=t.z/Wt;return n=n>ot?Math.cbrt(n):(Je*n+16)/116,{l:116*(s=s>ot?Math.cbrt(s):(Je*s+16)/116)-16,a:500*(n-s),b:200*(s-(i=i>ot?Math.cbrt(i):(Je*i+16)/116)),alpha:t.a}},Or=function(e,t,n){var s,i=qt(e),c=qt(t);return function(a){var l=(a.l+16)/116,g=a.a/500+l,M=l-a.b/200;return Sr({x:(Math.pow(g,3)>ot?Math.pow(g,3):(116*g-16)/Je)*Bt,y:(a.l>8?Math.pow((a.l+16)/116,3):a.l/Je)*Ft,z:(Math.pow(M,3)>ot?Math.pow(M,3):(116*M-16)/Je)*Wt,a:a.alpha})}({l:we((s={l:i.l*(1-n)+c.l*n,a:i.a*(1-n)+c.a*n,b:i.b*(1-n)+c.b*n,alpha:i.alpha*(1-n)+c.alpha*n}).l,0,400),a:s.a,b:s.b,alpha:we(s.alpha)})};function wr(e){function t(n,s,i){i===void 0&&(i=5);for(var c=[],a=1/(i-1),l=0;l<=i-1;l++)c.push(n.mix(s,a*l));return c}e.prototype.mix=function(n,s){s===void 0&&(s=.5);var i=n instanceof e?n:new e(n),c=Or(this.toRgb(),i.toRgb(),s);return new e(c)},e.prototype.tints=function(n){return t(this,"#fff",n)},e.prototype.shades=function(n){return t(this,"#000",n)},e.prototype.tones=function(n){return t(this,"#808080",n)}}Fn([Lr,wr]);function br(e){const t=e.match(/#[a-fA-F0-9]{6}/);let n="#808080";if(t)n=t[0];else{const i=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);i&&(n=`rgb(${i[1]}, ${i[2]}, ${i[3]})`)}return Wn(n).saturate(.1).darken(.2).alpha(.4).toRgbString()}const ut={light:"#f1f1f1",dark:"#2C2C2E"},On=r.createContext(void 0),wn=r.createContext(void 0),en=20*1024*1024,Qr=e=>{if(e.startsWith("url("))return!0;const t=[],n=/#[0-9A-Fa-f]{6}/g,s=/rgba?\([^)]+\)/g,i=e.match(n);i&&t.push(...i);const c=e.match(s);if(c&&t.push(...c),t.length===0)return!1;let a=0,l=0;return t.forEach(d=>{let x=0,D=0,N=0;if(d.startsWith("#")){const u=d.substring(1);x=parseInt(u.substring(0,2),16),D=parseInt(u.substring(2,4),16),N=parseInt(u.substring(4,6),16)}else if(d.startsWith("rgb")){const u=d.match(/\d+/g);u&&u.length>=3&&(x=parseInt(u[0]),D=parseInt(u[1]),N=parseInt(u[2]))}const I=(.299*x+.587*D+.114*N)/255;a+=I,I>l&&(l=I)}),(a/t.length+l)/2>.4},vr=({children:e})=>{const t=xr(),{saveWallpaper:n,getWallpaper:s,createWallpaperUrl:i}=Ar(),[c,a]=r.useState(()=>ie.getTheme()||"default"),[l,g]=r.useState(()=>ie.getFollowSystem()),[M,d]=r.useState(()=>ie.getWallpaper()),[x,D]=r.useState(()=>ie.getWallpaperId()),[N]=r.useState(()=>ie.getLastWallpaper()),[I,u]=r.useState(()=>ie.getGradient()),[j,y]=r.useState(()=>ie.getTexture()||"none"),[C,O]=r.useState(()=>ie.getDockPosition()),[F,b]=r.useState(()=>ie.getIconSize()),p=l?t:c,L=c==="default"&&!l;r.useEffect(()=>{x&&s(x).then(m=>{if(m){const v=i(m);d(v)}})},[x,s,i]);const E=r.useCallback(m=>{a(m),ie.saveTheme(m),l&&(g(!1),ie.saveFollowSystem(!1))},[l]),Q=r.useCallback(m=>{g(m),ie.saveFollowSystem(m)},[]),J=r.useCallback(m=>{d(m),ie.saveWallpaper(m),m||(D(null),ie.saveWallpaperId(null))},[]),K=r.useCallback(async m=>{D(m),ie.saveWallpaperId(m);const v=await s(m);if(v){const $=i(v);d($),ie.saveWallpaper(null)}},[s,i]),U=r.useCallback(async m=>{if(m.size>en)throw new Error(`图片大小不能超过 ${en/1024/1024}MB`);if(!m.type.startsWith("image/"))throw new Error("请选择图片文件");try{const v=await n(m);await K(v)}catch(v){throw v}},[n,K]),P=r.useCallback(m=>{u(m),ie.saveGradient(m)},[]),H=r.useCallback(m=>{y(m),ie.saveTexture(m)},[]),k=r.useCallback(m=>{O(m),ie.saveDockPosition(m)},[]),_=r.useCallback(m=>{b(m),ie.saveIconSize(m)},[]);r.useEffect(()=>{document.documentElement.setAttribute("data-theme",p)},[p]);const{backgroundValue:z,backgroundBaseValue:T,backgroundTextureValue:S,backgroundTextureTileSize:G,backgroundBlendMode:Y}=fe.useMemo(()=>{let m="",v="",$=null,X="cover",ne="normal";if(M)v=`url(${M})`,m=v;else{if(I){const q=zr.find(V=>V.id===I);q&&(q.id==="theme-default"?L?v="linear-gradient(180deg, #00020E 0%, #071633 25%, #3966AD 65%, #7e9ecb 100%)":v=p==="dark"?ut.dark:ut.light:L?v=q.gradient:v=q.solid,"blendMode"in q&&q.blendMode&&(ne=q.blendMode))}else L?v="linear-gradient(180deg, #00020E 0%, #071633 25%, #3966AD 65%, #7e9ecb 100%)":v=p==="dark"?ut.dark:ut.light;if(m=v,!L&&j!=="none"){const q=br(v);$=`url("${Cr(j,q)}")`,X=Kt(j),m=`${$}, ${v}`}}return{backgroundValue:m,backgroundBaseValue:v,backgroundTextureValue:$,backgroundTextureTileSize:X,backgroundBlendMode:ne}},[M,I,j,L,p]);r.useEffect(()=>{const m=document.documentElement;if(m.removeAttribute("data-texture"),L&&z){const $=Qr(z);m.setAttribute("data-background-brightness",$?"light":"dark")}else m.removeAttribute("data-background-brightness");if(m.style.setProperty("--background-custom",z),!L&&j!=="none"&&!M){const $=Kt(j);m.style.setProperty("--background-size",`${$}, cover`),m.style.setProperty("--background-position","0 0, center"),m.style.setProperty("--background-repeat","repeat, no-repeat")}else m.style.setProperty("--background-size","cover"),m.style.setProperty("--background-position","center"),m.style.setProperty("--background-repeat","no-repeat");Y!=="normal"?m.style.setProperty("--background-blend-mode",Y):m.style.removeProperty("--background-blend-mode"),m.style.setProperty("--icon-size",F==="small"?"52px":"64px")},[z,Y,L,F,j,M]);const W=r.useMemo(()=>({theme:p,followSystem:l,wallpaper:M,lastWallpaper:N,gradientId:I,texture:j,wallpaperId:x,backgroundValue:z,backgroundBaseValue:T,backgroundTextureValue:S,backgroundTextureTileSize:G,backgroundBlendMode:Y,dockPosition:C,iconSize:F}),[p,l,M,N,I,j,x,z,T,S,G,Y,C,F]),w=r.useMemo(()=>({setTheme:E,setFollowSystem:Q,setWallpaper:J,uploadWallpaper:U,setGradientId:P,setTexture:H,setWallpaperId:K,setDockPosition:k,setIconSize:_}),[E,Q,J,U,P,H,K,k,_]);return o.jsx(On.Provider,{value:W,children:o.jsx(wn.Provider,{value:w,children:e})})},at=()=>{const e=r.useContext(On);if(e===void 0)throw new Error("useThemeData must be used within a ThemeProvider");return e},Ur=()=>{const e=r.useContext(wn);if(e===void 0)throw new Error("useThemeActions must be used within a ThemeProvider");return e},ca=()=>{const e=at(),t=Ur();return{...e,...t}},_r="_searcher_vs9hs_3",Yr="_innerContainer_vs9hs_18",Rr="_divider_vs9hs_33",Pr="_searchInput_vs9hs_53",Br="_searchInfo_vs9hs_58",Fr="_label_vs9hs_66",Wr="_searchTool_vs9hs_77",Gr="_searchEngine_vs9hs_85",$r="_textInputContainer_vs9hs_99",Zr="_iconContainer_vs9hs_110",Vr="_asteriskIcon_vs9hs_126",Hr="_searchButtonIcon_vs9hs_160",Xr="_searchButtonLabel_vs9hs_170",me={searcher:_r,innerContainer:Yr,divider:Rr,searchInput:Pr,searchInfo:Br,label:Fr,searchTool:Wr,searchEngine:Gr,textInputContainer:$r,iconContainer:Zr,asteriskIcon:Vr,searchButtonIcon:Hr,searchButtonLabel:Xr},gt={google:{url:"https://suggestqueries.google.com/complete/search",buildUrl:e=>`https://suggestqueries.google.com/complete/search?client=chrome&q=${encodeURIComponent(e)}`,parseResponse:e=>Array.isArray(e)&&Array.isArray(e[1])?e[1]:[]},baidu:{url:"https://suggestion.baidu.com/su",buildUrl:e=>`https://suggestion.baidu.com/su?wd=${encodeURIComponent(e)}&action=opensearch`,parseResponse:e=>Array.isArray(e)&&Array.isArray(e[1])?e[1]:[]}};async function Jr(e){const t=e.trim();if(!t)return[];if(typeof chrome<"u"&&chrome.permissions)try{if(!await new Promise(s=>{chrome.permissions.contains({origins:["https://suggestqueries.google.com/*"]},i=>{chrome.runtime&&chrome.runtime.lastError?s(!1):s(!!i)})}))return[]}catch{return[]}else return[];try{const n=await fetch(gt.google.buildUrl(t),{method:"GET",headers:{Accept:"application/json"}});if(n.ok){const s=await n.json(),i=gt.google.parseResponse(s);if(i.length>0)return i}}catch{}try{const n=await fetch(gt.baidu.buildUrl(t),{method:"GET"});if(n.ok){const s=await n.json();return gt.baidu.parseResponse(s)}}catch{}return[]}function Kr(e){const[t,n]=r.useState([]),[s,i]=r.useState(!1),[c,a]=r.useState(null),l=r.useRef(""),g=r.useRef(null),M=r.useCallback(async d=>{const x=d.trim();if(!x){n([]),a(null),l.current=`cleared_${Date.now()}`;return}const D=`req_${Date.now()}`;l.current=D,g.current&&g.current.abort(),g.current=new AbortController,i(!0),a(null);try{const N=await Jr(x);l.current===D&&n(N)}catch(N){l.current===D&&(a(N instanceof Error?N:new Error("Failed to fetch suggestions")),n([]))}finally{l.current===D&&i(!1)}},[]);return r.useEffect(()=>{const d=setTimeout(()=>{M(e)},300);return()=>{clearTimeout(d)}},[e,M]),r.useEffect(()=>()=>{g.current&&g.current.abort()},[]),{suggestions:t,isLoading:s,error:c}}const qr={en:{settings:{position:"Position",center:"Center",bottom:"Bottom",iconSize:"Icon Size",large:"Large",small:"Small",suggestions:"Suggestions",on:"On",off:"Off",language:"Language",followSystem:"Follow System",lightTheme:"Light Theme",darkTheme:"Dark Theme",defaultTheme:"Default Theme",noTexture:"No Texture",confirmDelete:"Delete Confirmation"},search:{searchBy:"Search by",searchBySuffix:"",searchButton:"Search",systemDefault:"System Default"},contextMenu:{addSticker:"Add Sticker",uploadImage:"Upload Image",editMode:"Edit Mode",exitEditMode:"Exit Edit Mode",settings:"Settings",copyImage:"Copy Image",exportImage:"Export Image",copyText:"Copy Text",editSticker:"Edit Sticker",exportAsImage:"Export as Image",deleteSticker:"Delete Sticker",edit:"Edit",delete:"Delete"},modal:{edit:"Edit",addNew:"Add new",address:"Address",name:"Name",icon:"Icon",getFromWebsite:"Get from website",useTextIcon:"Use Text Icon",uploadNewIcon:"Upload new icon",cancel:"Cancel",save:"Save",add:"Add"},space:{title:"Space",addSpace:"Add space",renameSpace:"Rename Space",rename:"Rename",deleteSpace:"Delete space",importSpace:"Import Space",exportSpace:"Export current space",exportAllSpaces:"Export All Space",pinToTop:"Pin to Top",alreadyAtTop:"Already at the top",deleteConfirm:`Are you sure you want to delete the space "{name}"?
All applications in this space will be deleted.`,importFailed:"Import failed: ",inputName:"Input space name",confirm:"Confirm",tooltip:"Current space",switch:"Left click: Switch space",manage:"Right click: Manage space",deleteStickerConfirm:"Are you sure you want to delete this sticker?"},textInput:{placeholder:"Enter text...",s:"S",m:"M",l:"L",cancel:"Cancel",confirm:"Confirm"}},zh:{settings:{position:"布局位置",center:"居中",bottom:"底部",iconSize:"图标大小",large:"大",small:"小",suggestions:"搜索建议",on:"开启",off:"关闭",language:"语言设置",followSystem:"跟随系统",lightTheme:"浅色模式",darkTheme:"深色模式",defaultTheme:"默认主题",noTexture:"无纹理",confirmDelete:"删除二次确认"},search:{searchBy:"使用",searchBySuffix:"",searchButton:"搜索",systemDefault:"系统默认"},contextMenu:{addSticker:"添加贴纸",uploadImage:"上传图片",editMode:"编辑模式",exitEditMode:"退出编辑",settings:"设置",copyImage:"复制图片",exportImage:"导出图片",copyText:"复制文本",editSticker:"编辑贴纸",exportAsImage:"导出为图片",deleteSticker:"删除贴纸",edit:"编辑",delete:"删除"},modal:{edit:"编辑",addNew:"添加新项",address:"网址地址",name:"名称",icon:"图标",getFromWebsite:"获取网站图标",useTextIcon:"使用文字图标",uploadNewIcon:"上传新图标",cancel:"取消",save:"保存",add:"添加"},space:{title:"空间",addSpace:"添加空间",renameSpace:"重命名空间",rename:"重命名",deleteSpace:"删除空间",importSpace:"导入空间",exportSpace:"导出当前空间",exportAllSpaces:"导出所有空间",pinToTop:"置顶空间",alreadyAtTop:"已在顶部",deleteConfirm:`确定要删除空间 "{name}" 吗？
该空间下的所有应用都将被删除。`,importFailed:"导入失败：",inputName:"输入空间名称",confirm:"确认",tooltip:"当前空间",switch:"左键：切换空间",manage:"右键：管理空间",deleteStickerConfirm:"确定要删除这个贴纸吗？"},textInput:{placeholder:"输入文本...",s:"小",m:"中",l:"大",cancel:"取消",confirm:"确认"}}},bn=r.createContext(void 0),es=({children:e})=>{const[t,n]=r.useState(()=>{const i=localStorage.getItem("app_language");return i==="en"||i==="zh"?i:navigator.language.toLowerCase().startsWith("zh")?"zh":"en"});r.useEffect(()=>{localStorage.setItem("app_language",t)},[t]);const s={language:t,setLanguage:n,t:qr[t]};return o.jsx(bn.Provider,{value:s,children:e})},We=()=>{const e=r.useContext(bn);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},ts="_suggestionsList_8p83l_1",ns="_suggestionItem_8p83l_35",rs="_active_8p83l_63",ss="_suggestionText_8p83l_71",dt={suggestionsList:ts,suggestionItem:ns,active:rs,suggestionText:ss},Ke=(e,t=300)=>{e.style.transition="none",e.style.opacity="0",e.style.transform="scale(0.9)",e.style.filter="blur(5px)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.style.transition=`opacity ${t}ms cubic-bezier(0.23, 1, 0.32, 1), transform ${t}ms cubic-bezier(0.23, 1, 0.32, 1), filter ${t}ms cubic-bezier(0.23, 1, 0.32, 1)`,e.style.opacity="1",e.style.transform="scale(1)",e.style.filter="blur(0)",setTimeout(()=>{e.style.transform="",e.style.filter="",e.style.transition=""},t)})})},Be=(e,t=300,n)=>{e.style.transition="none",e.style.opacity="1",e.style.transform="scale(1)",e.style.filter="blur(0)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.style.transition=`opacity ${t}ms cubic-bezier(0.755, 0.05, 0.855, 0.06), transform ${t}ms cubic-bezier(0.755, 0.05, 0.855, 0.06), filter ${t}ms cubic-bezier(0.755, 0.05, 0.855, 0.06)`,e.style.opacity="0",e.style.transform="scale(0.9)",e.style.filter="blur(5px)",n&&setTimeout(n,t)})})},is=({suggestions:e,activeIndex:t,onSelect:n,onHover:s,isExiting:i=!1,anchorRect:c})=>{const a=r.useRef(null),[l,g]=r.useState({});return r.useEffect(()=>{c&&g({position:"fixed",left:`${c.left}px`,bottom:`${window.innerHeight-c.top}px`,width:`${c.width}px`})},[c]),r.useEffect(()=>{a.current&&!i&&Ke(a.current)},[]),r.useEffect(()=>{i&&a.current&&Be(a.current,300)},[i]),e.length===0||!c?null:Ye.createPortal(o.jsx("ul",{ref:a,className:dt.suggestionsList,style:l,children:e.map((M,d)=>o.jsx("li",{className:`${dt.suggestionItem} ${d===t?dt.active:""}`,onClick:()=>n(M),onMouseEnter:()=>s(d),children:o.jsx("span",{className:dt.suggestionText,children:M})},d))}),document.body)},os=({searchEngine:e,onSearch:t,onSearchEngineClick:n,containerStyle:s})=>{const[i,c]=r.useState(""),[a,l]=r.useState(!1),[g,M]=r.useState(-1),d=r.useRef(null),{suggestions:x}=Kr(i),D=a&&x.length>0,[N,I]=r.useState(!1),[u,j]=r.useState(!1);r.useEffect(()=>{if(D)I(!0),j(!1);else if(N){j(!0);const E=setTimeout(()=>{I(!1),j(!1)},300);return()=>clearTimeout(E)}},[D,N]),r.useEffect(()=>{d.current?.focus()},[]),r.useEffect(()=>{M(-1)},[x]);const y=E=>{if(E.trim()){try{const Q=new URL(E);window.open(Q.toString(),"_blank")}catch{t(E)}c(""),l(!1)}},C=E=>{E.preventDefault(),y(i)},O=E=>{if(N&&x.length>0){if(E.key==="ArrowDown"){E.preventDefault(),M(Q=>(Q+1)%x.length);return}if(E.key==="ArrowUp"){E.preventDefault(),M(Q=>(Q-1+x.length)%x.length);return}}E.key==="Enter"&&(E.preventDefault(),g>=0&&x[g]&&N?y(x[g]):y(i))},F=r.useRef(null),[b,p]=r.useState(null);r.useEffect(()=>{if(N&&F.current){const E=F.current.getBoundingClientRect();p(E)}},[N,x]);const{t:L}=We();return o.jsxs("header",{ref:F,className:me.searcher,style:s,children:[N&&x.length>0&&o.jsx(is,{suggestions:x,activeIndex:g,onSelect:E=>y(E),onHover:E=>M(E),isExiting:u,anchorRect:b}),o.jsxs("div",{className:me.innerContainer,children:[o.jsx("div",{className:me.divider}),o.jsxs("div",{className:me.searchInfo,children:[o.jsx("p",{className:me.label,children:L.search.searchBy}),o.jsx("div",{className:me.searchTool,children:o.jsxs("p",{className:me.searchEngine,onClick:E=>{const Q=E.currentTarget.getBoundingClientRect();n(Q)},children:[e.id==="default"?L.search.systemDefault:e.name,L.search.searchBySuffix]})})]}),o.jsx("div",{className:me.textInputContainer,children:o.jsx("input",{ref:d,type:"text",className:me.searchInput,placeholder:"",value:i,onChange:E=>c(E.target.value),onKeyDown:O,onFocus:()=>l(!0),onBlur:()=>{setTimeout(()=>l(!1),200)}})}),o.jsxs("div",{className:me.iconContainer,onClick:C,children:[o.jsx("div",{className:me.asteriskIcon,children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M8.25 3.00002C7.05653 3.00002 5.91193 3.47412 5.06802 4.31803C4.22411 5.16194 3.75 6.30654 3.75 7.50001C3.75 8.69349 4.22411 9.83808 5.06802 10.682C5.91193 11.5259 7.05653 12 8.25 12C9.44347 12 10.5881 11.5259 11.432 10.682C12.2759 9.83808 12.75 8.69349 12.75 7.50001C12.75 6.30654 12.2759 5.16194 11.432 4.31803C10.5881 3.47412 9.44347 3.00002 8.25 3.00002ZM2.25 7.50001C2.25014 6.54516 2.47816 5.60412 2.91513 4.75512C3.3521 3.90611 3.98538 3.17366 4.76235 2.61862C5.53933 2.06359 6.43755 1.70201 7.38237 1.56393C8.32719 1.42586 9.29132 1.51527 10.1946 1.82474C11.0979 2.13422 11.9144 2.65481 12.576 3.34326C13.2377 4.03171 13.7254 4.86814 13.9988 5.78302C14.2722 6.6979 14.3233 7.66482 14.1478 8.60342C13.9724 9.54201 13.5754 10.4252 12.99 11.1795L17.0303 15.2198C17.1669 15.3612 17.2425 15.5507 17.2408 15.7473C17.239 15.944 17.1602 16.1321 17.0211 16.2711C16.8821 16.4102 16.6939 16.4891 16.4973 16.4908C16.3007 16.4925 16.1112 16.4169 15.9698 16.2803L11.9295 12.24C11.0426 12.9286 9.98027 13.3545 8.86332 13.4692C7.74638 13.584 6.61964 13.3831 5.61124 12.8893C4.60283 12.3955 3.75322 11.6286 3.15902 10.6759C2.56482 9.72317 2.24988 8.62284 2.25 7.50001Z",fill:"currentColor"}),o.jsx("path",{d:"M2.25 7.50001C2.25014 6.54516 2.47816 5.60412 2.91513 4.75512C3.3521 3.90611 3.98538 3.17366 4.76235 2.61862C5.53933 2.06359 6.43755 1.70201 7.38237 1.56393C8.32719 1.42586 9.29132 1.51527 10.1946 1.82474C11.0979 2.13422 11.9144 2.65481 12.576 3.34326C13.2377 4.03171 13.7254 4.86814 13.9988 5.78302C14.2722 6.6979 14.3233 7.66482 14.1478 8.60342C13.9724 9.54201 13.5754 10.4252 12.99 11.1795L17.0303 15.2198C17.1669 15.3612 17.2425 15.5507 17.2408 15.7473C17.239 15.944 17.1602 16.1321 17.0211 16.2711C16.8821 16.4102 16.6939 16.4891 16.4973 16.4908C16.3007 16.4925 16.1112 16.4169 15.9698 16.2803L11.9295 12.24C11.0426 12.9286 9.98027 13.3545 8.86332 13.4692C7.74638 13.584 6.61964 13.3831 5.61124 12.8893C4.60283 12.3955 3.75322 11.6286 3.15902 10.6759C2.56482 9.72317 2.24988 8.62284 2.25 7.50001ZM8.25 3.00002C7.65905 3.00002 7.07389 3.11641 6.52792 3.34255C5.98196 3.5687 5.48588 3.90017 5.06802 4.31803C4.65016 4.73589 4.31869 5.23197 4.09254 5.77794C3.8664 6.3239 3.75 6.90906 3.75 7.50001C3.75 8.09096 3.8664 8.67612 4.09254 9.22209C4.31869 9.76805 4.65016 10.2641 5.06802 10.682C5.48588 10.9999 5.98196 11.4313 6.52792 11.6575C7.07389 11.8836 7.65905 12 8.25 12C9.44347 12 10.5881 11.5259 11.432 10.682C12.2759 9.83808 12.75 8.69349 12.75 7.50001C12.75 6.30654 12.2759 5.16194 11.432 4.31803C10.5881 3.47412 9.44347 3.00002 8.25 3.00002Z",fill:"currentColor"})]})}),o.jsx("p",{className:me.searchButtonLabel,children:L.search.searchButton}),o.jsx("div",{className:me.searchButtonIcon,children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M15 2.25C15.1989 2.25 15.3897 2.32902 15.5303 2.46967C15.671 2.61032 15.75 2.80109 15.75 3V4.083C15.75 5.31525 15.75 6.28575 15.6863 7.0665C15.6211 7.86375 15.4861 8.529 15.1778 9.1335C14.7043 10.1214 13.9009 10.9246 12.9128 11.4278C12.3083 11.7353 11.6431 11.871 10.8458 11.9363C10.0651 12 9.09461 12 7.86236 12H4.83986L7.30961 14.4697C7.4463 14.6112 7.52189 14.8007 7.52019 14.9973C7.51848 15.1939 7.43959 15.3821 7.30054 15.5211C7.16148 15.6602 6.97338 15.739 6.77672 15.7408C6.58007 15.7425 6.39062 15.6669 6.24911 15.5302L2.49911 11.7802C2.35851 11.6396 2.27952 11.4488 2.27952 11.25C2.27952 11.0511 2.35851 10.8604 2.49911 10.7197L6.24911 6.96975C6.39062 6.83313 6.58007 6.75754 6.77672 6.75924C6.97338 6.76095 7.16148 6.83983 7.30054 6.97889C7.43959 7.11794 7.51848 7.30605 7.52019 7.5027C7.52189 7.69935 7.4463 7.8888 7.30961 8.03025L4.83986 10.5H7.82936C9.10211 10.5 10.0111 10.5 10.7243 10.4415C11.4278 10.3837 11.8741 10.2735 12.2318 10.0913C12.9373 9.73173 13.5109 9.15808 13.8705 8.4525C14.0528 8.09475 14.1631 7.6485 14.2208 6.945C14.2786 6.23175 14.2793 5.32275 14.2793 4.05V3C14.2793 2.80109 14.3583 2.61032 14.499 2.46967C14.6396 2.32902 14.8304 2.25 15.0293 2.25H15Z",fill:"currentColor"})})})]})]})]})},cs="_tooltipContainer_g1t8v_3",as="_tooltipFadeIn_g1t8v_1",Ms="_fadeOut_g1t8v_24",ls="_tooltipFadeOut_g1t8v_1",tn={tooltipContainer:cs,tooltipFadeIn:as,fadeOut:Ms,tooltipFadeOut:ls},us=({text:e,targetRef:t})=>{const[n,s]=r.useState(null),[i,c]=r.useState(!1);if(r.useEffect(()=>{const l=()=>{if(t.current){const g=t.current.getBoundingClientRect(),M=window.innerHeight-g.top+8;s({bottom:M,left:g.left+g.width/2})}};return l(),window.addEventListener("resize",l),window.addEventListener("scroll",l,!0),()=>{window.removeEventListener("resize",l),window.removeEventListener("scroll",l,!0)}},[t]),r.useEffect(()=>()=>{c(!0)},[]),!n)return null;const a={left:n.left,bottom:n.bottom,transform:"translateX(-50%)"};return Ye.createPortal(o.jsx("div",{className:`${tn.tooltipContainer} ${i?tn.fadeOut:""}`,style:a,children:e}),document.body)},gs="_dockItem_1bzk0_9",ds="_jiggle_1bzk0_1",Is="_pulse_1bzk0_315",Ds="_iconContainer_1bzk0_29",Ns="_editOverlay_1bzk0_53",xs="_editOverlayVisible_1bzk0_87",js="_editIcon_1bzk0_99",Ts="_nonFolderBg_1bzk0_129",ys="_hovered_1bzk0_139",Es="_icon_1bzk0_29",ms="_folderIcon_1bzk0_167",fs="_folderIconTile_1bzk0_193",As="_fallbackIcon_1bzk0_225",zs="_deleteButton_1bzk0_239",ps="_dropTarget_1bzk0_291",hs="_editMode_1bzk0_305",Ne={dockItem:gs,jiggle:ds,pulse:Is,iconContainer:Ds,editOverlay:Ns,editOverlayVisible:xs,editIcon:js,nonFolderBg:Ts,hovered:ys,icon:Es,folderIcon:ms,folderIconTile:fs,fallbackIcon:As,deleteButton:zs,dropTarget:ps,editMode:hs},Fe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDMTIuNTUyMyAyIDEzIDIuNDQ3NzIgMTMgM0MxMyAzLjU1MjI5IDEyLjU1MjMgNCAxMiA0SDcuNzk5ODFDNi45NDM0MiA0IDYuMzYxMTcgNC4wMDAzNSA1LjkxMTEzIDQuMDM3MTFDNS40NzI3MiA0LjA3MjkzIDUuMjQ4MiA0LjEzODA5IDUuMDkxOCA0LjIxNzc4QzQuNzE1NTUgNC40MDk1MSA0LjQwOTUxIDQuNzE1NTUgNC4yMTc3OCA1LjA5MThDNC4xMzgwOSA1LjI0ODIgNC4wNzI5MyA1LjQ3MjcyIDQuMDM3MTEgNS45MTExM0M0LjAwMDM1IDYuMzYxMTcgNCA2Ljk0MzQyIDQgNy43OTk4MVYxNi4yMDAyQzQgMTcuMDU2NiA0LjAwMDM1IDE3LjYzODggNC4wMzcxMSAxOC4wODg5QzQuMDcyOTMgMTguNTI3MyA0LjEzODA5IDE4Ljc1MTggNC4yMTc3OCAxOC45MDgyQzQuNDA5NTEgMTkuMjg0NSA0LjcxNTU1IDE5LjU5MDUgNS4wOTE4IDE5Ljc4MjJDNS4yNDgyIDE5Ljg2MTkgNS40NzI3MiAxOS45MjcxIDUuOTExMTMgMTkuOTYyOUM2LjM2MTE3IDE5Ljk5OTcgNi45NDM0MiAyMCA3Ljc5OTgxIDIwSDE2LjIwMDJDMTcuMDU2NiAyMCAxNy42Mzg4IDE5Ljk5OTcgMTguMDg4OSAxOS45NjI5QzE4LjUyNzMgMTkuOTI3MSAxOC43NTE4IDE5Ljg2MTkgMTguOTA4MiAxOS43ODIyQzE5LjI4NDUgMTkuNTkwNSAxOS41OTA1IDE5LjI4NDUgMTkuNzgyMiAxOC45MDgyQzE5Ljg2MTkgMTguNzUxOCAxOS45MjcxIDE4LjUyNzMgMTkuOTYyOSAxOC4wODg5QzE5Ljk5OTcgMTcuNjM4OCAyMCAxNy4wNTY2IDIwIDE2LjIwMDJWMTJDMjAgMTEuNDQ3NyAyMC40NDc3IDExIDIxIDExQzIxLjU1MjMgMTEgMjIgMTEuNDQ3NyAyMiAxMlYxNi4yMDAyQzIyIDE3LjAyMzcgMjIuMDAxIDE3LjcwMTYgMjEuOTU2MSAxOC4yNTJDMjEuOTEwMSAxOC44MTQgMjEuODExNyAxOS4zMzExIDIxLjU2NDUgMTkuODE2NEMyMS4xODEgMjAuNTY4OSAyMC41Njg5IDIxLjE4MSAxOS44MTY0IDIxLjU2NDVDMTkuMzMxMSAyMS44MTE3IDE4LjgxNCAyMS45MTAxIDE4LjI1MiAyMS45NTYxQzE3LjcwMTYgMjIuMDAxIDE3LjAyMzcgMjIgMTYuMjAwMiAyMkg3Ljc5OTgxQzYuOTc2MzIgMjIgNi4yOTg0MyAyMi4wMDEgNS43NDgwNSAyMS45NTYxQzUuMTg1OTkgMjEuOTEwMSA0LjY2ODkgMjEuODExNyA0LjE4MzYgMjEuNTY0NUMzLjQzMTA5IDIxLjE4MSAyLjgxOTAyIDIwLjU2ODkgMi40MzU1NSAxOS44MTY0QzIuMTg4MjcgMTkuMzMxMSAyLjA4OTg4IDE4LjgxNCAyLjA0Mzk1IDE4LjI1MkMxLjk5ODk4IDE3LjcwMTYgMiAxNy4wMjM3IDIgMTYuMjAwMlY3Ljc5OTgxQzIgNi45NzYzMiAxLjk5ODk4IDYuMjk4NDMgMi4wNDM5NSA1Ljc0ODA1QzIuMDg5ODggNS4xODU5OSAyLjE4ODI3IDQuNjY4OSAyLjQzNTU1IDQuMTgzNkMyLjgxOTAyIDMuNDMxMDkgMy40MzEwOSAyLjgxOTAyIDQuMTgzNiAyLjQzNTU1QzQuNjY4OSAyLjE4ODI3IDUuMTg1OTkgMi4wODk4OCA1Ljc0ODA1IDIuMDQzOTVDNi4yOTg0MyAxLjk5ODk4IDYuOTc2MzIgMiA3Ljc5OTgxIDJIMTJaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE3LjU0NTkgMi43Njc1OEMxOC41MjIxIDEuNzkxNDQgMjAuMTA0NyAxLjc5MTYgMjEuMDgxMSAyLjc2NzU4QzIyLjA1NzQgMy43NDM4OSAyMi4wNTc0IDUuMzI3NCAyMS4wODExIDYuMzAzNzFMMTEuODg4NyAxNS40OTYxQzEwLjkxMjQgMTYuNDcxOSA5LjMyOTcxIDE2LjQ3MjEgOC4zNTM1MiAxNS40OTYxQzcuMzc3MjEgMTQuNTE5OCA3LjM3NzIxIDEyLjkzNjMgOC4zNTM1MiAxMS45NkwxNy41NDU5IDIuNzY3NThaTTE5LjY2NyA0LjE4MTY0QzE5LjQ3MTcgMy45ODY3MSAxOS4xNTUxIDMuOTg2NTUgMTguOTYgNC4xODE2NEw5Ljc2NzU4IDEzLjM3NEM5LjU3MjQyIDEzLjU2OTIgOS41NzI2MiAxMy44ODU4IDkuNzY3NTggMTQuMDgxMUM5Ljk2Mjg0IDE0LjI3NjMgMTAuMjc5MyAxNC4yNzYzIDEwLjQ3NDYgMTQuMDgxMUwxOS42NjcgNC44ODg2N0MxOS44NjIyIDQuNjkzNDEgMTkuODYyMiA0LjM3Njg4IDE5LjY2NyA0LjE4MTY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==",Cs=({item:e,isEditMode:t,onClick:n,onEdit:s,onDelete:i,isDragging:c=!1,staggerIndex:a,isDropTarget:l=!1,isMergeTarget:g=!1,onLongPress:M,onMouseDown:d,onContextMenu:x})=>{const[D,N]=r.useState(!1),I=r.useRef(null),[u,j]=r.useState(null),y=r.useRef(!1),C=()=>{if(y.current){y.current=!1;return}const U=I.current?.getBoundingClientRect();t&&e.type!=="folder"?s(U):n(U)},O=U=>{U.stopPropagation(),i()},[F,b]=r.useState(!1),p=r.useRef(null),L=()=>{N(!0),!c&&!t&&(p.current=window.setTimeout(()=>{b(!0)},1e3))},E=()=>{N(!1),u&&(clearTimeout(u),j(null)),p.current&&(clearTimeout(p.current),p.current=null),b(!1)},Q=U=>{if(p.current&&(clearTimeout(p.current),p.current=null),b(!1),d&&d(U),y.current=!1,M&&!t){const P=window.setTimeout(()=>{y.current=!0,M()},600);j(P)}},J=U=>{if(U.preventDefault(),U.stopPropagation(),x&&I.current){const P=I.current.getBoundingClientRect();x(U.clientX,U.clientY,P)}},K=fe.useMemo(()=>{let U=0;for(let P=0;P<e.id.length;P++)U=(U<<5)-U+e.id.charCodeAt(P),U|=0;return`${-(Math.abs(U)%1e3)}ms`},[e.id]);return o.jsxs("div",{className:`${Ne.dockItem} ${t?Ne.editMode:""} ${c?Ne.dragging:""} ${l?Ne.dropTarget:""} ${g?Ne.pulse:""}`,style:{animationDelay:K},onClick:C,onContextMenu:J,onMouseEnter:L,onMouseLeave:E,ref:I,onMouseDown:Q,onMouseUp:()=>{u&&(clearTimeout(u),j(null))},children:[o.jsxs("div",{className:`${Ne.iconContainer} ${e.type!=="folder"?Ne.nonFolderBg:""} ${D&&!t?Ne.hovered:""}`,children:[t&&e.type!=="folder"&&o.jsx("div",{className:`${Ne.editOverlay} ${D?Ne.editOverlayVisible:""}`,children:o.jsx("img",{src:Fe,alt:"edit",className:Ne.editIcon})}),e.type==="folder"?o.jsx("div",{className:Ne.folderIcon,children:e.items&&e.items.slice(0,4).map(U=>o.jsx("div",{className:Ne.folderIconTile,children:U.icon?o.jsx("img",{src:U.icon,alt:U.name,loading:"lazy",decoding:"async"}):o.jsx("div",{className:Ne.fallbackIcon})},U.id))}):o.jsx("img",{src:e.icon||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTYiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4yKSIvPjwvc3ZnPg==",alt:e.name,className:Ne.icon,loading:"lazy",decoding:"async"})]}),t&&o.jsx("button",{className:Ne.deleteButton,onClick:O,"aria-label":"删除",children:"×"}),F&&o.jsx(us,{text:e.name,targetRef:I})]})},Ls=(e,t)=>e.item.id===t.item.id&&e.item.name===t.item.name&&e.item.icon===t.item.icon&&e.item.items?.length===t.item.items?.length&&e.isEditMode===t.isEditMode&&e.isDragging===t.isDragging&&e.isDropTarget===t.isDropTarget&&e.isMergeTarget===t.isMergeTarget&&e.staggerIndex===t.staggerIndex,Qn=fe.memo(Cs,Ls),Ss="_addIcon_10ekk_5",ks="_icon_10ekk_30",nn={addIcon:Ss,icon:ks},Os=({onClick:e})=>{const t=n=>{const s=n.currentTarget.getBoundingClientRect();e(s)};return o.jsx("div",{className:nn.addIcon,onClick:t,"data-add-icon":!0,children:o.jsx("div",{className:nn.icon,children:o.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M16 8V24M8 16H24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})})},ws="_navigator_63jq5_5",bs="_disabled_63jq5_75",Qs="_spaceName_63jq5_89",vs="_dots_63jq5_119",Us="_dot_63jq5_119",_s="_dotActive_63jq5_153",Ze={navigator:ws,disabled:bs,spaceName:Qs,dots:vs,dot:Us,dotActive:_s};function Ys({currentSpace:e,totalSpaces:t,currentIndex:n,onSwitch:s,onContextMenu:i,disabled:c=!1}){const{t:a}=We(),l=M=>{M.preventDefault(),M.stopPropagation(),!c&&t>1&&s()},g=M=>{M.preventDefault(),M.stopPropagation(),i(M)};return o.jsxs("div",{className:`${Ze.navigator} ${c?Ze.disabled:""}`,onClick:l,onContextMenu:g,title:`${a.space.tooltip}: ${e.name}
${a.space.switch}
${a.space.manage}`,children:[o.jsx("span",{className:Ze.spaceName,children:e.name}),t>1&&o.jsx("div",{className:Ze.dots,children:Array.from({length:t}).map((M,d)=>o.jsx("span",{className:`${Ze.dot} ${d===n?Ze.dotActive:""}`},d))})]})}const Rs="_contextMenu_1vwmr_7",Ps="_menuLabel_1vwmr_43",Bs="_menuDivider_1vwmr_69",Fs="_menuOptions_1vwmr_107",Ws="_menuItem_1vwmr_123",Gs="_danger_1vwmr_185",$s="_menuIcon_1vwmr_203",Le={contextMenu:Rs,menuLabel:Ps,menuDivider:Bs,menuOptions:Fs,menuItem:Ws,danger:Gs,menuIcon:$s},qe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE2Ljg4ODkgNS41OTUxMkw0LjE0NjcxIDE4LjMzODNDMy45NTE2IDE4LjUzMzQgMy45NTE5IDE4Ljg1IDQuMTQ2NzEgMTkuMDQ1M0M0LjM0MTk5IDE5LjI0MDMgNC42NTg1NiAxOS4yNDA1IDQuODUzNzQgMTkuMDQ1M0wxNy41OTU5IDYuMzAyMTVMMTkuMDExIDcuNzE3MTlMNi4yNjc4IDIwLjQ2MDRDNS4yOTE2MSAyMS40MzYxIDMuNzA4ODYgMjEuNDM2MSAyLjczMjY1IDIwLjQ2MDRDMS43NTY0OCAxOS40ODQgMS43NTYzOSAxNy45MDA1IDIuNzMyNjUgMTYuOTI0MkwxNS40NzQ4IDQuMTgxMDZMMTYuODg4OSA1LjU5NTEyWiIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTIxLjAwMDIgMTkuMDAwNEMyMS41NTI0IDE5LjAwMDUgMjIuMDAwMiAxOS40NDgyIDIyLjAwMDIgMjAuMDAwNEMyMiAyMC41NTI0IDIxLjU1MjMgMjEuMDAwMyAyMS4wMDAyIDIxLjAwMDRIOS41MDAyM0M4Ljk0ODA3IDIxLjAwMDQgOC41MDA0NCAyMC41NTI1IDguNTAwMjMgMjAuMDAwNEM4LjUwMDIzIDE5LjQ0ODEgOC45NDc5NCAxOS4wMDA0IDkuNTAwMjMgMTkuMDAwNEgyMS4wMDAyWiIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTE2LjkyNSAyLjczMTg0QzE3LjkwMTIgMS43NTYwNyAxOS40ODQgMS43NTYxMSAyMC40NjAyIDIuNzMxODRDMjEuNDM2MSAzLjcwODA3IDIxLjQzNjEgNS4yOTE3MiAyMC40NjAyIDYuMjY3OTdMMTkuNzE4IDcuMDEwMTZMMTguMzAzIDUuNTk1MTJMMTkuMDQ2MSA0Ljg1Mjk0QzE5LjI0MDkgNC42NTc3MyAxOS4yNDEgNC4zNDEwNiAxOS4wNDYxIDQuMTQ1OUMxOC44NTEgMy45NTEyMiAxOC41MzQyIDMuOTUxMTggMTguMzM5MSA0LjE0NTlMMTcuNTk1OSA0Ljg4ODA5TDE2LjE4MTkgMy40NzQwM0wxNi45MjUgMi43MzE4NFoiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo=",et="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE5IDdDMTkuNTUyMyA3IDIwIDcuNDQ3NzIgMjAgOFYxNy4yMDAyQzIwIDE4LjAyMzcgMjAuMDAxIDE4LjcwMTYgMTkuOTU2MSAxOS4yNTJDMTkuOTEwMSAxOS44MTQgMTkuODExNyAyMC4zMzExIDE5LjU2NDUgMjAuODE2NEMxOS4xODEgMjEuNTY4OSAxOC41Njg5IDIyLjE4MSAxNy44MTY0IDIyLjU2NDVDMTcuMzMxMSAyMi44MTE3IDE2LjgxNCAyMi45MTAxIDE2LjI1MiAyMi45NTYxQzE1LjcwMTYgMjMuMDAxIDE1LjAyMzcgMjMgMTQuMjAwMiAyM0g5Ljc5OThDOC45NzYzMSAyMyA4LjI5ODQzIDIzLjAwMSA3Ljc0ODA1IDIyLjk1NjFDNy4xODU5OSAyMi45MTAxIDYuNjY4OSAyMi44MTE3IDYuMTgzNTkgMjIuNTY0NUM1LjQzMTA5IDIyLjE4MSA0LjgxOTAyIDIxLjU2ODkgNC40MzU1NSAyMC44MTY0QzQuMTg4MjcgMjAuMzMxMSA0LjA4OTg3IDE5LjgxNCA0LjA0Mzk1IDE5LjI1MkMzLjk5ODk4IDE4LjcwMTYgNCAxOC4wMjM3IDQgMTcuMjAwMlY4QzQgNy40NDc3MiA0LjQ0NzcyIDcgNSA3QzUuNTUyMjggNyA2IDcuNDQ3NzIgNiA4VjE3LjIwMDJDNiAxOC4wNTY2IDYuMDAwMzUgMTguNjM4OCA2LjAzNzExIDE5LjA4ODlDNi4wNzI5MyAxOS41MjczIDYuMTM4MDggMTkuNzUxOCA2LjIxNzc3IDE5LjkwODJDNi40MDk1MSAyMC4yODQ1IDYuNzE1NTQgMjAuNTkwNSA3LjA5MTggMjAuNzgyMkM3LjI0ODIgMjAuODYxOSA3LjQ3MjcyIDIwLjkyNzEgNy45MTExMyAyMC45NjI5QzguMzYxMTcgMjAuOTk5NyA4Ljk0MzQxIDIxIDkuNzk5OCAyMUgxNC4yMDAyQzE1LjA1NjYgMjEgMTUuNjM4OCAyMC45OTk3IDE2LjA4ODkgMjAuOTYyOUMxNi41MjczIDIwLjkyNzEgMTYuNzUxOCAyMC44NjE5IDE2LjkwODIgMjAuNzgyMkMxNy4yODQ1IDIwLjU5MDUgMTcuNTkwNSAyMC4yODQ1IDE3Ljc4MjIgMTkuOTA4MkMxNy44NjE5IDE5Ljc1MTggMTcuOTI3MSAxOS41MjczIDE3Ljk2MjkgMTkuMDg4OUMxNy45OTk3IDE4LjYzODggMTggMTguMDU2NiAxOCAxNy4yMDAyVjhDMTggNy40NDc3MiAxOC40NDc3IDcgMTkgN1oiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik04LjUgMTBDOS4wNTIyOCAxMCA5LjUgMTAuNDQ3NyA5LjUgMTFWMThDOS41IDE4LjU1MjMgOS4wNTIyOCAxOSA4LjUgMTlDNy45NDc3MiAxOSA3LjUgMTguNTUyMyA3LjUgMThWMTFDNy41IDEwLjQ0NzcgNy45NDc3MiAxMCA4LjUgMTBaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNMTIgMTBDMTIuNTUyMyAxMCAxMyAxMC40NDc3IDEzIDExVjE4QzEzIDE4LjU1MjMgMTIuNTUyMyAxOSAxMiAxOUMxMS40NDc3IDE5IDExIDE4LjU1MjMgMTEgMThWMTFDMTEgMTAuNDQ3NyAxMS40NDc3IDEwIDEyIDEwWiIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTE1LjUgMTBDMTYuMDUyMyAxMCAxNi41IDEwLjQ0NzcgMTYuNSAxMVYxOEMxNi41IDE4LjU1MjMgMTYuMDUyMyAxOSAxNS41IDE5QzE0Ljk0NzcgMTkgMTQuNSAxOC41NTIzIDE0LjUgMThWMTFDMTQuNSAxMC40NDc3IDE0Ljk0NzcgMTAgMTUuNSAxMFoiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik0yMSA0QzIxLjU1MjMgNCAyMiA0LjQ0NzcyIDIyIDVDMjIgNS41NTIyOCAyMS41NTIzIDYgMjEgNkgzQzIuNDQ3NzIgNiAyIDUuNTUyMjggMiA1QzIgNC40NDc3MiAyLjQ0NzcyIDQgMyA0SDIxWiIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTE0IDFDMTQuNTUyMyAxIDE1IDEuNDQ3NzIgMTUgMkMxNSAyLjU1MjI4IDE0LjU1MjMgMyAxNCAzSDEwQzkuNDQ3NzIgMyA5IDIuNTUyMjggOSAyQzkgMS40NDc3MiA5LjQ0NzcyIDEgMTAgMUgxNFoiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo=",Zs=({x:e,y:t,item:n,isEditMode:s,onClose:i,onEdit:c,onToggleEditMode:a,onDelete:l})=>{const{t:g}=We(),M=r.useRef(null),d=r.useRef(!1),x=r.useCallback(()=>{d.current||(d.current=!0,M.current?Be(M.current,200,()=>{i()}):i())},[i]);r.useEffect(()=>{d.current=!1,M.current&&Ke(M.current)},[e,t]),r.useEffect(()=>{const y=C=>{C.button!==2&&M.current&&!M.current.contains(C.target)&&x()};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[x]),r.useEffect(()=>{const y=C=>C.preventDefault();return document.addEventListener("contextmenu",y),()=>document.removeEventListener("contextmenu",y)},[]);const D=180,N=160,I=10;let u=e,j=t;return e+D+I>window.innerWidth&&(u=window.innerWidth-D-I),u<I&&(u=I),t+N+I>window.innerHeight&&(j=window.innerHeight-N-I),j<I&&(j=I),Ye.createPortal(o.jsxs("div",{ref:M,className:Le.contextMenu,style:{left:u,top:j},onClick:y=>y.stopPropagation(),children:[o.jsx("div",{className:Le.menuLabel,children:n.name}),o.jsx("div",{className:Le.menuDivider}),o.jsxs("div",{className:Le.menuOptions,children:[n.type!=="folder"&&o.jsxs("button",{className:Le.menuItem,onClick:()=>{c(),x()},children:[o.jsx("span",{className:Le.menuIcon,style:{WebkitMaskImage:`url(${qe})`,maskImage:`url(${qe})`}}),o.jsx("span",{children:g.contextMenu.edit})]}),o.jsxs("button",{className:Le.menuItem,onClick:()=>{a(),x()},children:[o.jsx("span",{className:Le.menuIcon,style:{WebkitMaskImage:`url(${Fe})`,maskImage:`url(${Fe})`}}),o.jsx("span",{children:s?g.contextMenu.exitEditMode:g.contextMenu.editMode})]}),o.jsxs("button",{className:`${Le.menuItem} ${Le.danger}`,onClick:()=>{l(),x()},children:[o.jsx("span",{className:Le.menuIcon,style:{WebkitMaskImage:`url(${et})`,maskImage:`url(${et})`}}),o.jsx("span",{children:g.contextMenu.delete})]})]})]}),document.body)},Vs="_backdrop_2f4fb_3",Hs="_container_2f4fb_17",Xs="_header_2f4fb_30",Js="_title_2f4fb_38",Ks="_closeButton_2f4fb_47",qs="_content_2f4fb_68",ei="_popoverRoot_2f4fb_76",ti="_popover_2f4fb_76",ni="_clickAway_2f4fb_93",he={backdrop:Vs,container:Hs,header:Xs,title:Js,closeButton:Ks,content:qs,popoverRoot:ei,popover:ti,clickAway:ni},ri=({isOpen:e,onClose:t,children:n,title:s,anchorRect:i,hideHeader:c,className:a})=>{const[l,g]=r.useState(e),M=r.useRef(null),d=r.useRef(!1);r.useEffect(()=>{e&&(d.current=!1,g(!0))},[e]),r.useLayoutEffect(()=>{e&&l&&M.current&&!d.current&&Ke(M.current)},[e,l]),r.useEffect(()=>{!e&&l&&!d.current&&(d.current=!0,M.current?Be(M.current,300,()=>g(!1)):g(!1))},[e,l]);const x=N=>{N.target===N.currentTarget&&D()},D=()=>{d.current||(d.current=!0,M.current?Be(M.current,300,()=>{g(!1),t()}):(g(!1),t()))};return l?i?Ye.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{"data-modal":"true",style:{position:"fixed",left:`${Math.min(Math.max(Math.round(i.left+i.width/2),160),window.innerWidth-160)}px`,top:`${Math.round(i.top-24)}px`,transform:"translate(-50%, -100%)",zIndex:2001,pointerEvents:"auto"},onClick:N=>N.stopPropagation(),children:o.jsxs("div",{ref:M,className:`${he.container} ${he.popover} ${a||""}`,style:{minWidth:"auto"},children:[!c&&s&&o.jsx("div",{className:he.header,children:o.jsx("h2",{className:he.title,children:s})}),o.jsx("div",{className:he.content,onClick:N=>N.stopPropagation(),children:n})]})}),o.jsx("div",{className:he.clickAway,onClick:D,style:{zIndex:2e3}})]}),document.body):o.jsx("div",{className:he.backdrop,onClick:x,children:o.jsxs("div",{ref:M,"data-modal":"true",className:`${he.container} ${a||""}`,onClick:N=>N.stopPropagation(),children:[s&&o.jsxs("div",{className:he.header,children:[o.jsx("h2",{className:he.title,children:s}),o.jsx("button",{className:he.closeButton,onClick:D,children:"×"})]}),o.jsx("div",{className:he.content,children:n})]})}):null},Nt="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDRDMTIuMjY1MiA0IDEyLjUxOTYgNC4xMDUzNiAxMi43MDcxIDQuMjkyODlDMTIuODk0NiA0LjQ4MDQzIDEzIDQuNzM0NzggMTMgNVYxMUgxOUMxOS4yNjUyIDExIDE5LjUxOTYgMTEuMTA1NCAxOS43MDcxIDExLjI5MjlDMTkuODk0NiAxMS40ODA0IDIwIDExLjczNDggMjAgMTJDMjAgMTIuMjY1MiAxOS44OTQ2IDEyLjUxOTYgMTkuNzA3MSAxMi43MDcxQzE5LjUxOTYgMTIuODk0NiAxOS4yNjUyIDEzIDE5IDEzSDEzVjE5QzEzIDE5LjI2NTIgMTIuODk0NiAxOS41MTk2IDEyLjcwNzEgMTkuNzA3MUMxMi41MTk2IDE5Ljg5NDYgMTIuMjY1MiAyMCAxMiAyMEMxMS43MzQ4IDIwIDExLjQ4MDQgMTkuODk0NiAxMS4yOTI5IDE5LjcwNzFDMTEuMTA1NCAxOS41MTk2IDExIDE5LjI2NTIgMTEgMTlWMTNINUM0LjczNDc4IDEzIDQuNDgwNDMgMTIuODk0NiA0LjI5Mjg5IDEyLjcwNzFDNC4xMDUzNiAxMi41MTk2IDQgMTIuMjY1MiA0IDEyQzQgMTEuNzM0OCA0LjEwNTM2IDExLjQ4MDQgNC4yOTI4OSAxMS4yOTI5QzQuNDgwNDMgMTEuMTA1NCA0LjczNDc4IDExIDUgMTFIMTFWNUMxMSA0LjczNDc4IDExLjEwNTQgNC40ODA0MyAxMS4yOTI5IDQuMjkyODlDMTEuNDgwNCA0LjEwNTM2IDExLjczNDggNCAxMiA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==",rn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi44NDM2IDIuMjkyODNDMTMuMjM0MSAxLjkwMjQzIDEzLjg2NzEgMS45MDIzNSAxNC4yNTc2IDIuMjkyODNMMjEuMjU3NiA5LjI5MjgzQzIxLjY0NzggOS42ODMzNCAyMS42NDc5IDEwLjMxNjQgMjEuMjU3NiAxMC43MDY5QzIwLjg2NzIgMTEuMDk3MyAyMC4yMzQxIDExLjA5NzIgMTkuODQzNiAxMC43MDY5TDE5LjY0NTMgMTAuNTA4N0wxMy44NjUgMTcuOTcxNUwxNC42NTcgMTguNzYzNUMxNS4wNDczIDE5LjE1NDEgMTUuMDQ3NSAxOS43ODcyIDE0LjY1NyAyMC4xNzc2QzE0LjI2NjYgMjAuNTY4IDEzLjYzMzUgMjAuNTY3OSAxMy4yNDMgMjAuMTc3Nkw4Ljk5ODgzIDE1LjkzNDRMMy43MDY4NCAyMS4yMjc0QzMuMzE2MzEgMjEuNjE3OSAyLjY4MzI4IDIxLjYxNzkgMi4yOTI3OCAyMS4yMjc0QzEuOTAyNDUgMjAuODM2OSAxLjkwMjM2IDIwLjIwMzggMi4yOTI3OCAxOS44MTMzTDcuNTg0NzcgMTQuNTIwNEwzLjM0MzU2IDEwLjI3ODJDMi45NTMwMyA5Ljg4NzY2IDIuOTUzMDMgOS4yNTQ2NSAzLjM0MzU2IDguODY0MTJDMy43MzQwOCA4LjQ3MzYgNC4zNjcxIDguNDczNiA0Ljc1NzYyIDguODY0MTJMNS41NTM1MiA5LjY2MDAyTDEzLjA4MjggMy45NDYxNUwxMi44NDM2IDMuNzA2ODlDMTIuNDUzIDMuMzE2MzcgMTIuNDUzIDIuNjgzMzYgMTIuODQzNiAyLjI5MjgzWk02Ljk4MjIzIDExLjA4ODdMMTIuNDQwMiAxNi41NDY3TDE4LjIyMDUgOS4wODM4NUwxNC41MTA1IDUuMzczODlMNi45ODIyMyAxMS4wODg3WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==",sn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE2LjIwMDIgMkMxNy4wMjM3IDIgMTcuNzAxNiAxLjk5ODk4IDE4LjI1MiAyLjA0Mzk0QzE4LjgxNCAyLjA4OTg3IDE5LjMzMTEgMi4xODgyNyAxOS44MTY0IDIuNDM1NTRDMjAuNTY4OSAyLjgxOTAxIDIxLjE4MSAzLjQzMTA5IDIxLjU2NDUgNC4xODM1OUMyMS44MTE3IDQuNjY4OSAyMS45MTAxIDUuMTg1OTkgMjEuOTU2MSA1Ljc0ODA0QzIyLjAwMSA2LjI5ODQyIDIyIDYuOTc2MzEgMjIgNy43OTk4VjE2LjIwMDJDMjIgMTcuMDIzNyAyMi4wMDEgMTcuNzAxNiAyMS45NTYxIDE4LjI1MkMyMS45MTAxIDE4LjgxNCAyMS44MTE3IDE5LjMzMTEgMjEuNTY0NSAxOS44MTY0QzIxLjE4MSAyMC41Njg5IDIwLjU2ODkgMjEuMTgxIDE5LjgxNjQgMjEuNTY0NUMxOS4zMzExIDIxLjgxMTcgMTguODE0IDIxLjkxMDEgMTguMjUyIDIxLjk1NjFDMTcuNzAxNiAyMi4wMDEgMTcuMDIzNyAyMiAxNi4yMDAyIDIySDcuNzk5ODFDNi45NzYzMiAyMiA2LjI5ODQzIDIyLjAwMSA1Ljc0ODA1IDIxLjk1NjFDNS4xODU5OSAyMS45MTAxIDQuNjY4OSAyMS44MTE3IDQuMTgzNiAyMS41NjQ1QzMuNDMxMDkgMjEuMTgxIDIuODE5MDIgMjAuNTY4OSAyLjQzNTU1IDE5LjgxNjRDMi4xODgyNyAxOS4zMzExIDIuMDg5ODggMTguODE0IDIuMDQzOTUgMTguMjUyQzEuOTk4OTggMTcuNzAxNiAyIDE3LjAyMzcgMiAxNi4yMDAyVjEyQzIgMTEuNDQ3NyAyLjQ0NzcyIDExIDMgMTFDMy41NTIyOSAxMSA0IDExLjQ0NzcgNCAxMlYxNi4yMDAyQzQgMTcuMDU2NiA0LjAwMDM1IDE3LjYzODggNC4wMzcxMSAxOC4wODg5QzQuMDcyOTMgMTguNTI3MyA0LjEzODA5IDE4Ljc1MTggNC4yMTc3OCAxOC45MDgyQzQuNDA5NTEgMTkuMjg0NSA0LjcxNTU1IDE5LjU5MDUgNS4wOTE4IDE5Ljc4MjJDNS4yNDgyIDE5Ljg2MTkgNS40NzI3MiAxOS45MjcxIDUuOTExMTMgMTkuOTYyOUM2LjM2MTE3IDE5Ljk5OTYgNi45NDM0MiAyMCA3Ljc5OTgxIDIwSDE2LjIwMDJDMTcuMDU2NiAyMCAxNy42Mzg4IDE5Ljk5OTYgMTguMDg4OSAxOS45NjI5QzE4LjUyNzMgMTkuOTI3MSAxOC43NTE4IDE5Ljg2MTkgMTguOTA4MiAxOS43ODIyQzE5LjI4NDUgMTkuNTkwNSAxOS41OTA1IDE5LjI4NDUgMTkuNzgyMiAxOC45MDgyQzE5Ljg2MTkgMTguNzUxOCAxOS45MjcxIDE4LjUyNzMgMTkuOTYyOSAxOC4wODg5QzE5Ljk5OTcgMTcuNjM4OCAyMCAxNy4wNTY2IDIwIDE2LjIwMDJWNy43OTk4QzIwIDYuOTQzNDEgMTkuOTk5NyA2LjM2MTE3IDE5Ljk2MjkgNS45MTExM0MxOS45MjcxIDUuNDcyNzIgMTkuODYxOSA1LjI0ODE5IDE5Ljc4MjIgNS4wOTE3OUMxOS41OTA1IDQuNzE1NTQgMTkuMjg0NSA0LjQwOTUxIDE4LjkwODIgNC4yMTc3N0MxOC43NTE4IDQuMTM4MDggMTguNTI3MyA0LjA3MjkzIDE4LjA4ODkgNC4wMzcxMUMxNy42Mzg4IDQuMDAwMzUgMTcuMDU2NiA0IDE2LjIwMDIgNEgxMkMxMS40NDc3IDQgMTEgMy41NTIyOCAxMSAzQzExIDIuNDQ3NzEgMTEuNDQ3NyAyIDEyIDJIMTYuMjAwMloiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik0zLjI5Mjk3IDMuMjkyOTdDMy42ODM0OSAyLjkwMjQ0IDQuMzE2NTEgMi45MDI0NCA0LjcwNzAzIDMuMjkyOTdMMTMgMTEuNTg1OVY5QzEzIDguNDQ3NzIgMTMuNDQ3NyA4IDE0IDhDMTQuNTUyMyA4IDE1IDguNDQ3NzEgMTUgOVYxM0MxNSAxNC4xMDQ2IDE0LjEwNDYgMTUgMTMgMTVIOUM4LjQ0NzcyIDE1IDguMDAwMDEgMTQuNTUyMyA4IDE0QzggMTMuNDQ3NyA4LjQ0NzcyIDEzIDkgMTNIMTEuNTg1OUwzLjI5Mjk3IDQuNzA3MDNDMi45MDI0NSA0LjMxNjUgMi45MDI0NSAzLjY4MzQ5IDMuMjkyOTcgMy4yOTI5N1oiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo=",_e="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTExIDJDMTEuNTUyMyAyIDEyIDIuNDQ3NzEgMTIgM0MxMiAzLjU1MjI4IDExLjU1MjMgNCAxMSA0SDcuNzk5ODFDNi45NDM0MiA0IDYuMzYxMTcgNC4wMDAzNSA1LjkxMTEzIDQuMDM3MTFDNS40NzI3MiA0LjA3MjkzIDUuMjQ4MiA0LjEzODA4IDUuMDkxOCA0LjIxNzc3QzQuNzE1NTUgNC40MDk1MSA0LjQwOTUxIDQuNzE1NTQgNC4yMTc3OCA1LjA5MTc5QzQuMTM4MDkgNS4yNDgxOSA0LjA3MjkzIDUuNDcyNzIgNC4wMzcxMSA1LjkxMTEzQzQuMDAwMzUgNi4zNjExNyA0IDYuOTQzNDEgNCA3Ljc5OThWMTYuMjAwMkM0IDE3LjA1NjYgNC4wMDAzNSAxNy42Mzg4IDQuMDM3MTEgMTguMDg4OUM0LjA3MjkzIDE4LjUyNzMgNC4xMzgwOSAxOC43NTE4IDQuMjE3NzggMTguOTA4MkM0LjQwOTUxIDE5LjI4NDUgNC43MTU1NSAxOS41OTA1IDUuMDkxOCAxOS43ODIyQzUuMjQ4MiAxOS44NjE5IDUuNDcyNzIgMTkuOTI3MSA1LjkxMTEzIDE5Ljk2MjlDNi4zNjExNyAxOS45OTk2IDYuOTQzNDIgMjAgNy43OTk4MSAyMEgxNi4yMDAyQzE3LjA1NjYgMjAgMTcuNjM4OCAxOS45OTk2IDE4LjA4ODkgMTkuOTYyOUMxOC41MjczIDE5LjkyNzEgMTguNzUxOCAxOS44NjE5IDE4LjkwODIgMTkuNzgyMkMxOS4yODQ1IDE5LjU5MDUgMTkuNTkwNSAxOS4yODQ1IDE5Ljc4MjIgMTguOTA4MkMxOS44NjE5IDE4Ljc1MTggMTkuOTI3MSAxOC41MjczIDE5Ljk2MjkgMTguMDg4OUMxOS45OTk3IDE3LjYzODggMjAgMTcuMDU2NiAyMCAxNi4yMDAyVjEzQzIwIDEyLjQ0NzcgMjAuNDQ3NyAxMiAyMSAxMkMyMS41NTIzIDEyIDIyIDEyLjQ0NzcgMjIgMTNWMTYuMjAwMkMyMiAxNy4wMjM3IDIyLjAwMSAxNy43MDE2IDIxLjk1NjEgMTguMjUyQzIxLjkxMDEgMTguODE0IDIxLjgxMTcgMTkuMzMxMSAyMS41NjQ1IDE5LjgxNjRDMjEuMTgxIDIwLjU2ODkgMjAuNTY4OSAyMS4xODEgMTkuODE2NCAyMS41NjQ1QzE5LjMzMTEgMjEuODExNyAxOC44MTQgMjEuOTEwMSAxOC4yNTIgMjEuOTU2MUMxNy43MDE2IDIyLjAwMSAxNy4wMjM3IDIyIDE2LjIwMDIgMjJINy43OTk4MUM2Ljk3NjMyIDIyIDYuMjk4NDMgMjIuMDAxIDUuNzQ4MDUgMjEuOTU2MUM1LjE4NTk5IDIxLjkxMDEgNC42Njg5IDIxLjgxMTcgNC4xODM2IDIxLjU2NDVDMy40MzEwOSAyMS4xODEgMi44MTkwMiAyMC41Njg5IDIuNDM1NTUgMTkuODE2NEMyLjE4ODI3IDE5LjMzMTEgMi4wODk4OCAxOC44MTQgMi4wNDM5NSAxOC4yNTJDMS45OTg5OCAxNy43MDE2IDIgMTcuMDIzNyAyIDE2LjIwMDJWNy43OTk4QzIgNi45NzYzMSAxLjk5ODk4IDYuMjk4NDIgMi4wNDM5NSA1Ljc0ODA0QzIuMDg5ODggNS4xODU5OSAyLjE4ODI3IDQuNjY4OSAyLjQzNTU1IDQuMTgzNTlDMi44MTkwMiAzLjQzMTA5IDMuNDMxMDkgMi44MTkwMSA0LjE4MzYgMi40MzU1NEM0LjY2ODkgMi4xODgyNyA1LjE4NTk5IDIuMDg5ODcgNS43NDgwNSAyLjA0Mzk0QzYuMjk4NDMgMS45OTg5OCA2Ljk3NjMyIDIgNy43OTk4MSAySDExWiIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTIwIDJDMjEuMTA0NiAyIDIyIDIuODk1NDQgMjIgNFY4QzIyIDguNTUyMjggMjEuNTUyMyA4Ljk5OTk5IDIxIDlDMjAuNDQ3NyA5IDIwIDguNTUyMjggMjAgOFY1LjQxNDA2TDExLjcwNyAxMy43MDdDMTEuMzE2NSAxNC4wOTc2IDEwLjY4MzUgMTQuMDk3NiAxMC4yOTMgMTMuNzA3QzkuOTAyNDUgMTMuMzE2NSA5LjkwMjQ1IDEyLjY4MzUgMTAuMjkzIDEyLjI5M0wxOC41ODU5IDRIMTZDMTUuNDQ3NyA0IDE1IDMuNTUyMjggMTUgM0MxNSAyLjQ0NzcyIDE1LjQ0NzcgMiAxNiAySDIwWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==",si="_menu_1icqg_5",ii="_label_1icqg_23",oi="_divider_1icqg_49",ci="_optionsContainer_1icqg_87",ai="_menuItem_1icqg_103",Mi="_danger_1icqg_165",li="_disabled_1icqg_183",ui="_icon_1icqg_197",gi="_iconEmoji_1icqg_237",di="_renameContainer_1icqg_261",Ii="_renameLabel_1icqg_277",Di="_renameInputWrapper_1icqg_297",Ni="_renameInput_1icqg_297",xi="_confirmButton_1icqg_361",re={menu:si,label:ii,divider:oi,optionsContainer:ci,menuItem:ai,danger:Mi,disabled:li,icon:ui,iconEmoji:gi,renameContainer:di,renameLabel:Ii,renameInputWrapper:Di,renameInput:Ni,confirmButton:xi};function ji({isOpen:e,anchorRect:t,currentSpace:n,allSpaces:s,isLastSpace:i,onClose:c,onAdd:a,onRename:l,onDelete:g,onImport:M,onImportMultiple:d,onPin:x,isFirstSpace:D,isEditMode:N,onToggleEditMode:I}){const{t:u}=We(),[j,y]=r.useState(!1),[C,O]=r.useState(""),F=r.useRef(null),b=r.useRef(null),p=r.useRef(null);r.useEffect(()=>{j&&b.current&&(b.current.focus(),b.current.select())},[j]),r.useEffect(()=>{e||(y(!1),O(""))},[e]);const L=()=>{a(),c()},E=()=>{O(n.name),y(!0)},Q=()=>{const _=C.trim();_&&_!==n.name&&l(_),y(!1),c()},J=_=>{_.key==="Enter"?Q():_.key==="Escape"&&y(!1)},K=()=>{const _=u.space.deleteConfirm.replace("{name}",n.name);!i&&window.confirm(_)&&(g(),c())},U=()=>{cr(n),c()},P=()=>{ar(s),c()},H=()=>{p.current?.click()},k=async _=>{const z=_.target.files?.[0];if(z)try{const T=await ur(z);T.type==="multi"?d(T.data):M(T.data),c()}catch(T){const S=T instanceof Error?T.message:"Unknown error";window.alert(`${u.space.importFailed}${S}`)}finally{p.current&&(p.current.value="")}};return o.jsx(ri,{isOpen:e,onClose:c,title:void 0,hideHeader:!0,anchorRect:t,children:o.jsx("div",{ref:F,className:re.menu,children:j?o.jsxs("div",{className:re.renameContainer,children:[o.jsx("div",{className:re.renameLabel,children:u.space.renameSpace}),o.jsxs("div",{className:re.renameInputWrapper,children:[o.jsx("input",{ref:b,type:"text",className:re.renameInput,value:C,onChange:_=>O(_.target.value),onKeyDown:J,maxLength:10,placeholder:u.space.inputName}),o.jsx("button",{className:re.confirmButton,onClick:Q,disabled:!C.trim()||C.trim()===n.name,children:u.space.confirm})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:re.label,children:u.space.title}),o.jsx("div",{className:re.divider}),o.jsxs("div",{className:re.optionsContainer,children:[o.jsxs("button",{className:re.menuItem,onClick:L,children:[o.jsx("span",{className:re.icon,style:{WebkitMaskImage:`url(${Nt})`,maskImage:`url(${Nt})`}}),o.jsx("span",{children:u.space.addSpace})]}),o.jsxs("button",{className:re.menuItem,onClick:()=>{I(),c()},children:[o.jsx("span",{className:re.icon,style:{WebkitMaskImage:`url(${Fe})`,maskImage:`url(${Fe})`}}),o.jsx("span",{children:N?u.contextMenu.exitEditMode:u.contextMenu.editMode})]}),o.jsxs("button",{className:re.menuItem,onClick:E,children:[o.jsx("span",{className:re.icon,style:{WebkitMaskImage:`url(${qe})`,maskImage:`url(${qe})`}}),o.jsx("span",{children:u.space.rename})]}),o.jsxs("button",{className:`${re.menuItem} ${D?re.disabled:""}`,onClick:()=>{x(),c()},disabled:D,title:D?u.space.alreadyAtTop:u.space.pinToTop,children:[o.jsx("span",{className:re.icon,style:{WebkitMaskImage:`url(${rn})`,maskImage:`url(${rn})`}}),o.jsx("span",{children:u.space.pinToTop})]}),o.jsxs("button",{className:`${re.menuItem} ${re.danger} ${i?re.disabled:""}`,onClick:K,disabled:i,title:i?"Reserve at least one space":u.space.deleteSpace,children:[o.jsx("span",{className:re.icon,style:{WebkitMaskImage:`url(${et})`,maskImage:`url(${et})`}}),o.jsx("span",{children:u.space.deleteSpace})]}),o.jsx("div",{className:re.divider}),o.jsxs("button",{className:re.menuItem,onClick:H,children:[o.jsx("span",{className:re.icon,style:{WebkitMaskImage:`url(${sn})`,maskImage:`url(${sn})`}}),o.jsx("span",{children:u.space.importSpace})]}),o.jsxs("button",{className:re.menuItem,onClick:U,children:[o.jsx("span",{className:re.icon,style:{WebkitMaskImage:`url(${_e})`,maskImage:`url(${_e})`}}),o.jsx("span",{children:u.space.exportSpace})]}),o.jsxs("button",{className:re.menuItem,onClick:P,children:[o.jsx("span",{className:re.icon,style:{WebkitMaskImage:`url(${_e})`,maskImage:`url(${_e})`}}),o.jsx("span",{children:u.space.exportAllSpaces})]}),o.jsx("input",{ref:p,type:"file",accept:".json",style:{display:"none"},onChange:k})]})]})})})}const Ti=64,yi=8,Ei=Ti+yi,mi=50,on=8,aa=4,fi=64,Ma=64,Ai=8,la=fi+Ai,zi=8,pi=3,hi=15,Ci=500,Li=300,cn="cubic-bezier(0.25, 1, 0.5, 1)",Ue="cubic-bezier(0.2, 0, 0, 1)",an="cubic-bezier(0.4, 0, 0.2, 1)",xt=280,Oe=200,jt=150,Si=1.05,ki=9999,Dt={PICKUP:10,REORDER:5,MERGE:15,DROP:10,CANCEL:20},Oi=({isActive:e,item:t,position:n,isAnimatingReturn:s,isEditMode:i,dragElementRef:c,isPreMerge:a=!1,isDraggingOut:l=!1,onAnimationComplete:g})=>{if(!e||!t)return null;const M=()=>a?"scale(0.6)":l||s?"scale(1.0)":`scale(${Si})`,d=()=>a||s?"none":"0 16px 32px rgba(0,0,0,0.3)",x=()=>s?`left ${xt}ms ${cn}, top ${xt}ms ${cn}, transform ${Oe}ms ease-out, box-shadow ${Oe}ms ease-out`:`transform ${jt}ms ${an}, box-shadow ${jt}ms ${an}`,D=fe.useRef(!1);fe.useEffect(()=>{s&&(D.current=!1)},[s]);const N=I=>{s&&!D.current&&(I.propertyName==="left"||I.propertyName==="top")&&(D.current=!0,g?.())};return Ye.createPortal(o.jsx("div",{ref:I=>{c&&(c.current=I)},style:{position:"fixed",left:n.x,top:n.y,width:64,height:64,pointerEvents:"none",zIndex:ki,transform:M(),boxShadow:d(),borderRadius:"16px",transition:x()},onTransitionEnd:N,children:o.jsx(Qn,{item:t,isEditMode:i,onClick:()=>{},onEdit:()=>{},onDelete:()=>{},isDragging:!0})}),document.body)},Gt=e=>({isDragging:!1,item:null,originalIndex:-1,currentPosition:{x:0,y:0},startPosition:{x:0,y:0},offset:{x:0,y:0},isAnimatingReturn:!1,targetPosition:null,...e}),vn=e=>Gt(e),Un=(e,t,n,s)=>Math.hypot(n-e,s-t),wi=e=>{e?document.body.classList.add("is-dragging"):document.body.classList.remove("is-dragging")},bi=(e,t,n)=>{const{isEditMode:s,item:i,index:c,event:a,setDragState:l,handleMouseMove:g,handleMouseUp:M,createDragState:d}=e;if(!s)return;a.preventDefault(),t.current=!1;const x=a.currentTarget.getBoundingClientRect(),D={x:a.clientX-x.left,y:a.clientY-x.top},N=a.clientX,I=a.clientY;let u=!1;const j=C=>{if(Un(C.clientX,C.clientY,N,I)>pi){if(t.current=!0,!u){u=!0;const F=d(i,c,x,N,I,D);l(F),e.onDragStart&&e.onDragStart(i)}window.removeEventListener("mousemove",j),n.current=null,window.addEventListener("mousemove",g)}},y=()=>{window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",y),n.current=null,t.current=!1,u&&M()};n.current=j,window.addEventListener("mousemove",j),window.addEventListener("mouseup",y)},Qi=(e,t,n,s,i)=>{if(n.length===0)return 0;if(i){const d=n[n.length-1];if(t>d.rect.bottom)return s}let c=null,a=1/0;for(const d of n){const x=Math.hypot(e-d.centerX,t-d.centerY);x<a&&(a=x,c=d)}if(!c)return s;const l=10,{centerX:g,index:M}=c;return e<g+l?M:M+1},ua=(e,t,n)=>{const s=Array.from(e),[i]=s.splice(t,1);return s.splice(n,0,i),s},_n=(e,t,n=xt+70)=>{if(!e){setTimeout(t,xt);return}let s=!1;const i=()=>{s||(s=!0,e.removeEventListener("transitionend",c),t())},c=a=>{(a.propertyName==="left"||a.propertyName==="top")&&i()};e.addEventListener("transitionend",c),setTimeout(i,n)},Mn=()=>Gt({targetAction:null,targetActionData:null}),ga=()=>Gt({targetAction:null,targetActionData:null}),It=()=>vn({targetAction:null,targetActionData:null}),da=()=>vn({targetAction:null,targetActionData:null}),vi=e=>{const{items:t,onDragStart:n,onDragEnd:s,externalDragItem:i,createInitialState:c,containerRef:a}=e,[l,g]=r.useState(c),[M,d]=r.useState(null),x=r.useRef([]),D=r.useRef(l),N=r.useRef(t),I=r.useRef(null),u=r.useRef([]),j=r.useRef(!1),y=r.useRef(null),C=r.useRef(null),O=r.useRef(null),F=r.useRef(null),b=r.useCallback(P=>{typeof P=="function"?d(H=>{const k=P(H);return I.current=k,k}):(I.current=P,d(P))},[]);r.useEffect(()=>{D.current=l},[l]),r.useEffect(()=>{N.current=t},[t]),r.useEffect(()=>{wi(l.isDragging)},[l.isDragging]);const p=r.useCallback(()=>{const P=[];x.current.forEach((H,k)=>{if(H&&N.current[k]){const _=H.getBoundingClientRect();P.push({id:N.current[k].id,index:k,rect:_,centerX:_.left+_.width/2,centerY:_.top+_.height/2})}}),u.current=P,a?.current&&(F.current=a.current.getBoundingClientRect())},[a]),L=r.useCallback(P=>{p(),g(H=>({...H,isDragging:!0})),n&&n(P)},[n,p]),E=r.useCallback((P,H,k,_)=>Un(P.clientX,P.clientY,H,k)>8?(j.current=!0,_(),!0):!1,[]),Q=r.useCallback(()=>{b(null),C.current=null},[]);r.useEffect(()=>{i||Q()},[i,Q]);const J=r.useCallback((P,H)=>{y.current&&(window.removeEventListener("mousemove",y.current),y.current=null),window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",H)},[]),K=r.useCallback(P=>{typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(P)},[]),U=r.useCallback((P,H,k,_)=>{g(z=>({...z,isDragging:!1,isAnimatingReturn:!0,targetPosition:P,targetAction:H,targetActionData:k})),j.current=!1,_n(O.current,()=>{D.current.isAnimatingReturn&&_()})},[g]);return r.useEffect(()=>{const P=H=>{H.key==="Escape"&&l.isDragging&&(y.current&&(window.removeEventListener("mousemove",y.current),y.current=null),g(e.resetState()),b(null),j.current=!1,s&&s(),K(20))};return l.isDragging&&window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)}},[l.isDragging,e,s,g,b,K]),{dragState:l,setDragState:g,placeholderIndex:M,setPlaceholderIndex:b,itemRefs:x,dragRef:D,itemsRef:N,placeholderRef:I,layoutSnapshotRef:u,hasMovedRef:j,thresholdListenerRef:y,lastPlaceholderRef:C,dragElementRef:O,containerRef:a,cachedContainerRectRef:F,startDragging:L,handleDragThresholdCheck:E,captureLayoutSnapshot:p,resetPlaceholderState:Q,cleanupDragListeners:J,startReturnAnimation:U,performHapticFeedback:K}};function Ui({onHoverOpenFolder:e,hoverOpenDelay:t=Ci,preMergeDelay:n=Li,getItems:s,performHapticFeedback:i}){const[c,a]=r.useState(null),[l,g]=r.useState(null),[M,d]=r.useState(null),[x,D]=r.useState(!1),N=r.useRef(null),I=r.useRef(null),u=r.useRef(null),j=r.useRef(!1),y=r.useRef(0),C=r.useRef(null);r.useEffect(()=>{N.current=c},[c]),r.useEffect(()=>{I.current=l},[l]),r.useEffect(()=>{u.current=M},[M]),r.useEffect(()=>{j.current=x},[x]);const O=r.useCallback(()=>{a(null),g(null),d(null),D(!1),C.current=null},[]),F=r.useCallback((b,p)=>{if(C.current!==b.id)C.current=b.id,y.current=Date.now(),D(!1),d(null),a(null),g(null);else{const L=Date.now()-y.current;if(b.type==="folder"&&L>t&&!j.current&&e){const Q=s().find(J=>J.id===b.id);if(Q)return e(p,Q),C.current=null,!0}L>n&&!j.current&&(D(!0),d(b.id),b.type==="folder"?(a(b.id),g(null)):(a(null),g(b.id)),i&&i(Dt.MERGE))}return!1},[e,t,n,s,i]);return{hoveredFolderId:c,hoveredAppId:l,mergeTargetId:M,isPreMerge:x,hoveredFolderRef:N,hoveredAppRef:I,mergeTargetRef:u,isPreMergeRef:j,handleMergeTargetHover:F,resetMergeStates:O,setHoveredFolderId:a,setHoveredAppId:g}}const _i=(e,t)=>{const n=document.querySelector('[data-folder-view="true"]');if(!n)return!1;const s=n.getBoundingClientRect();return e>=s.left&&e<=s.right&&t>=s.top&&t<=s.bottom},Yi=()=>document.querySelector('[data-folder-view="true"]')?.getBoundingClientRect()??null,Ri=(e,t,n,s=0)=>e>=n.left-s&&e<=n.right+s&&t>=n.top-s&&t<=n.bottom+s;function Pi(e,t,n,s,i=100){return!s&&_i(e,t)?{type:"folder"}:n&&e>=n.left-i&&e<=n.right+i&&t>=n.top-i&&t<=n.bottom+i?{type:"dock",rect:n}:{type:"outside"}}function Bi(e,t,n,s,i=25){for(const c of t)if(Math.hypot(e.x-c.centerX,e.y-c.centerY)<i){const l=s.find(g=>g.id===c.id);if(l&&l.id!==n)return{id:l.id,type:l.type}}return null}function Fi(e,t,n,s,i=64){return s?{x:e-n.x+i/2,y:t-n.y+i/2}:{x:e,y:t}}function Wi(e,t,n){if(n===0)return 0;for(let s=0;s<t.length;s++)if(e<t[s].centerX)return s;return n}const Gi=()=>({layoutConfig:{type:"horizontal",cellSize:72,hysteresisThreshold:10},calculatePlaceholder:(t,n,s,i)=>{for(let c=0;c<s.length;c++)if(t<s[c].centerX)return c;return i},calculateTransform:(t,n,s,i)=>{if(n===null)return{x:0,y:0};if(i&&s!==-1){if(t===s)return{x:0,y:0};if(n===s||n===s+1)return{x:0,y:0};if(s<n){if(t>s&&t<n)return{x:-72,y:0}}else if(s>n&&t>=n&&t<s)return{x:72,y:0}}else if(s===-1&&t>=n)return{x:72,y:0};return{x:0,y:0}}}),Ia=(e=4)=>({layoutConfig:{type:"grid",columns:e,cellSize:72,padding:8,hysteresisThreshold:15},calculatePlaceholder:(c,a,l,g,M)=>Qi(c,a,l,g,M||null),calculateTransform:(c,a,l,g)=>{if(a===null)return{x:0,y:0};const M=(d,x)=>{if(d===x)return{x:0,y:0};const D=d%e,N=Math.floor(d/e),I=x%e,u=Math.floor(x/e);return{x:(I-D)*72,y:(u-N)*72}};if(l===-1)return c>=a?M(c,c+1):{x:0,y:0};if(g&&l!==-1){if(c===l)return{x:0,y:0};if(l>a){if(c>=a&&c<l)return M(c,c+1)}else if(l<a&&c>l&&c<=a)return M(c,c-1)}return{x:0,y:0}},isOutsideContainer:(c,a,l)=>!Ri(c,a,l,10)}),$i=({items:e,isEditMode:t,onReorder:n,onDropToFolder:s,onMergeFolder:i,onDragToOpenFolder:c,onHoverOpenFolder:a,onDragStart:l,onDragEnd:g,externalDragItem:M,hasFolderPlaceholderActive:d})=>{const x=r.useRef(null),{dragState:D,setDragState:N,placeholderIndex:I,setPlaceholderIndex:u,itemRefs:j,dragRef:y,itemsRef:C,placeholderRef:O,layoutSnapshotRef:F,hasMovedRef:b,thresholdListenerRef:p,startDragging:L,captureLayoutSnapshot:E,dragElementRef:Q,cleanupDragListeners:J,performHapticFeedback:K,cachedContainerRectRef:U}=vi({items:e,isEditMode:t,onDragStart:l,onDragEnd:g,externalDragItem:M,createInitialState:Mn,resetState:It,containerRef:x}),{hoveredFolderId:P,hoveredAppId:H,mergeTargetId:k,isPreMerge:_,hoveredFolderRef:z,hoveredAppRef:T,isPreMergeRef:S,handleMergeTargetHover:G,resetMergeStates:Y}=Ui({onHoverOpenFolder:a,getItems:()=>C.current,performHapticFeedback:K}),W=r.useMemo(()=>Gi(),[]),w=r.useRef(null),m=r.useRef({x:0,y:0}),v=r.useRef(!1),$=r.useRef(null),X=r.useRef(null),ne=r.useCallback(()=>{x.current&&(w.current=x.current.getBoundingClientRect())},[]);r.useEffect(()=>{I!==null&&D.isDragging&&K(Dt.REORDER)},[I,K,D.isDragging]);const q=r.useCallback(()=>{u(null),Y()},[u,Y]),V=r.useCallback((A,R,f)=>{const B=w.current||x.current?.getBoundingClientRect(),Z=t?Math.max(window.innerWidth,window.innerHeight):mi;return Pi(A,R,B||null,f?.type==="folder",Z)},[t]),ue=r.useCallback((A,R,f,B)=>{const Z=Fi(A.clientX,A.clientY,R.offset,R.isDragging);return Bi(Z,f,B.id,C.current,hi)},[]),Ie=r.useCallback((A,R)=>Wi(A,R,C.current.length),[]),De=r.useCallback(A=>{const R=y.current,f=R.isDragging?R.item:M;if(!R.isDragging&&!M&&R.item)if(Math.hypot(A.clientX-R.startPosition.x,A.clientY-R.startPosition.y)>zi)ne(),K(Dt.PICKUP),L(R.item);else return;if(!f)return;if((!F.current||F.current.length===0)&&C.current.length>0&&E(),R.isDragging&&Q.current){const Me=A.clientX-R.offset.x,Ee=A.clientY-R.offset.y;Q.current.style.left=`${Me}px`,Q.current.style.top=`${Ee}px`}const B=A.clientX,Z=A.clientY;m.current={x:B,y:Z};const te=V(B,Z,f);if(te.type==="folder"||te.type==="outside"){q();return}const se=F.current,le=ue(A,R,se,f);if(le){if(G(le,f))return}else if(se.length>0){const Me=Ie(B,se);u(Me)}else u(0)},[M,L,E,ne,V,ue,Ie,G,q,u,K]),ce=r.useCallback(A=>{X.current=A,$.current===null&&($.current=requestAnimationFrame(()=>{$.current=null;const R=X.current;R&&De(R)}))},[De]);r.useEffect(()=>{const A=v.current;if(M)return v.current=!0,ne(),window.addEventListener("mousemove",ce),()=>{window.removeEventListener("mousemove",ce)};A&&(q(),F.current=[],v.current=!1)},[M,ce,ne,q]),r.useEffect(()=>{v.current&&(u(null),F.current=[],v.current=!1)},[e,u]);const ae=r.useCallback(()=>{const A=y.current;if(!A.isDragging&&A.item&&!b.current){J(ce,ae),b.current=!1,N(It());return}if(!A.item)return;J(ce,ae);const R=O.current,f=z.current,B=T.current,Z=C.current,te=S.current,se=F.current;let le=null,Me=null,Ee=null;if(A.item.type!=="folder"&&d?.()&&c&&A.item.type!=="folder"){const ee=Yi();ee&&(le={x:ee.left+ee.width/2-32,y:ee.top+ee.height/2-32},Me="dragToOpenFolder",Ee={type:"dragToOpenFolder",item:A.item})}else if(te){if(f&&s){const ee=se.find(de=>de.id===f);ee&&(le={x:ee.rect.left,y:ee.rect.top});const ge=Z.find(de=>de.id===f);ge&&(Me="dropToFolder",Ee={type:"dropToFolder",item:A.item,targetFolder:ge})}else if(B&&i){const ee=se.find(de=>de.id===B);ee&&(le={x:ee.rect.left,y:ee.rect.top});const ge=Z.find(de=>de.id===B);ge&&(Me="mergeFolder",Ee={type:"mergeFolder",item:A.item,targetItem:ge})}}else if(R!=null){const ee=A.originalIndex,de=(x.current||document.querySelector('[data-dock-container="true"]'))?.getBoundingClientRect();if(de){const nt=Ei;let Pe=R;ee!==-1&&ee<R&&(Pe=R-1);let Qe=de.left+on,ft=de.top+on;const ve=F.current,At=U.current;if(ve&&ve.length>0&&At){const Rn=ve[0].rect.left-At.left,Pn=ve[0].rect.top-At.top;Qe=de.left+Rn,ft=de.top+Pn}else ve&&ve.length>0?(Qe=ve[0].rect.left,ft=ve[0].rect.top):t&&(Qe+=80);le={x:Qe+Pe*nt,y:ft}}else le={x:0,y:0};let Re=R;const tt=[...Z];if(ee!==-1){Re>ee&&(Re-=1);const[nt]=tt.splice(ee,1);tt.splice(Re,0,nt)}Me="reorder",Ee={type:"reorder",newItems:tt}}le&&Me?(N(ee=>({...ee,isDragging:!1,isAnimatingReturn:!0,currentPosition:le,targetPosition:le,targetAction:Me,targetActionData:Ee})),Y(),b.current=!1,_n(Q.current,()=>{y.current.isAnimatingReturn&&ye()})):(N(It()),u(null),Y(),b.current=!1,g&&g())},[W,s,i,c,g,n,ce,N,u,J,d]),xe=(A,R,f)=>{bi({isEditMode:t,item:R,index:f,event:A,setDragState:N,handleMouseMove:ce,handleMouseUp:ae,createDragState:(B,Z,te,se,le,Me)=>({...Mn(),item:B,originalIndex:Z,currentPosition:{x:te.left,y:te.top},startPosition:{x:se,y:le},offset:Me})},b,p)},ye=r.useCallback(()=>{const A=y.current;if(!A.isAnimatingReturn||!A.targetAction||!A.item)return;const R=A.targetActionData;if(N(It()),u(null),R)switch(K(Dt.DROP),R.type){case"reorder":n(R.newItems);break;case"dropToFolder":s&&s(R.item,R.targetFolder);break;case"mergeFolder":i&&i(R.item,R.targetItem);break;case"dragToOpenFolder":c&&c(R.item);break}g&&g()},[n,s,i,c,g,N,u,y]),Ae=r.useMemo(()=>{const A=I;if(A===null)return e.map(()=>0);const f=(D.isDragging||D.isAnimatingReturn)&&D.originalIndex!==-1?D.originalIndex:M?-1:D.originalIndex,B=D.isDragging||D.isAnimatingReturn,Z=e.map((se,le)=>W.calculateTransform(le,A,f,B).x),te=W.calculateTransform(e.length,A,f,B);return Z.push(te.x),Z},[I,D.isDragging,D.isAnimatingReturn,D.originalIndex,M,e.length,W]),ze=r.useCallback(A=>Ae[A]??0,[Ae]);return r.useEffect(()=>()=>{$.current!==null&&cancelAnimationFrame($.current),J(ce,ae)},[]),{dragState:D,placeholderIndex:I,hoveredFolderId:P,hoveredAppId:H,mergeTargetId:k,isPreMerge:_,itemRefs:j,dockRef:x,handleMouseDown:xe,handleAnimationComplete:ye,getItemTransform:ze,dragElementRef:Q}},Zi="_dock_i4b9e_9",Vi="_dockContent_i4b9e_41",Hi="_dockItemWrapper_i4b9e_75",Xi="_editMode_i4b9e_93",Ji="_dockItem_i4b9e_75",Ki="_divider_i4b9e_103",qi="_dockNavigator_i4b9e_167",eo="_navigatorIcon_i4b9e_185",to="_placeholder_i4b9e_211",no="_editTools_i4b9e_239",ro="_visible_i4b9e_269",so="_isBeingDragged_i4b9e_287",io="_itemExiting_i4b9e_365",oo="_slideOutUp_i4b9e_1",co="_itemHidden_i4b9e_375",ao="_itemEntering_i4b9e_391",Mo="_slideInUp_i4b9e_1",lo="_navigatorTransitioning_i4b9e_431",Te={dock:Zi,dockContent:Vi,dockItemWrapper:Hi,editMode:Xi,dockItem:Ji,divider:Ki,dockNavigator:qi,navigatorIcon:eo,placeholder:to,editTools:no,visible:ro,isBeingDragged:so,itemExiting:io,slideOutUp:oo,itemHidden:co,itemEntering:ao,slideInUp:Mo,navigatorTransitioning:lo},uo=({items:e,isEditMode:t,onItemClick:n,onItemEdit:s,onItemDelete:i,onItemAdd:c,onItemsReorder:a,onDropToFolder:l,onDragToOpenFolder:g,onHoverOpenFolder:M,onLongPressEdit:d,onWidthChange:x,externalDragItem:D,onDragStart:N,onDragEnd:I})=>{const u=r.useRef(null),{folderPlaceholderActive:j}=Sn(),{setIsEditMode:y}=Pt(),{spaces:C,currentSpace:O,currentIndex:F,isSwitching:b,setIsSwitching:p,switchToNextSpace:L,addSpace:E,renameSpace:Q,deleteSpace:J,importSpace:K,importMultipleSpaces:U,pinSpace:P}=pn(),[H,k]=r.useState("idle"),_=r.useRef(null),z=r.useCallback(()=>{if(b||C.length<=1)return;const A=_.current?_.current.getBoundingClientRect().width:0;_.current&&A>0&&(_.current.style.width=`${A}px`),p(!0),k("exiting");const R=120,f=200,B=15,Z=250;setTimeout(()=>{k("hidden"),L(),setTimeout(()=>{if(k("entering"),_.current){_.current.style.width="";const se=_.current.getBoundingClientRect().width;A>0&&Math.abs(se-A)>1&&(_.current.style.width=`${A}px`,requestAnimationFrame(()=>{_.current&&(_.current.style.width=`${se}px`,setTimeout(()=>{_.current&&(_.current.style.width="")},Z))}))}const te=f+e.length*B;setTimeout(()=>{k("idle"),p(!1)},te)},10)},R)},[b,C.length,e.length,L,p]),[T,S]=r.useState(!1),[G,Y]=r.useState(null),W=r.useCallback(A=>{Y(A.currentTarget.getBoundingClientRect()),S(!0)},[]),[w,m]=r.useState(null),v=r.useCallback((A,R,f,B)=>{m({x:R,y:f,item:A,rect:B})},[]),$=r.useRef(j);r.useEffect(()=>{$.current=j},[j]);const{dragState:X,placeholderIndex:ne,mergeTargetId:q,isPreMerge:V,itemRefs:ue,dockRef:Ie,handleMouseDown:De,handleAnimationComplete:ce,getItemTransform:ae,dragElementRef:xe}=$i({items:e,isEditMode:t,onReorder:a,onDragToOpenFolder:g,onHoverOpenFolder:(A,R)=>{M&&M(A,R)},onDropToFolder:l,onMergeFolder:(A,R)=>{if(R.type==="folder"){const f=A.type==="folder"&&A.items?A.items:[A],B=e.map(Z=>{if(Z.id===R.id){const te=[...Z.items||[],...f];return{...Z,items:te,icon:ke(te)}}return Z}).filter(Z=>Z.id!==A.id);a(B)}else{const f={id:`folder-${Date.now()}`,name:"Folder",type:"folder",items:[R,A]};f.icon=ke(f.items);const B=e.map(Z=>Z.id===R.id?f:Z).filter(Z=>Z.id!==A.id);a(B)}},externalDragItem:D,onDragStart:N,onDragEnd:I,hasFolderPlaceholderActive:()=>$.current}),ye=X.isDragging||X.isAnimatingReturn||!!D,Ae=r.useMemo(()=>({draggingCollapsed:`width ${Oe}ms ${Ue}, min-width ${Oe}ms ${Ue}, opacity ${jt}ms`,draggingWithPlaceholder:`width ${Oe}ms ${Ue}, min-width ${Oe}ms ${Ue}, transform ${Oe}ms ${Ue}, opacity ${jt}ms`,normal:`transform ${Oe}ms ${Ue}`}),[]),ze=r.useCallback((A,R,f,B,Z)=>R?B===null?{"--stagger-index":A,width:0,minWidth:0,overflow:"hidden",opacity:0,visibility:"hidden",pointerEvents:"none",transition:Z?Ae.draggingCollapsed:"none"}:{"--stagger-index":A,width:64,minWidth:64,opacity:0,visibility:"hidden",pointerEvents:"none",transform:`translateX(${f}px)`,transition:Z?Ae.draggingWithPlaceholder:"none"}:{"--stagger-index":A,transform:`translateX(${f}px)`,transition:Z?Ae.normal:"none"},[Ae]);return r.useEffect(()=>{u.current&&(Ie.current=u.current)},[Ie]),r.useEffect(()=>{if(!x||!u.current)return;const A=new ResizeObserver(R=>{for(const f of R){let B=0;f.borderBoxSize&&f.borderBoxSize.length>0?B=Math.round(f.borderBoxSize[0].inlineSize):(B=Math.round(f.contentRect.width),f.target instanceof HTMLElement&&(B=Math.round(f.target.getBoundingClientRect().width))),x(B)}});return A.observe(u.current),()=>A.disconnect()},[x]),o.jsxs("header",{ref:u,className:`${Te.dock} ${t?Te.editMode:""}`,children:[o.jsxs("div",{ref:_,className:Te.dockContent,"data-dock-container":"true",children:[o.jsxs("div",{className:`${Te.editTools} ${t?Te.visible:""}`,children:[o.jsx(Os,{onClick:A=>c(A)}),o.jsx("div",{className:Te.divider,children:o.jsx("svg",{width:"1",height:"48",viewBox:"0 0 1 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("line",{x1:"0.5",y1:"0",x2:"0.5",y2:"48",strokeWidth:"1"})})})]}),e.map((A,R)=>{const f=q===A.id,B=X.item?.id===A.id,Z=ae(R);let te="";return H==="exiting"?te=Te.itemExiting:H==="hidden"?te=Te.itemHidden:H==="entering"&&(te=Te.itemEntering),o.jsx("div",{ref:se=>{ue.current[R]=se},className:`${Te.dockItemWrapper} ${B?Te.isBeingDragged:""} ${te}`,"data-dock-item-wrapper":"true",style:ze(R,B,Z,ne,ye),children:o.jsx(Qn,{item:A,isEditMode:t,onClick:se=>n(A,se),onEdit:se=>s(A,se),onDelete:()=>i(A),isDragging:B,staggerIndex:R,isDropTarget:f,isMergeTarget:f,onLongPress:d,onMouseDown:se=>De(se,A,R),onContextMenu:(se,le,Me)=>v(A,se,le,Me)})},A.id)}),o.jsx("div",{className:Te.divider,style:{transform:`translateX(${ae(e.length)}px)`,transition:ye?`transform ${Oe}ms ${Ue}`:"none"},children:o.jsx("svg",{width:"1",height:"48",viewBox:"0 0 1 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("line",{x1:"0.5",y1:"0",x2:"0.5",y2:"48",strokeWidth:"1"})})}),ae(e.length)>0&&o.jsx("div",{style:{width:ae(e.length),flexShrink:0,transition:ye?`width ${Oe}ms ${Ue}`:"none"}})]}),o.jsx("div",{className:`${Te.dockNavigator} ${H==="exiting"||H==="hidden"?Te.navigatorTransitioning:""}`,children:o.jsx(Ys,{currentSpace:O,totalSpaces:C.length,currentIndex:F,onSwitch:z,onContextMenu:W,disabled:b})}),o.jsx(Oi,{isActive:X.isDragging||X.isAnimatingReturn,item:X.item,position:X.currentPosition,isAnimatingReturn:X.isAnimatingReturn,isEditMode:t,dragElementRef:xe,isPreMerge:V,onAnimationComplete:ce}),o.jsx(ji,{isOpen:T,anchorRect:G,currentSpace:O,allSpaces:C,isLastSpace:C.length<=1,onClose:()=>S(!1),onAdd:()=>{E(),S(!1)},onRename:A=>{Q(O.id,A),S(!1)},onDelete:()=>{J(O.id),S(!1)},onImport:A=>{K(A),S(!1)},onImportMultiple:A=>{U(A),S(!1)},onPin:()=>{P(O.id),S(!1)},isFirstSpace:F===0,isEditMode:t,onToggleEditMode:()=>y(!t)}),w&&o.jsx(Zs,{x:w.x,y:w.y,item:w.item,isEditMode:t,onClose:()=>m(null),onEdit:()=>s(w.item,w.rect),onToggleEditMode:()=>y(!t),onDelete:()=>i(w.item)})]})},go="_editor_134qh_5",Io="_innerContainer_134qh_28",Do="_icon_134qh_41",Ot={editor:go,innerContainer:Io,icon:Do},No=({onClick:e,visible:t=!1,isEditMode:n=!1})=>o.jsx("header",{className:Ot.editor,style:{opacity:t?1:0,pointerEvents:t?"auto":"none"},children:o.jsx("div",{className:Ot.innerContainer,onClick:e,children:o.jsx("div",{className:Ot.icon,children:n?o.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M20.707 5.293C20.8944 5.48053 20.9997 5.73484 20.9997 6C20.9997 6.26516 20.8944 6.51947 20.707 6.707L9.70696 17.707C9.51943 17.8945 9.26512 17.9998 8.99996 17.9998C8.7348 17.9998 8.48049 17.8945 8.29296 17.707L3.29296 12.707C3.19745 12.6148 3.12127 12.5044 3.06886 12.3824C3.01645 12.2604 2.98886 12.1292 2.98771 11.9964C2.98655 11.8636 3.01186 11.7319 3.06214 11.609C3.11242 11.4861 3.18667 11.3745 3.28056 11.2806C3.37446 11.1867 3.48611 11.1125 3.60901 11.0622C3.7319 11.0119 3.86358 10.9866 3.99636 10.9877C4.12914 10.9889 4.26036 11.0165 4.38236 11.0689C4.50437 11.1213 4.61471 11.1975 4.70696 11.293L8.99996 15.586L19.293 5.293C19.4805 5.10553 19.7348 5.00021 20 5.00021C20.2651 5.00021 20.5194 5.10553 20.707 5.293Z",fill:"currentColor"})}):o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M12 2C12.5523 2 13 2.44772 13 3C13 3.55229 12.5523 4 12 4H7.79981C6.94342 4 6.36117 4.00035 5.91113 4.03711C5.47272 4.07293 5.2482 4.13809 5.0918 4.21778C4.71555 4.40951 4.40951 4.71555 4.21778 5.0918C4.13809 5.2482 4.07293 5.47272 4.03711 5.91113C4.00035 6.36117 4 6.94342 4 7.79981V16.2002C4 17.0566 4.00035 17.6388 4.03711 18.0889C4.07293 18.5273 4.13809 18.7518 4.21778 18.9082C4.40951 19.2845 4.71555 19.5905 5.0918 19.7822C5.2482 19.8619 5.47272 19.9271 5.91113 19.9629C6.36117 19.9997 6.94342 20 7.79981 20H16.2002C17.0566 20 17.6388 19.9997 18.0889 19.9629C18.5273 19.9271 18.7518 19.8619 18.9082 19.7822C19.2845 19.5905 19.5905 19.2845 19.7822 18.9082C19.8619 18.7518 19.9271 18.5273 19.9629 18.0889C19.9997 17.6388 20 17.0566 20 16.2002V12C20 11.4477 20.4477 11 21 11C21.5523 11 22 11.4477 22 12V16.2002C22 17.0237 22.001 17.7016 21.9561 18.252C21.9101 18.814 21.8117 19.3311 21.5645 19.8164C21.181 20.5689 20.5689 21.181 19.8164 21.5645C19.3311 21.8117 18.814 21.9101 18.252 21.9561C17.7016 22.001 17.0237 22 16.2002 22H7.79981C6.97632 22 6.29843 22.001 5.74805 21.9561C5.18599 21.9101 4.6689 21.8117 4.1836 21.5645C3.43109 21.181 2.81902 20.5689 2.43555 19.8164C2.18827 19.3311 2.08988 18.814 2.04395 18.252C1.99898 17.7016 2 17.0237 2 16.2002V7.79981C2 6.97632 1.99898 6.29843 2.04395 5.74805C2.08988 5.18599 2.18827 4.6689 2.43555 4.1836C2.81902 3.43109 3.43109 2.81902 4.1836 2.43555C4.6689 2.18827 5.18599 2.08988 5.74805 2.04395C6.29843 1.99898 6.97632 2 7.79981 2H12Z",fill:"currentColor"}),o.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5459 2.76758C18.5221 1.79144 20.1047 1.7916 21.0811 2.76758C22.0574 3.74389 22.0574 5.3274 21.0811 6.30371L11.8887 15.4961C10.9124 16.4719 9.32971 16.4721 8.35352 15.4961C7.37721 14.5198 7.37721 12.9363 8.35352 11.96L17.5459 2.76758ZM19.667 4.18164C19.4717 3.98671 19.1551 3.98655 18.96 4.18164L9.76758 13.374C9.57242 13.5692 9.57262 13.8858 9.76758 14.0811C9.96284 14.2763 10.2793 14.2763 10.4746 14.0811L19.667 4.88867C19.8622 4.69341 19.8622 4.37688 19.667 4.18164Z",fill:"currentColor"})]})})})}),xo="_settings_1wnbj_5",jo="_innerContainer_1wnbj_28",To="_icon_1wnbj_41",wt={settings:xo,innerContainer:jo,icon:To},yo=({onClick:e,visible:t=!1})=>o.jsx("header",{className:wt.settings,style:{opacity:t?1:0,pointerEvents:t?"auto":"none"},children:o.jsx("div",{className:wt.innerContainer,onClick:e,children:o.jsx("div",{className:wt.icon,children:o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})})}),Eo="_container_na3p7_1",mo="_layer_na3p7_23",Ve={container:Eo,layer:mo},fo=e=>{if(e.includes(","))return null;const t=e.match(/^url\(['"]?([^'"]+)['"]?\)$/);return t&&!t[1].startsWith("data:")?t[1]:null},Ao=()=>{const{backgroundBaseValue:e,backgroundTextureValue:t,backgroundTextureTileSize:n,backgroundBlendMode:s}=at(),[i,c]=fe.useState([]),[a,l]=fe.useState([]),g=fe.useRef(a);return g.current=a,fe.useEffect(()=>{const M=Date.now(),d=fo(e),x={id:M,value:e,wallpaperUrl:d,visible:!1};c(I=>[...I.slice(-1),x]);const D=setTimeout(()=>{c(I=>I.map(u=>u.id===M?{...u,visible:!0}:u))},50),N=setTimeout(()=>{c(I=>I.filter(u=>u.id===M))},300);return()=>{clearTimeout(D),clearTimeout(N)}},[e]),fe.useEffect(()=>{const M=Date.now(),d={id:M,value:t,tileSize:n,visible:!1};if(g.current.length>0){l(N=>N.map(I=>({...I,visible:!1})));const D=setTimeout(()=>{t?(l([d]),requestAnimationFrame(()=>{l(N=>N.map(I=>I.id===M?{...I,visible:!0}:I))})):l([])},300);return()=>clearTimeout(D)}else if(t){l(I=>[...I,d]);const D=setTimeout(()=>{l(I=>I.map(u=>u.id===M?{...u,visible:!0}:u))},50),N=setTimeout(()=>{l(I=>I.filter(u=>u.id===M))},300);return()=>{clearTimeout(D),clearTimeout(N)}}else l([])},[t,n]),o.jsxs("div",{className:Ve.container,children:[i.map(M=>o.jsx("div",{className:Ve.layerWrapper,style:{zIndex:0},children:M.wallpaperUrl?o.jsx("img",{src:M.wallpaperUrl,alt:"",className:Ve.layer,style:{opacity:M.visible?1:0,zIndex:M.id}}):o.jsx("div",{className:Ve.layer,style:{background:M.value,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:M.visible?1:0,zIndex:M.id}})},`base-${M.id}`)),a.map(M=>M.value?o.jsx("div",{className:Ve.layerWrapper,style:{zIndex:1,mixBlendMode:s},children:o.jsx("div",{className:Ve.layer,style:{backgroundImage:M.value,backgroundSize:M.tileSize||"var(--background-size)",backgroundPosition:"center",backgroundRepeat:"repeat",opacity:M.visible?1:0,zIndex:M.id}})},`tex-${M.id}`):null)]})},zo=500,Yn=r.createContext(void 0),po=()=>`sticker-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,ho=({children:e})=>{const[t,n]=r.useState(()=>ie.getStickers()),[s,i]=r.useState(null),[c,a]=r.useState(()=>{const u=localStorage.getItem("sticker_confirm_delete");return u===null?!0:u==="true"}),l=r.useRef();r.useEffect(()=>(l.current&&clearTimeout(l.current),l.current=window.setTimeout(()=>{ie.saveStickers(t)},zo),()=>{l.current&&clearTimeout(l.current)}),[t]);const g=r.useCallback(u=>{a(u),localStorage.setItem("sticker_confirm_delete",String(u))},[]),M=r.useCallback(u=>{n(j=>{const y=Math.max(...j.map(O=>O.zIndex||1),0),C={...u,id:po(),zIndex:y+1,style:u.type==="text"?u.style||tr:void 0};return[...j,C]})},[]),d=r.useCallback((u,j)=>{n(y=>y.map(C=>C.id===u?{...C,...j}:C))},[]),x=r.useCallback(u=>{n(j=>j.filter(y=>y.id!==u)),i(j=>j===u?null:j)},[]),D=r.useCallback(u=>{n(j=>{const y=Math.max(...j.map(C=>C.zIndex||1),0);return j.map(C=>C.id===u?{...C,zIndex:y+1}:C)})},[]),N=r.useCallback(u=>{i(u)},[]),I=r.useMemo(()=>({stickers:t,selectedStickerId:s,confirmDelete:c,addSticker:M,updateSticker:d,deleteSticker:x,selectSticker:N,bringToTop:D,setConfirmDelete:g}),[t,s,c,M,d,x,N,D,g]);return o.jsx(Yn.Provider,{value:I,children:e})},Co=()=>{const e=r.useContext(Yn);if(e===void 0)throw new Error("useZenShelf must be used within a ZenShelfProvider");return e};function ln(e,t){const n=URL.createObjectURL(e),s=document.createElement("a");s.href=n,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}async function Lo(e){try{await navigator.clipboard.write([new ClipboardItem({"image/png":e})])}catch(t){throw t}}function So(e){return new Promise(t=>{const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const s=n.getContext("2d");s?(s.drawImage(e,0,0),n.toBlob(i=>{t(i)},"image/png")):t(null)})}function ko(e){return new Promise(t=>{if(e.type!=="text"){t(null);return}const n=getComputedStyle(document.documentElement).getPropertyValue("--color-sticker-stroke").trim()||"white",s=600,i=48,c=.25,l=document.createElement("canvas").getContext("2d");if(!l){t(null);return}l.font=`900 ${i}px "Bricolage Grotesque", sans-serif`;const g=e.content.split(`
`),M=i*.9;let d=0;for(const P of g){const H=l.measureText(P);d=Math.max(d,H.width)}const x=i*c,D=x/2,N=16+D,I=12+D,u=d,j=M*g.length,y=i*.2,C=u+N*2,O=j+I*2+y,F=O<s?s/O:1,b=Math.ceil(C*F),p=Math.ceil(O*F),L=Math.round(i*F),E=Math.round(N*F),Q=Math.round(x*F),J=L*.9,K=document.createElement("canvas");K.width=b,K.height=p;const U=K.getContext("2d");if(U){U.font=`900 ${L}px "Bricolage Grotesque", sans-serif`,U.textBaseline="middle";let P;e.style?.textAlign==="center"?(U.textAlign="center",P=b/2):e.style?.textAlign==="right"?(U.textAlign="right",P=b-E):(U.textAlign="left",P=E),U.strokeStyle=n,U.lineWidth=Q,U.lineJoin="round",U.miterLimit=2;const H=J*g.length;let k=(p-H)/2+J/2;for(const _ of g)U.strokeText(_,P,k),k+=J;U.fillStyle=e.style?.color||"#1C1C1E",k=(p-H)/2+J/2;for(const _ of g)U.fillText(_,P,k),k+=J;K.toBlob(_=>{t(_)},"image/png")}else t(null)})}function Oo(e){return new Promise(t=>{if(e.type!=="image"){t(null);return}const n=new Image;n.onload=()=>{const s=getComputedStyle(document.documentElement).getPropertyValue("--color-sticker-stroke").trim()||"white",i=16,c=6,a=12,l=6,g=c+a,M=n.width+g*2,d=n.height+g*2+l,x=document.createElement("canvas");x.width=M,x.height=d;const D=x.getContext("2d");if(D){const N=g,I=g,u=(j,y,C,O,F)=>{D.beginPath(),D.moveTo(j+F,y),D.lineTo(j+C-F,y),D.quadraticCurveTo(j+C,y,j+C,y+F),D.lineTo(j+C,y+O-F),D.quadraticCurveTo(j+C,y+O,j+C-F,y+O),D.lineTo(j+F,y+O),D.quadraticCurveTo(j,y+O,j,y+O-F),D.lineTo(j,y+F),D.quadraticCurveTo(j,y,j+F,y),D.closePath()};D.save(),D.shadowColor="rgba(0, 0, 0, 0.15)",D.shadowBlur=a,D.shadowOffsetY=l,u(N,I,n.width,n.height,i),D.fillStyle="white",D.fill(),D.restore(),u(N,I,n.width,n.height,i),D.strokeStyle=s,D.lineWidth=c*2,D.stroke(),D.save(),u(N,I,n.width,n.height,i),D.clip(),D.drawImage(n,N,I),D.restore(),x.toBlob(j=>{t(j)},"image/png")}else t(null)},n.onerror=()=>{t(null)},n.src=e.content})}const wo="_canvas_1mg62_7",bo="_creativeMode_1mg62_37",Qo="_sticker_1mg62_57",vo="_stickerText_1mg62_83",Uo="_dragging_1mg62_99",_o="_creativeHover_1mg62_109",Yo="_imageSticker_1mg62_125",Ro="_textSticker_1mg62_119",Po="_bounceBack_1mg62_177",Bo="_selected_1mg62_205",Fo="_imageContainer_1mg62_301",Wo="_resizeHandle_1mg62_315",Go="_deleteButton_1mg62_371",$o="_textInputPopup_1mg62_441",Zo="_textInputInner_1mg62_475",Vo="_textInputLabel_1mg62_499",Ho="_textInput_1mg62_441",Xo="_styleOptionsSection_1mg62_575",Jo="_alignmentGroup_1mg62_589",Ko="_highlightBackground_1mg62_615",qo="_alignmentButton_1mg62_641",ec="_colorOptionsGrid_1mg62_683",tc="_colorOptionBtn_1mg62_701",nc="_active_1mg62_677",rc="_textInputActions_1mg62_739",sc="_textInputCancel_1mg62_751",ic="_textInputConfirm_1mg62_787",oc="_floatingToolbar_1mg62_837",cc="_toolbarDivider_1mg62_871",ac="_alignButton_1mg62_885",Mc="_colorButton_1mg62_933",lc="_contextMenu_1mg62_973",uc="_menuLabel_1mg62_1009",gc="_menuDivider_1mg62_1035",dc="_menuOptions_1mg62_1073",Ic="_menuItem_1mg62_1089",Dc="_danger_1mg62_1151",Nc="_menuIcon_1mg62_1169",xc="_deleting_1mg62_1203",jc="_stickerPreviewContainer_1mg62_1221",Tc="_stickerPreviewInput_1mg62_1241",yc="_stickerToolbar_1mg62_1341",Ec="_toolbarAlignGroup_1mg62_1373",mc="_toolbarHighlight_1mg62_1393",fc="_toolbarIcon_1mg62_1419",Ac="_toolbarAlignBtn_1mg62_1443",zc="_toolbarColorGroup_1mg62_1485",pc="_toolbarColorBtn_1mg62_1495",hc="_toolbarCancelBtn_1mg62_1531",Cc="_toolbarConfirmBtn_1mg62_1565",Lc="_recycleBin_1mg62_1615",Sc="_visible_1mg62_1653",kc="_recycleIcon_1mg62_1663",Oc="_dragOver_1mg62_1679",h={canvas:wo,creativeMode:bo,sticker:Qo,stickerText:vo,dragging:Uo,creativeHover:_o,imageSticker:Yo,textSticker:Ro,bounceBack:Po,selected:Bo,imageContainer:Fo,resizeHandle:Wo,deleteButton:Go,textInputPopup:$o,textInputInner:Zo,textInputLabel:Vo,textInput:Ho,styleOptionsSection:Xo,alignmentGroup:Jo,highlightBackground:Ko,alignmentButton:qo,colorOptionsGrid:ec,colorOptionBtn:tc,active:nc,textInputActions:rc,textInputCancel:sc,textInputConfirm:ic,floatingToolbar:oc,toolbarDivider:cc,alignButton:ac,colorButton:Mc,contextMenu:lc,menuLabel:uc,menuDivider:gc,menuOptions:dc,menuItem:Ic,danger:Dc,menuIcon:Nc,deleting:xc,stickerPreviewContainer:jc,stickerPreviewInput:Tc,stickerToolbar:yc,toolbarAlignGroup:Ec,toolbarHighlight:mc,toolbarIcon:fc,toolbarAlignBtn:Ac,toolbarColorGroup:zc,toolbarColorBtn:pc,toolbarCancelBtn:hc,toolbarConfirmBtn:Cc,recycleBin:Lc,visible:Sc,recycleIcon:kc,dragOver:Oc},Tt=["#1C1C1E","#FF3B30","#007AFF","#34C759","#FF9500","#AF52DE","#FFFFFF"],wc=({sticker:e,stickerRect:t,onStyleChange:n})=>{const s=e.style?.textAlign||"left",i=e.style?.color||Tt[0],c={left:t.left+t.width/2,top:t.top-50,transform:"translateX(-50%)"};return o.jsxs("div",{className:h.floatingToolbar,style:c,children:[o.jsx("button",{className:`${h.alignButton} ${s==="left"?h.active:""}`,onClick:()=>n({textAlign:"left"}),title:"Align Left",children:"☰"}),o.jsx("button",{className:`${h.alignButton} ${s==="center"?h.active:""}`,onClick:()=>n({textAlign:"center"}),title:"Center",children:"≡"}),o.jsx("button",{className:`${h.alignButton} ${s==="right"?h.active:""}`,onClick:()=>n({textAlign:"right"}),title:"Align Right",children:"≡"}),o.jsx("div",{className:h.toolbarDivider}),Tt.map(a=>o.jsx("button",{className:`${h.colorButton} ${i===a?h.active:""}`,style:{background:a},onClick:()=>n({color:a}),title:a},a))]})},bc=(e,t)=>e.sticker.id===t.sticker.id&&e.sticker.style?.color===t.sticker.style?.color&&e.sticker.style?.textAlign===t.sticker.style?.textAlign&&e.stickerRect.left===t.stickerRect.left&&e.stickerRect.top===t.stickerRect.top&&e.stickerRect.width===t.stickerRect.width,Qc=fe.memo(wc,bc),un="#1C1C1E",gn="#FFFFFF",vc=(e,t)=>{if(t!=="dark")return e;const n=e.toUpperCase();return n===un.toUpperCase()||n==="#1C1C1E"?gn:n===gn.toUpperCase()||n==="#FFF"?un:e},Ce={BOTTOM_MARGIN:200,TOP_LEFT:{width:48,height:48},TOP_RIGHT:{width:48,height:48},EDGE_MARGIN:20},Uc=({sticker:e,isSelected:t,isCreativeMode:n,onSelect:s,onDelete:i,onPositionChange:c,onStyleChange:a,onBringToTop:l,onScaleChange:g,isEditMode:M,viewportScale:d,onDoubleClick:x,onDragStart:D,onDragEnd:N})=>{const{theme:I}=at(),u=r.useRef(null),[j,y]=r.useState(!1),[C,O]=r.useState(!1),[F,b]=r.useState(!1),[p,L]=r.useState(null),E=r.useRef(null),Q=r.useRef(null),[J,K]=r.useState(300),U=r.useRef({rotation:0,targetRotation:0,lastX:0}),P=r.useRef(!1),H=r.useRef();r.useEffect(()=>{t&&u.current?L(u.current.getBoundingClientRect()):L(null)},[t,e.x,e.y]);const k=r.useCallback(()=>{const{rotation:w,targetRotation:m}=U.current,v=m-w,$=w+v*.15;U.current.rotation=$,u.current&&(u.current.style.transform=`rotate(${$.toFixed(2)}deg)`),P.current||Math.abs(v)>.05||Math.abs($)>.05?H.current=requestAnimationFrame(k):(u.current&&(u.current.style.transform=""),U.current.rotation=0,U.current.targetRotation=0)},[]),_=w=>{w.target.closest(`.${h.deleteButton}`)||w.target.closest(`.${h.resizeHandle}`)||(n&&!M&&s(),l(),y(!0),P.current=!0,D?.(),E.current={x:w.clientX,y:w.clientY,stickerX:e.x,stickerY:e.y},U.current.lastX=w.clientX,U.current.targetRotation=0,H.current&&cancelAnimationFrame(H.current),H.current=requestAnimationFrame(k),w.preventDefault(),w.stopPropagation())};r.useEffect(()=>{if(!j)return;let w=null,m=null;const v=X=>{if(!E.current)return;const ne=X.clientX-E.current.x,q=X.clientY-E.current.y;m={x:E.current.stickerX+ne/d,y:E.current.stickerY+q/d},w===null&&(w=requestAnimationFrame(()=>{w=null,m&&u.current&&(u.current.style.left=`${m.x*d}px`,u.current.style.top=`${m.y*d}px`)}));const V=X.clientX-U.current.lastX;U.current.lastX=X.clientX;const ue=.4,Ie=12;let De=-V*ue;De=Math.max(-Ie,Math.min(Ie,De)),U.current.targetRotation=De;const ce=document.getElementById("sticker-recycle-bin");if(ce&&m){const ae=ce.getBoundingClientRect(),xe=u.current?.getBoundingClientRect();xe&&(!(xe.right<ae.left||xe.left>ae.right||xe.bottom<ae.top||xe.top>ae.bottom)?(ce.classList.add(h.dragOver),u.current&&u.current.classList.add(h.deleting)):(ce.classList.remove(h.dragOver),u.current&&u.current.classList.remove(h.deleting)))}},$=()=>{w!==null&&cancelAnimationFrame(w);const X=u.current;if(!X){y(!1),P.current=!1,E.current=null,N?.();return}const ne=document.getElementById("sticker-recycle-bin");if(ne){const ee=ne.getBoundingClientRect(),ge=X.getBoundingClientRect();if(!(ge.right<ee.left||ge.left>ee.right||ge.bottom<ee.top||ge.top>ee.bottom)){i(),y(!1),P.current=!1,E.current=null,N?.();return}}let q=m?.x??e.x,V=m?.y??e.y;const ue=window.innerWidth,Ie=window.innerHeight;let De=!1;const ce=X.getBoundingClientRect(),ae=ce.width,xe=ce.height,ye=q*d,Ae=V*d,ze={left:ye,top:Ae,right:ye+ae,bottom:Ae+xe},A=(ee,ge)=>!(ee.right<ge.left||ee.left>ge.right||ee.bottom<ge.top||ee.top>ge.bottom),R=document.querySelector('[data-ui-zone="bottom"]');if(R){const ee=R.getBoundingClientRect();if(A(ze,ee)){const ge=ze.bottom-ee.top+Ce.EDGE_MARGIN,de=ze.right-ee.left+Ce.EDGE_MARGIN,Re=ee.right-ze.left+Ce.EDGE_MARGIN,tt=ze.left-de>=Ce.EDGE_MARGIN,nt=ze.right+Re<=ue-Ce.EDGE_MARGIN;let Pe=ge,Qe="up";switch(tt&&de<Pe&&(Pe=de,Qe="left"),nt&&Re<Pe&&(Pe=Re,Qe="right"),Qe){case"up":V=(ee.top-xe-Ce.EDGE_MARGIN)/d;break;case"left":q=(ee.left-ae-Ce.EDGE_MARGIN)/d;break;case"right":q=(ee.right+Ce.EDGE_MARGIN)/d;break}De=!0}}const f=ae/d,B=xe/d,Z=ue/d-f-Ce.EDGE_MARGIN/d,te=Ie/d-B-Ce.EDGE_MARGIN/d,se=Ce.EDGE_MARGIN/d,le=Ce.EDGE_MARGIN/d;let Me=q;Z<se?Me=Math.max(Z,Math.min(se,q)):Me=Math.max(se,Math.min(Z,q));let Ee=V;te<le?Ee=Math.max(te,Math.min(le,V)):Ee=Math.max(le,Math.min(te,V)),(Math.abs(Me-q)>.1||Math.abs(Ee-V)>.1)&&(De=!0),q=Me,V=Ee,De&&(u.current&&(u.current.classList.add(h.bounceBack),u.current.style.left=`${q*d}px`,u.current.style.top=`${V*d}px`),b(!0),setTimeout(()=>b(!1),350)),(De||m)&&c(q,V),y(!1),P.current=!1,E.current=null,N?.();const mt=document.getElementById("sticker-recycle-bin");mt&&mt.classList.remove(h.dragOver),u.current&&u.current.classList.remove(h.deleting),U.current.targetRotation=0};return document.addEventListener("mousemove",v,{capture:!0}),document.addEventListener("mouseup",$,{capture:!0}),()=>{document.removeEventListener("mousemove",v,{capture:!0}),document.removeEventListener("mouseup",$,{capture:!0}),w!==null&&cancelAnimationFrame(w)}},[j,c,k]),r.useEffect(()=>()=>{H.current&&cancelAnimationFrame(H.current)},[]);const z=w=>{w.preventDefault(),w.stopPropagation(),O(!0),Q.current={x:w.clientX,y:w.clientY,startScale:e.scale||1}};r.useEffect(()=>{if(!C)return;let w=null,m=null;const v=X=>{if(!Q.current)return;const ne=X.clientX-Q.current.x,q=X.clientY-Q.current.y,ue=(ne+q)/2/200;m=Math.max(.2,Math.min(3,Q.current.startScale+ue)),w===null&&(w=requestAnimationFrame(()=>{w=null,m!==null&&g(m)}))},$=()=>{w!==null&&(cancelAnimationFrame(w),m!==null&&g(m)),O(!1),Q.current=null};return document.addEventListener("mousemove",v),document.addEventListener("mouseup",$),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",$),w!==null&&cancelAnimationFrame(w)}},[C,g]);const T=w=>{K(w.currentTarget.naturalWidth)},S=w=>{w.stopPropagation(),x?.()},G=[h.sticker,e.type==="text"&&h.stickerText,j&&h.dragging,F&&h.bounceBack,t&&h.selected,n&&h.creativeHover].filter(Boolean).join(" "),Y=e.type==="image"?Math.min(J,it)*(e.scale||1)*d:void 0,W=(e.style?.fontSize||40)*d;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{ref:u,className:G,style:{left:e.x*d,top:e.y*d,zIndex:j?3e3:e.zIndex||1},"data-sticker-id":e.id,onMouseDown:_,onDoubleClick:S,children:[e.type==="text"?o.jsx("div",{className:[h.textSticker,j&&h.dragging,n&&h.creativeHover].filter(Boolean).join(" "),style:{color:vc(e.style?.color||"#1C1C1E",I),textAlign:e.style?.textAlign||"left",fontSize:W},children:e.content}):o.jsxs("div",{className:h.imageContainer,children:[o.jsx("img",{src:e.content,alt:"sticker",className:[h.imageSticker,j&&h.dragging,n&&h.creativeHover].filter(Boolean).join(" "),style:{width:Y},draggable:!1,onLoad:T}),o.jsx("div",{className:h.resizeHandle,onMouseDown:z})]}),n&&!M&&o.jsx("button",{className:h.deleteButton,onClick:w=>{w.stopPropagation(),i()},children:"×"})]}),t&&e.type==="text"&&p&&o.jsx(Qc,{sticker:e,stickerRect:p,onStyleChange:a})]})},_c=(e,t)=>e.sticker.id===t.sticker.id&&e.sticker.x===t.sticker.x&&e.sticker.y===t.sticker.y&&e.sticker.content===t.sticker.content&&e.sticker.zIndex===t.sticker.zIndex&&e.sticker.scale===t.sticker.scale&&e.sticker.type===t.sticker.type&&e.sticker.style?.color===t.sticker.style?.color&&e.sticker.style?.textAlign===t.sticker.style?.textAlign&&e.sticker.style?.fontSize===t.sticker.style?.fontSize&&e.isSelected===t.isSelected&&e.isCreativeMode===t.isCreativeMode&&e.isEditMode===t.isEditMode&&e.viewportScale===t.viewportScale,Yc=fe.memo(Uc,_c),dn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIgNkMyIDUuNzM0NzggMi4xMDUzNiA1LjQ4MDQzIDIuMjkyODkgNS4yOTI4OUMyLjQ4MDQzIDUuMTA1MzYgMi43MzQ3OCA1IDMgNUgyMUMyMS4yNjUyIDUgMjEuNTE5NiA1LjEwNTM2IDIxLjcwNzEgNS4yOTI4OUMyMS44OTQ2IDUuNDgwNDMgMjIgNS43MzQ3OCAyMiA2QzIyIDYuMjY1MjIgMjEuODk0NiA2LjUxOTU3IDIxLjcwNzEgNi43MDcxMUMyMS41MTk2IDYuODk0NjQgMjEuMjY1MiA3IDIxIDdIM0MyLjg2ODY4IDcgMi43Mzg2NCA2Ljk3NDEzIDIuNjE3MzIgNi45MjM4OEMyLjQ5NTk5IDYuODczNjIgMi4zODU3NSA2Ljc5OTk3IDIuMjkyODkgNi43MDcxMUMyLjIwMDAzIDYuNjE0MjUgMi4xMjYzOCA2LjUwNDAxIDIuMDc2MTIgNi4zODI2OEMyLjAyNTg3IDYuMjYxMzYgMiA2LjEzMTMyIDIgNlpNMiAxMkMyIDExLjczNDggMi4xMDUzNiAxMS40ODA0IDIuMjkyODkgMTEuMjkyOUMyLjQ4MDQzIDExLjEwNTQgMi43MzQ3OCAxMSAzIDExSDIxQzIxLjI2NTIgMTEgMjEuNTE5NiAxMS4xMDU0IDIxLjcwNzEgMTEuMjkyOUMyMS44OTQ2IDExLjQ4MDQgMjIgMTEuNzM0OCAyMiAxMkMyMiAxMi4yNjUyIDIxLjg5NDYgMTIuNTE5NiAyMS43MDcxIDEyLjcwNzFDMjEuNTE5NiAxMi44OTQ2IDIxLjI2NTIgMTMgMjEgMTNIM0MyLjczNDc4IDEzIDIuNDgwNDMgMTIuODk0NiAyLjI5Mjg5IDEyLjcwNzFDMi4xMDUzNiAxMi41MTk2IDIgMTIuMjY1MiAyIDEyWk0yIDE4QzIgMTcuNzM0OCAyLjEwNTM2IDE3LjQ4MDQgMi4yOTI4OSAxNy4yOTI5QzIuNDgwNDMgMTcuMTA1NCAyLjczNDc4IDE3IDMgMTdIMTRDMTQuMjY1MiAxNyAxNC41MTk2IDE3LjEwNTQgMTQuNzA3MSAxNy4yOTI5QzE0Ljg5NDYgMTcuNDgwNCAxNSAxNy43MzQ4IDE1IDE4QzE1IDE4LjI2NTIgMTQuODk0NiAxOC41MTk2IDE0LjcwNzEgMTguNzA3MUMxNC41MTk2IDE4Ljg5NDYgMTQuMjY1MiAxOSAxNCAxOUgzQzIuNzM0NzggMTkgMi40ODA0MyAxOC44OTQ2IDIuMjkyODkgMTguNzA3MUMyLjEwNTM2IDE4LjUxOTYgMiAxOC4yNjUyIDIgMThaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K",In="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIgNkMyIDUuNzM0NzggMi4xMDUzNiA1LjQ4MDQzIDIuMjkyODkgNS4yOTI4OUMyLjQ4MDQzIDUuMTA1MzYgMi43MzQ3OCA1IDMgNUgyMUMyMS4yNjUyIDUgMjEuNTE5NiA1LjEwNTM2IDIxLjcwNzEgNS4yOTI4OUMyMS44OTQ2IDUuNDgwNDMgMjIgNS43MzQ3OCAyMiA2QzIyIDYuMjY1MjIgMjEuODk0NiA2LjUxOTU3IDIxLjcwNzEgNi43MDcxMUMyMS41MTk2IDYuODk0NjQgMjEuMjY1MiA3IDIxIDdIM0MyLjg2ODY4IDcgMi43Mzg2NCA2Ljk3NDEzIDIuNjE3MzIgNi45MjM4OEMyLjQ5NTk5IDYuODczNjIgMi4zODU3NSA2Ljc5OTk3IDIuMjkyODkgNi43MDcxMUMyLjIwMDAzIDYuNjE0MjUgMi4xMjYzOCA2LjUwNDAxIDIuMDc2MTIgNi4zODI2OEMyLjAyNTg3IDYuMjYxMzYgMiA2LjEzMTMyIDIgNlpNMiAxMkMyIDExLjczNDggMi4xMDUzNiAxMS40ODA0IDIuMjkyODkgMTEuMjkyOUMyLjQ4MDQzIDExLjEwNTQgMi43MzQ3OCAxMSAzIDExSDIxQzIxLjI2NTIgMTEgMjEuNTE5NiAxMS4xMDU0IDIxLjcwNzEgMTEuMjkyOUMyMS44OTQ2IDExLjQ4MDQgMjIgMTEuNzM0OCAyMiAxMkMyMiAxMi4yNjUyIDIxLjg5NDYgMTIuNTE5NiAyMS43MDcxIDEyLjcwNzFDMjEuNTE5NiAxMi44OTQ2IDIxLjI2NTIgMTMgMjEgMTNIM0MyLjczNDc4IDEzIDIuNDgwNDMgMTIuODk0NiAyLjI5Mjg5IDEyLjcwNzFDMi4xMDUzNiAxMi41MTk2IDIgMTIuMjY1MiAyIDEyWk02IDE4QzYgMTcuNzM0OCA2LjEwNTM2IDE3LjQ4MDQgNi4yOTI4OSAxNy4yOTI5QzYuNDgwNDMgMTcuMTA1NCA2LjczNDc4IDE3IDcgMTdIMTdDMTcuMjY1MiAxNyAxNy41MTk2IDE3LjEwNTQgMTcuNzA3MSAxNy4yOTI5QzE3Ljg5NDYgMTcuNDgwNCAxOCAxNy43MzQ4IDE4IDE4QzE4IDE4LjI2NTIgMTcuODk0NiAxOC41MTk2IDE3LjcwNzEgMTguNzA3MUMxNy41MTk2IDE4Ljg5NDYgMTcuMjY1MiAxOSAxNyAxOUg3QzYuNzM0NzggMTkgNi40ODA0MyAxOC44OTQ2IDYuMjkyODkgMTguNzA3MUM2LjEwNTM2IDE4LjUxOTYgNiAxOC4yNjUyIDYgMThaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K",Dn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIgNkMyIDUuNzM0NzggMi4xMDUzNiA1LjQ4MDQzIDIuMjkyODkgNS4yOTI4OUMyLjQ4MDQzIDUuMTA1MzYgMi43MzQ3OCA1IDMgNUgyMUMyMS4yNjUyIDUgMjEuNTE5NiA1LjEwNTM2IDIxLjcwNzEgNS4yOTI4OUMyMS44OTQ2IDUuNDgwNDMgMjIgNS43MzQ3OCAyMiA2QzIyIDYuMjY1MjIgMjEuODk0NiA2LjUxOTU3IDIxLjcwNzEgNi43MDcxMUMyMS41MTk2IDYuODk0NjQgMjEuMjY1MiA3IDIxIDdIM0MyLjg2ODY4IDcgMi43Mzg2NCA2Ljk3NDEzIDIuNjE3MzIgNi45MjM4OEMyLjQ5NTk5IDYuODczNjIgMi4zODU3NSA2Ljc5OTk3IDIuMjkyODkgNi43MDcxMUMyLjIwMDAzIDYuNjE0MjUgMi4xMjYzOCA2LjUwNDAxIDIuMDc2MTIgNi4zODI2OEMyLjAyNTg3IDYuMjYxMzYgMiA2LjEzMTMyIDIgNlpNMiAxMkMyIDExLjczNDggMi4xMDUzNiAxMS40ODA0IDIuMjkyODkgMTEuMjkyOUMyLjQ4MDQzIDExLjEwNTQgMi43MzQ3OCAxMSAzIDExSDIxQzIxLjI2NTIgMTEgMjEuNTE5NiAxMS4xMDU0IDIxLjcwNzEgMTEuMjkyOUMyMS44OTQ2IDExLjQ4MDQgMjIgMTEuNzM0OCAyMiAxMkMyMiAxMi4yNjUyIDIxLjg5NDYgMTIuNTE5NiAyMS43MDcxIDEyLjcwNzFDMjEuNTE5NiAxMi44OTQ2IDIxLjI2NTIgMTMgMjEgMTNIM0MyLjczNDc4IDEzIDIuNDgwNDMgMTIuODk0NiAyLjI5Mjg5IDEyLjcwNzFDMi4xMDUzNiAxMi41MTk2IDIgMTIuMjY1MiAyIDEyWk05IDE4QzkgMTcuNzM0OCA5LjEwNTM2IDE3LjQ4MDQgOS4yOTI4OSAxNy4yOTI5QzkuNDgwNDMgMTcuMTA1NCA5LjczNDc4IDE3IDEwIDE3SDIxQzIxLjI2NTIgMTcgMjEuNTE5NiAxNy4xMDU0IDIxLjcwNzEgMTcuMjkyOUMyMS44OTQ2IDE3LjQ4MDQgMjIgMTcuNzM0OCAyMiAxOEMyMiAxOC4yNjUyIDIxLjg5NDYgMTguNTE5NiAyMS43MDcxIDE4LjcwNzFDMjEuNTE5NiAxOC44OTQ2IDIxLjI2NTIgMTkgMjEgMTlIMTBDOS43MzQ3OCAxOSA5LjQ4MDQzIDE4Ljg5NDYgOS4yOTI4OSAxOC43MDcxQzkuMTA1MzYgMTguNTE5NiA5IDE4LjI2NTIgOSAxOFoiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo=",Nn="#1C1C1E",xn="#FFFFFF",Rc=(e,t)=>{if(t!=="dark")return e;const n=e.toUpperCase();return n===Nn.toUpperCase()||n==="#1C1C1E"?xn:n===xn.toUpperCase()||n==="#FFF"?Nn:e},Pc=({x:e,y:t,initialText:n="",initialStyle:s,onSubmit:i,onCancel:c,viewportScale:a})=>{const{t:l}=We(),{theme:g}=at(),M=r.useRef(null),d=r.useRef(null),x=r.useRef(null),D=r.useRef(null),[N,I]=r.useState(n),[u,j]=r.useState(s?.textAlign||"left"),[y,C]=r.useState(s?.color||Tt[0]),[O,F]=r.useState(s?.fontSize||40),[b,p]=r.useState(!1),L=[{label:l.textInput.l,value:40},{label:l.textInput.m,value:32},{label:l.textInput.s,value:24}];r.useEffect(()=>{if(x.current&&Ke(x.current,200),d.current&&(n||Ke(d.current,200)),M.current&&(M.current.focus(),n)){M.current.innerText=n;const k=document.createRange();k.selectNodeContents(M.current),k.collapse(!1);const _=window.getSelection();_?.removeAllRanges(),_?.addRange(k)}},[n]),r.useEffect(()=>{M.current&&(M.current.style.fontSize=`${O*a}px`)},[O,a]);const E=r.useCallback((k,_=!0)=>{b||(p(!0),_&&d.current&&Be(d.current,150),x.current?Be(x.current,150,k):k())},[b]);r.useEffect(()=>{const k=z=>{if(b)return;const T=z.target;if(M.current?.contains(T)||x.current?.contains(T))return;const S=M.current?.innerText?.trim()||"";S?E(()=>i(S,{color:y,textAlign:u,fontSize:O}),!1):E(c)},_=setTimeout(()=>{document.addEventListener("mousedown",k)},100);return()=>{clearTimeout(_),document.removeEventListener("mousedown",k)}},[y,u,O,i,c,b,E]);const Q=k=>{k.key==="Enter"&&!k.shiftKey?(k.preventDefault(),U()):k.key==="Escape"&&P()},J=()=>{M.current&&I(M.current.innerText)},K=k=>{k.preventDefault();const _=k.clipboardData.getData("text/plain");document.execCommand("insertText",!1,_),J()},U=()=>{const k=M.current?.innerText?.trim()||"";k?E(()=>i(k,{color:y,textAlign:u,fontSize:O}),!1):P()},P=()=>{E(c)},H=L.findIndex(k=>k.value===O);return Ye.createPortal(o.jsxs("div",{ref:D,className:`${h.stickerPreviewContainer} ${b?h.exiting:""}`,style:{left:e,top:t},children:[o.jsx("div",{ref:d,children:o.jsx("div",{ref:M,className:h.stickerPreviewInput,contentEditable:!0,suppressContentEditableWarning:!0,style:{color:Rc(y,g),textAlign:u,fontSize:`${O*a}px`},onInput:J,onKeyDown:Q,onPaste:K,onClick:k=>k.stopPropagation(),"data-placeholder":l.textInput.placeholder})}),o.jsxs("div",{ref:x,className:h.stickerToolbar,onClick:k=>k.stopPropagation(),children:[o.jsxs("div",{className:h.toolbarAlignGroup,children:[o.jsx("div",{className:h.toolbarHighlight,style:{transform:`translateX(${["left","center","right"].indexOf(u)*100}%)`}}),o.jsx("button",{className:h.toolbarAlignBtn,onClick:()=>j("left"),title:"Align Left",children:o.jsx("span",{className:h.toolbarIcon,style:{WebkitMaskImage:`url(${dn})`,maskImage:`url(${dn})`}})}),o.jsx("button",{className:h.toolbarAlignBtn,onClick:()=>j("center"),title:"Center",children:o.jsx("span",{className:h.toolbarIcon,style:{WebkitMaskImage:`url(${In})`,maskImage:`url(${In})`}})}),o.jsx("button",{className:h.toolbarAlignBtn,onClick:()=>j("right"),title:"Align Right",children:o.jsx("span",{className:h.toolbarIcon,style:{WebkitMaskImage:`url(${Dn})`,maskImage:`url(${Dn})`}})})]}),o.jsx("div",{className:h.toolbarDivider}),o.jsxs("div",{className:h.toolbarAlignGroup,children:[o.jsx("div",{className:h.toolbarHighlight,style:{transform:`translateX(${H*100}%)`}}),L.map(k=>o.jsx("button",{className:h.toolbarAlignBtn,onClick:()=>F(k.value),title:`Font Size: ${k.value}px`,children:k.label},k.value))]}),o.jsx("div",{className:h.toolbarDivider}),o.jsx("div",{className:h.toolbarColorGroup,children:Tt.map(k=>o.jsx("button",{className:`${h.toolbarColorBtn} ${y===k?h.active:""}`,style:{backgroundColor:k},onClick:()=>C(k),title:k},k))}),o.jsx("div",{className:h.toolbarDivider}),o.jsx("button",{className:h.toolbarCancelBtn,onClick:P,children:l.textInput.cancel}),o.jsx("button",{className:h.toolbarConfirmBtn,onClick:U,disabled:!N.trim(),children:l.textInput.confirm})]})]}),document.body)},He="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIgM0MyIDIuNzM0NzggMi4xMDUzNiAyLjQ4MDQzIDIuMjkyODkgMi4yOTI4OUMyLjQ4MDQzIDIuMTA1MzYgMi43MzQ3OCAyIDMgMkgyMUMyMS4yNjUyIDIgMjEuNTE5NiAyLjEwNTM2IDIxLjcwNzEgMi4yOTI4OUMyMS44OTQ2IDIuNDgwNDMgMjIgMi43MzQ3OCAyMiAzQzIyIDMuMjY1MjIgMjEuODk0NiAzLjUxOTU3IDIxLjcwNzEgMy43MDcxMUMyMS41MTk2IDMuODk0NjQgMjEuMjY1MiA0IDIxIDRIM0MyLjczNDc4IDQgMi40ODA0MyAzLjg5NDY0IDIuMjkyODkgMy43MDcxMUMyLjEwNTM2IDMuNTE5NTcgMiAzLjI2NTIyIDIgM1pNMTIgNkMxMi4yNjUyIDYuMDAwMDYgMTIuNTE5NSA2LjEwNTQ1IDEyLjcwNyA2LjI5M0wxOC43MDcgMTIuMjkzQzE4Ljg4OTIgMTIuNDgxNiAxOC45OSAxMi43MzQyIDE4Ljk4NzcgMTIuOTk2NEMxOC45ODU0IDEzLjI1ODYgMTguODgwMiAxMy41MDk0IDE4LjY5NDggMTMuNjk0OEMxOC41MDk0IDEzLjg4MDIgMTguMjU4NiAxMy45ODU0IDE3Ljk5NjQgMTMuOTg3N0MxNy43MzQyIDEzLjk5IDE3LjQ4MTYgMTMuODg5MiAxNy4yOTMgMTMuNzA3TDEzIDkuNDE0VjIxQzEzIDIxLjI2NTIgMTIuODk0NiAyMS41MTk2IDEyLjcwNzEgMjEuNzA3MUMxMi41MTk2IDIxLjg5NDYgMTIuMjY1MiAyMiAxMiAyMkMxMS43MzQ4IDIyIDExLjQ4MDQgMjEuODk0NiAxMS4yOTI5IDIxLjcwNzFDMTEuMTA1NCAyMS41MTk2IDExIDIxLjI2NTIgMTEgMjFWOS40MTRMNi43MDcgMTMuNzA3QzYuNTE4NCAxMy44ODkyIDYuMjY1OCAxMy45OSA2LjAwMzYgMTMuOTg3N0M1Ljc0MTQgMTMuOTg1NCA1LjQ5MDU5IDEzLjg4MDIgNS4zMDUxOCAxMy42OTQ4QzUuMTE5NzcgMTMuNTA5NCA1LjAxNDYgMTMuMjU4NiA1LjAxMjMzIDEyLjk5NjRDNS4wMTAwNSAxMi43MzQyIDUuMTEwODQgMTIuNDgxNiA1LjI5MyAxMi4yOTNMMTEuMjkzIDYuMjkzQzExLjQ4MDUgNi4xMDU0NSAxMS43MzQ4IDYuMDAwMDYgMTIgNloiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo=",jn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTggMTJDOCAxMC45MzkxIDguNDIxNDMgOS45MjE3MiA5LjE3MTU3IDkuMTcxNTdDOS45MjE3MiA4LjQyMTQzIDEwLjkzOTEgOCAxMiA4QzEzLjA2MDkgOCAxNC4wNzgzIDguNDIxNDMgMTQuODI4NCA5LjE3MTU3QzE1LjU3ODYgOS45MjE3MiAxNiAxMC45MzkxIDE2IDEyQzE2IDEzLjA2MDkgMTUuNTc4NiAxNC4wNzgzIDE0LjgyODQgMTQuODI4NEMxNC4wNzgzIDE1LjU3ODYgMTMuMDYwOSAxNiAxMiAxNkMxMC45MzkxIDE2IDkuOTIxNzIgMTUuNTc4NiA5LjE3MTU3IDE0LjgyODRDOC40MjE0MyAxNC4wNzgzIDggMTMuMDYwOSA4IDEyWk0xMiAxMEMxMS40Njk2IDEwIDEwLjk2MDkgMTAuMjEwNyAxMC41ODU4IDEwLjU4NThDMTAuMjEwNyAxMC45NjA5IDEwIDExLjQ2OTYgMTAgMTJDMTAgMTIuNTMwNCAxMC4yMTA3IDEzLjAzOTEgMTAuNTg1OCAxMy40MTQyQzEwLjk2MDkgMTMuNzg5MyAxMS40Njk2IDE0IDEyIDE0QzEyLjUzMDQgMTQgMTMuMDM5MSAxMy43ODkzIDEzLjQxNDIgMTMuNDE0MkMxMy43ODkzIDEzLjAzOTEgMTQgMTIuNTMwNCAxNCAxMkMxNCAxMS40Njk2IDEzLjc4OTMgMTAuOTYwOSAxMy40MTQyIDEwLjU4NThDMTMuMDM5MSAxMC4yMTA3IDEyLjUzMDQgMTAgMTIgMTBaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwIDIuMDAwMjRDMTEuMjM3NiAxLjI4NTcxIDEyLjc2MjQgMS4yODU3MSAxNCAyLjAwMDI0TDE5LjY2MDIgNS4yNjc4MkMyMC44OTc3IDUuOTgyMzYgMjEuNjYwMiA3LjMwMzY0IDIxLjY2MDIgOC43MzI2NlYxNS4yNjc4QzIxLjY2MDEgMTYuNjk2OCAyMC44OTc3IDE4LjAxODIgMTkuNjYwMiAxOC43MzI3TDE0IDIyLjAwMDJDMTIuNzYyNCAyMi43MTQ3IDExLjIzNzYgMjIuNzE0NyAxMCAyMi4wMDAyTDQuMzM5ODQgMTguNzMyN0MzLjEwMjMxIDE4LjAxODIgMi4zMzk5MyAxNi42OTY4IDIuMzM5ODQgMTUuMjY3OFY4LjczMjY2QzIuMzM5ODQgNy4zMDM2NCAzLjEwMjMgNS45ODIzNiA0LjMzOTg0IDUuMjY3ODJMMTAgMi4wMDAyNFpNMTMgMy43MzI2NkMxMi4zODEyIDMuMzc1MzkgMTEuNjE4OCAzLjM3NTM5IDExIDMuNzMyNjZMNS4zMzk4NCA3LjAwMDI0QzQuNzIxMSA3LjM1NzUyIDQuMzM5ODQgOC4wMTgxNyA0LjMzOTg0IDguNzMyNjZWMTUuMjY3OEM0LjMzOTkzIDE1Ljk4MjMgNC43MjExMSAxNi42NDMgNS4zMzk4NCAxNy4wMDAyTDExIDIwLjI2NzhDMTEuNjE4OCAyMC42MjUgMTIuMzgxMiAyMC42MjUgMTMgMjAuMjY3OEwxOC42NjAyIDE3LjAwMDJDMTkuMjc4OSAxNi42NDMgMTkuNjYwMSAxNS45ODIzIDE5LjY2MDIgMTUuMjY3OFY4LjczMjY2QzE5LjY2MDIgOC4wMTgxNyAxOS4yNzg5IDcuMzU3NTIgMTguNjYwMiA3LjAwMDI0TDEzIDMuNzMyNjZaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K",Bc=({x:e,y:t,type:n,isImageSticker:s,onClose:i,onAddSticker:c,onUploadImage:a,onToggleEditMode:l,isEditMode:g,onEditSticker:M,onDeleteSticker:d,onCopyImage:x,onCopyText:D,onExportImage:N,onExportImageSticker:I,onOpenSettings:u})=>{const{t:j}=We(),y=r.useRef(null),C=r.useRef(!1),O=r.useCallback(()=>{C.current||(C.current=!0,y.current?Be(y.current,200,()=>{i()}):i())},[i]);r.useEffect(()=>{C.current=!1,y.current&&Ke(y.current)},[e,t]),r.useEffect(()=>{const Q=J=>{J.button!==2&&y.current&&!y.current.contains(J.target)&&O()};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[O]),r.useEffect(()=>{const Q=J=>J.preventDefault();return document.addEventListener("contextmenu",Q),()=>document.removeEventListener("contextmenu",Q)},[]);const F=180,b=n==="background"?180:200,p=10;let L=e,E=t;return e+F+p>window.innerWidth&&(L=window.innerWidth-F-p),L<p&&(L=p),t+b+p>window.innerHeight&&(E=window.innerHeight-b-p),E<p&&(E=p),Ye.createPortal(o.jsxs("div",{ref:y,className:h.contextMenu,style:{left:L,top:E},onClick:Q=>Q.stopPropagation(),children:[o.jsx("div",{className:h.menuLabel,children:"EclipseTab"}),o.jsx("div",{className:h.menuDivider}),o.jsx("div",{className:h.menuOptions,children:n==="background"?o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:h.menuItem,onClick:()=>{c(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${Nt})`,maskImage:`url(${Nt})`}}),o.jsx("span",{children:j.contextMenu.addSticker})]}),o.jsxs("button",{className:h.menuItem,onClick:()=>{a(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${He})`,maskImage:`url(${He})`}}),o.jsx("span",{children:j.contextMenu.uploadImage})]}),o.jsxs("button",{className:h.menuItem,onClick:()=>{l(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${Fe})`,maskImage:`url(${Fe})`}}),o.jsx("span",{children:g?j.contextMenu.exitEditMode:j.contextMenu.editMode})]}),o.jsxs("button",{className:h.menuItem,onClick:()=>{u?.(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${jn})`,maskImage:`url(${jn})`}}),o.jsx("span",{children:j.contextMenu.settings})]})]}):o.jsxs(o.Fragment,{children:[s?o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:h.menuItem,onClick:()=>{x?.(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${_e})`,maskImage:`url(${_e})`}}),o.jsx("span",{children:j.contextMenu.copyImage})]}),o.jsxs("button",{className:h.menuItem,onClick:()=>{I?.(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${He})`,maskImage:`url(${He})`}}),o.jsx("span",{children:j.contextMenu.exportImage})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:h.menuItem,onClick:()=>{D?.(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${_e})`,maskImage:`url(${_e})`}}),o.jsx("span",{children:j.contextMenu.copyText})]}),o.jsxs("button",{className:h.menuItem,onClick:()=>{M?.(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${qe})`,maskImage:`url(${qe})`}}),o.jsx("span",{children:j.contextMenu.editSticker})]}),o.jsxs("button",{className:h.menuItem,onClick:()=>{N?.(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${He})`,maskImage:`url(${He})`}}),o.jsx("span",{children:j.contextMenu.exportAsImage})]})]}),o.jsxs("button",{className:`${h.menuItem} ${h.danger}`,onClick:()=>{d?.(),i()},children:[o.jsx("span",{className:h.menuIcon,style:{WebkitMaskImage:`url(${et})`,maskImage:`url(${et})`}}),o.jsx("span",{children:j.contextMenu.deleteSticker})]})]})})]}),document.body)},Fc="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMwIiBoZWlnaHQ9IjQyMCIgdmlld0JveD0iMCAwIDMzMCA0MjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yNSA4MEgzMDVMMjg5Ljk3OSAzMDUuMzIyQzI4OC4yMjUgMzMxLjYyNiAyODcuMzQ4IDM0NC43NzggMjgxLjY2NyAzNTQuNzVDMjc2LjY2NSAzNjMuNTMgMjY5LjEyMSAzNzAuNTg4IDI2MC4wMjggMzc0Ljk5NUMyNDkuNjk5IDM4MCAyMzYuNTE4IDM4MCAyMTAuMTU2IDM4MEgxMTkuODQ0QzkzLjQ4MTcgMzgwIDgwLjMwMDUgMzgwIDY5Ljk3MjMgMzc0Ljk5NUM2MC44NzkzIDM3MC41ODggNTMuMzM0OCAzNjMuNTMgNDguMzMzIDM1NC43NUM0Mi42NTE4IDM0NC43NzggNDEuNzc1IDMzMS42MjYgNDAuMDIxNCAzMDUuMzIyTDI1IDgwWiIgZmlsbD0iI0Q5RDlEOSIvPgo8cGF0aCBkPSJNMjUgODBIMzA1TDI4OS45NzkgMzA1LjMyMkMyODguMjI1IDMzMS42MjYgMjg3LjM0OCAzNDQuNzc4IDI4MS42NjcgMzU0Ljc1QzI3Ni42NjUgMzYzLjUzIDI2OS4xMjEgMzcwLjU4OCAyNjAuMDI4IDM3NC45OTVDMjQ5LjY5OSAzODAgMjM2LjUxOCAzODAgMjEwLjE1NiAzODBIMTE5Ljg0NEM5My40ODE3IDM4MCA4MC4zMDA1IDM4MCA2OS45NzIzIDM3NC45OTVDNjAuODc5MyAzNzAuNTg4IDUzLjMzNDggMzYzLjUzIDQ4LjMzMyAzNTQuNzVDNDIuNjUxOCAzNDQuNzc4IDQxLjc3NSAzMzEuNjI2IDQwLjAyMTQgMzA1LjMyMkwyNSA4MFoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8yMDFfMjE2KSIvPgo8cGF0aCBkPSJNMzA0Ljk5NCA4MC4xNzc3TDMwMi40OTQgMTE1LjE3OEwzMDIuNDkzIDExNS4xNzdDMzAxLjAyMSAxMzguOTYxIDI4MS4zMDMgMTU3LjUgMjU3LjQ3MSAxNTcuNUg3Mi41MjkzQzQ4LjY4OTEgMTU3LjUgMjguOTY1MiAxMzguOTQ5IDI3LjUwNDkgMTE1LjE1M0wyNS4wMDY4IDgwLjE3NzdMMjkuOTkzMiA3OS44MjIzTDMyLjQ5MzIgMTE0LjgyMkwzMi40OTQxIDExNC44MzRMMzIuNDk1MSAxMTQuODQ3QzMzLjc5MzUgMTM2LjAwNSA1MS4zMzE1IDE1Mi41IDcyLjUyOTMgMTUyLjVIMjU3LjQ3MUMyNzguNjY5IDE1Mi41IDI5Ni4yMDcgMTM2LjAwNSAyOTcuNTA1IDExNC44NDdMMjk3LjUwNiAxMTQuODM0TDI5Ny41MDcgMTE0LjgyMkwzMDAuMDA3IDc5LjgyMjNMMzA0Ljk5NCA4MC4xNzc3WiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzIwMV8yMTYpIiBmaWxsLW9wYWNpdHk9IjAuMTUiLz4KPHBhdGggZD0iTTE1NS40NTkgMTMzLjExQzE1NS45NDQgMTMzLjExIDE1Ni4zNzMgMTMzLjE2NSAxNTYuNzQzIDEzMy4yNzFDMTU3LjExMyAxMzMuMzczIDE1Ny40NDkgMTMzLjUxOSAxNTcuNzU0IDEzMy43MTFDMTU4LjA1OSAxMzMuODk4IDE1OC4yNjEgMTM0LjA3MyAxNTguMzU5IDEzNC4yMzhDMTU4LjQ2MyAxMzQuNDAzIDE1OC40OTkgMTM0LjU4NCAxNTguNDY3IDEzNC43NzVDMTU4LjQzNCAxMzQuOTYxIDE1OC4zMzYgMTM1LjEwOCAxNTguMTc5IDEzNS4yMkMxNTguMDIxIDEzNS4zMzcgMTU3Ljg1OSAxMzUuMzk1IDE1Ny42OSAxMzUuMzk2QzE1Ny41MjIgMTM1LjM5IDE1Ny4zNzYgMTM1LjM0IDE1Ny4yNTYgMTM1LjI0NEMxNTcuMTQyIDEzNS4xNDkgMTU2Ljk5MSAxMzUuMDQ4IDE1Ni44MDcgMTM0Ljk0MUMxNTYuNjI3IDEzNC44MyAxNTYuNDI4IDEzNC43NDYgMTU2LjIxMSAxMzQuNjkyQzE1NS45OTkgMTM0LjYzNCAxNTUuNzUxIDEzNC42MDUgMTU1LjQ2OSAxMzQuNjA0QzE1NS4wMDEgMTM0LjYwNCAxNTQuNjI4IDEzNC42OTcgMTU0LjM1NSAxMzQuODc4QzE1NC4wODUgMTM1LjA1MyAxNTMuOTUxIDEzNS4yNzIgMTUzLjk1IDEzNS41MzJDMTUzLjk1IDEzNS43NjYgMTU0LjA0OCAxMzUuOTcyIDE1NC4yNDMgMTM2LjE0N0MxNTQuNDQ1IDEzNi4zMTggMTU1LjA1NiAxMzYuNTQ0IDE1Ni4wNzQgMTM2LjgyMUMxNTcuMDk3IDEzNy4wOTMgMTU3LjgzNCAxMzcuNDM2IDE1OC4yODYgMTM3Ljg0N0MxNTguNzQyIDEzOC4yNTcgMTU4Ljk2OSAxMzguODAxIDE1OC45NyAxMzkuNDgyQzE1OC45NyAxNDAuMjkyIDE1OC42NDIgMTQwLjk0NSAxNTcuOTgzIDE0MS40NEMxNTcuMzMgMTQxLjkzNiAxNTYuNDk2IDE0Mi4xODggMTU1LjQ4MyAxNDIuMTg4QzE1NC44NTggMTQyLjE4NyAxNTQuMzIzIDE0Mi4xMDcgMTUzLjg3NyAxNDEuOTUzQzE1My40MzEgMTQxLjc5OSAxNTMuMDQyIDE0MS41ODUgMTUyLjcxNSAxNDEuMzEzQzE1Mi4zOTYgMTQxLjAzOCAxNTIuMTggMTQwLjc5MyAxNTIuMDY1IDE0MC41ODFDMTUxLjk1MSAxNDAuMzYyIDE1MS45MjMgMTQwLjE1MyAxNTEuOTgyIDEzOS45NjFDMTUyLjA0MiAxMzkuNzcgMTUyLjE1MiAxMzkuNjIyIDE1Mi4zMTQgMTM5LjUyMUMxNTIuNDg4IDEzOS40MjYgMTUyLjY2NyAxMzkuMzg4IDE1Mi44NDcgMTM5LjQwOUMxNTMuMDI2IDEzOS40MjUgMTUzLjE3NiAxMzkuNTA5IDE1My4yOTYgMTM5LjY1M0MxNTMuNDE2IDEzOS43OTIgMTUzLjU4MiAxMzkuOTUxIDE1My43OTQgMTQwLjEzMkMxNTQuMDEyIDE0MC4zMDggMTU0LjI2MyAxNDAuNDQ2IDE1NC41NDYgMTQwLjU0N0MxNTQuODI5IDE0MC42NDMgMTU1LjE0OSAxNDAuNjg4IDE1NS41MDggMTQwLjY4OEMxNTYuMDA4IDE0MC42ODggMTU2LjQxIDE0MC41OTIgMTU2LjcwOSAxNDAuMzk2QzE1Ny4wMDggMTQwLjE5MyAxNTcuMTU4IDEzOS45MjUgMTU3LjE1OCAxMzkuNTk1QzE1Ny4xNTggMTM5LjI1NSAxNTcuMDE2IDEzOC45OSAxNTYuNzI5IDEzOC44MDRDMTU2LjQ0IDEzOC42MTcgMTU1LjkyNSAxMzguNDMzIDE1NS4xOSAxMzguMjUyQzE1NC4wNDIgMTM3Ljk2OSAxNTMuMjUyIDEzNy42MjIgMTUyLjgyMiAxMzcuMjEyQzE1Mi4zOTggMTM2LjgwMiAxNTIuMTg4IDEzNi4yNTMgMTUyLjE4OCAxMzUuNTY2QzE1Mi4xODggMTM0LjgzNiAxNTIuNDk1IDEzNC4yNDIgMTUzLjExIDEzMy43ODlDMTUzLjcyNSAxMzMuMzM3IDE1NC41MDggMTMzLjExMSAxNTUuNDU5IDEzMy4xMVoiIGZpbGw9InVybCgjcGFpbnQyX2xpbmVhcl8yMDFfMjE2KSIvPgo8cGF0aCBkPSJNMTc3Ljk5OCAxMzMuMTFDMTc4LjQ3MiAxMzMuMTEgMTc4Ljg5NyAxMzMuMTYxIDE3OS4yNzIgMTMzLjI2MkMxNzkuNjU0IDEzMy4zNjMgMTc5Ljk5OCAxMzMuNTA1IDE4MC4zMDMgMTMzLjY4N0MxODAuNjA3IDEzMy44NjIgMTgwLjgzOCAxMzQuMDQyIDE4MC45OTYgMTM0LjIyOUMxODEuMTQ4IDEzNC40MTUgMTgxLjIxNyAxMzQuNjIxIDE4MS4yMDEgMTM0Ljg0NEMxODEuMTkgMTM1LjA2MiAxODEuMTA1IDEzNS4yNDIgMTgwLjk0NyAxMzUuMzgxQzE4MC43NzQgMTM1LjUzIDE4MC41ODYgMTM1LjYwNSAxODAuMzg2IDEzNS42MDVDMTgwLjE5IDEzNS42IDE3OS45OTEgMTM1LjUzMyAxNzkuNzk1IDEzNS40MDVDMTc5LjY1MyAxMzUuMzA0IDE3OS40OTkgMTM1LjIwNCAxNzkuMzM2IDEzNS4xMDNDMTc5LjE3OCAxMzUuMDAyIDE3OC45ODcgMTM0LjkyMSAxNzguNzY1IDEzNC44NjhDMTc4LjU0NyAxMzQuODEgMTc4LjI3OSAxMzQuNzggMTc3Ljk2NCAxMzQuNzhDMTc3LjE4NyAxMzQuNzgxIDE3Ni41NDEgMTM1LjA0NSAxNzYuMDMgMTM1LjU3MUMxNzUuNTE5IDEzNi4wOTkgMTc1LjI2NCAxMzYuNzk0IDE3NS4yNjQgMTM3LjY0NkMxNzUuMjY0IDEzOC41MDQgMTc1LjUyMyAxMzkuMTk0IDE3Ni4wNCAxMzkuNzIyQzE3Ni41NjIgMTQwLjI0OSAxNzcuMjAzIDE0MC41MTIgMTc3Ljk2NCAxNDAuNTEzQzE3OC4yODQgMTQwLjUxMyAxNzguNTY5IDE0MC40NzkgMTc4LjgxMyAxNDAuNDFDMTc5LjA2MyAxNDAuMzQxIDE3OS4yNjIgMTQwLjI2MSAxNzkuNDA5IDE0MC4xNzFDMTc5LjU2MiAxNDAuMDggMTc5LjcxMiAxMzkuOTc2IDE3OS44NTQgMTM5Ljg1OEMxODAuMDc2IDEzOS42ODMgMTgwLjI4OCAxMzkuNTg3IDE4MC40ODggMTM5LjU2NUMxODAuNjkgMTM5LjU0NCAxODAuODg4IDEzOS42MDMgMTgxLjA4NCAxMzkuNzQxQzE4MS4yNjQgMTM5Ljg2OSAxODEuMzc0IDE0MC4wNDUgMTgxLjQwNiAxNDAuMjY5QzE4MS40NDQgMTQwLjQ5MiAxODEuMzgzIDE0MC43MSAxODEuMjMgMTQwLjkyM0MxODEuMTA1IDE0MS4wOTggMTgwLjg4MyAxNDEuMjk2IDE4MC41NTcgMTQxLjUwOUMxODAuMjMgMTQxLjcyMiAxNzkuODQ1IDE0MS44ODUgMTc5LjQwNCAxNDIuMDAyQzE3OC45NjMgMTQyLjEyNSAxNzguNDc3IDE0Mi4xODggMTc3Ljk0OSAxNDIuMTg4QzE3Ni41NDUgMTQyLjE4NyAxNzUuNDE5IDE0MS43NTYgMTc0LjU3IDE0MC44OThDMTczLjcyNyAxNDAuMDM1IDE3My4zMDEgMTM4Ljk1MiAxNzMuMzAxIDEzNy42NDZDMTczLjMwMSAxMzYuMzQ2IDE3My43MjIgMTM1LjI2MyAxNzQuNTYxIDEzNC40MDRDMTc1LjQwNCAxMzMuNTQxIDE3Ni41NTEgMTMzLjExIDE3Ny45OTggMTMzLjExWiIgZmlsbD0idXJsKCNwYWludDNfbGluZWFyXzIwMV8yMTYpIi8+CjxwYXRoIGQ9Ik0xMzIuNTI0IDEzMS4xMThDMTMyLjc5MSAxMzEuMTE4IDEzMy4wMTggMTMxLjIxNSAxMzMuMjAzIDEzMS40MDFDMTMzLjM5MiAxMzEuNTg3IDEzMy40ODYgMTMxLjgxIDEzMy40ODYgMTMyLjA3VjEzMy4zODlIMTM1LjA0OUMxMzUuMjc2IDEzMy4zODkgMTM1LjQ2OCAxMzMuNDY5IDEzNS42MjUgMTMzLjYyM0MxMzUuNzgyIDEzMy43NzcgMTM1Ljg2NCAxMzMuOTYyIDEzNS44NjQgMTM0LjE4QzEzNS44NjQgMTM0LjM5MyAxMzUuNzgzIDEzNC41ODEgMTM1LjYyNSAxMzQuNzQxQzEzNS40NjggMTM0Ljg5NSAxMzUuMjc2IDEzNC45NzUgMTM1LjA0OSAxMzQuOTc2SDEzMy40ODZWMTM5LjQ1OEMxMzMuNDg2IDEzOS44MjYgMTMzLjU3NiAxNDAuMTA2IDEzMy43NSAxNDAuMjkzQzEzMy45MjQgMTQwLjQ3OCAxMzQuMTkzIDE0MC41NzEgMTM0LjU1MSAxNDAuNTcxQzEzNC42NyAxNDAuNTcxIDEzNC43OTIgMTQwLjU1OCAxMzQuOTE3IDE0MC41MzdDMTM1LjA0MSAxNDAuNTE2IDEzNS4xNzcgMTQwLjUwNCAxMzUuMzIyIDE0MC40OTNDMTM1LjQ2OSAxNDAuNDc3IDEzNS42MDcgMTQwLjUwNiAxMzUuNzMyIDE0MC41ODZDMTM1Ljg2MyAxNDAuNjY2IDEzNS45NTIgMTQwLjc5MiAxMzYuMDAxIDE0MC45NTdDMTM2LjA2IDE0MS4xMzIgMTM2LjA2NSAxNDEuMjk2IDEzNi4wMTEgMTQxLjQ1QzEzNS45NjIgMTQxLjYwNCAxMzUuODY0IDE0MS43MjYgMTM1LjcxOCAxNDEuODE2QzEzNS41NzEgMTQxLjkwNyAxMzUuMzYgMTQxLjk5MSAxMzUuMDg4IDE0Mi4wNjVDMTM0LjgxNiAxNDIuMTQgMTM0LjUgMTQyLjE3OCAxMzQuMTQxIDE0Mi4xNzhDMTMzLjM0IDE0Mi4xNzggMTMyLjcxMyAxNDEuOTYgMTMyLjI1NiAxNDEuNTI4QzEzMS43OTkgMTQxLjA5MiAxMzEuNTY4IDE0MC40NjggMTMxLjU2NyAxMzkuNjUzVjEzNC45NzZIMTMwLjgxNUMxMzAuNTkzIDEzNC45NzUgMTMwLjQwMiAxMzQuODk1IDEzMC4yMzkgMTM0Ljc0MUMxMzAuMDgxIDEzNC41ODEgMTMwIDEzNC4zOTMgMTMwIDEzNC4xOEMxMzAuMDAxIDEzMy45NjIgMTMwLjA4MiAxMzMuNzc3IDEzMC4yMzkgMTMzLjYyM0MxMzAuNDAyIDEzMy40NjkgMTMwLjU5MyAxMzMuMzg5IDEzMC44MTUgMTMzLjM4OUgxMzEuNTY3VjEzMi4wN0MxMzEuNTY4IDEzMS44MSAxMzEuNjYxIDEzMS41ODggMTMxLjg0NiAxMzEuNDAxQzEzMi4wMzYgMTMxLjIxNSAxMzIuMjYzIDEzMS4xMTggMTMyLjUyNCAxMzEuMTE4WiIgZmlsbD0idXJsKCNwYWludDRfbGluZWFyXzIwMV8yMTYpIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjgzMSAxMzMuMTFDMTQ3Ljk5MSAxMzMuMTEgMTQ4LjkyNiAxMzMuNDA3IDE0OS42MzQgMTMzLjk5OUMxNTAuMzQxIDEzNC41ODUgMTUwLjY5MyAxMzUuNDA1IDE1MC42OTMgMTM2LjQ1NVYxNDEuMDg5QzE1MC42OTMgMTQxLjM0NSAxNTAuNjA0IDE0MS41NjIgMTUwLjQyNSAxNDEuNzM4QzE1MC4yNDYgMTQxLjkxNCAxNTAuMDM0IDE0Mi4wMDIgMTQ5Ljc5IDE0Mi4wMDJDMTQ5LjUzNCAxNDIuMDAyIDE0OS4zMTUgMTQxLjkxOCAxNDkuMTM2IDE0MS43NTNDMTQ4Ljk1NyAxNDEuNTgzIDE0OC44NjcgMTQxLjM4MiAxNDguODY3IDE0MS4xNDdWMTQwLjc5NkgxNDguODE4QzE0OC41NTcgMTQxLjE3NCAxNDguMTcyIDE0MS41MDEgMTQ3LjY2NiAxNDEuNzcyQzE0Ny4xNiAxNDIuMDQ0IDE0Ni41NiAxNDIuMTc4IDE0NS44NjkgMTQyLjE3OEMxNDQuOTM0IDE0Mi4xNzggMTQ0LjE2NCAxNDEuOTI2IDE0My41NiAxNDEuNDIxQzE0Mi45NTUgMTQwLjkxNSAxNDIuNjUxIDE0MC4yMDMgMTQyLjY1MSAxMzkuMjkyQzE0Mi42NTEgMTM4LjM3NSAxNDIuOTgzIDEzNy42NTYgMTQzLjY0NyAxMzcuMTM5QzE0NC4zMTIgMTM2LjYxNyAxNDUuMTc5IDEzNi4zNTcgMTQ2LjI0NSAxMzYuMzU3QzE0Ni43NjIgMTM2LjM1OCAxNDcuMjMyIDEzNi40MTYgMTQ3LjY1NiAxMzYuNTMzQzE0OC4wODEgMTM2LjY0NSAxNDguNDYyIDEzNi44IDE0OC43OTQgMTM2Ljk5N1YxMzYuNDU1QzE0OC43OTQgMTM1Ljg1MyAxNDguNTkxIDEzNS40MDEgMTQ4LjE4OCAxMzUuMTA3QzE0Ny43ODYgMTM0LjgwOSAxNDcuMjcxIDEzNC42NjMgMTQ2LjY0NiAxMzQuNjYzQzE0Ni4zMDggMTM0LjY2MyAxNDYuMDA4IDEzNC42OTYgMTQ1Ljc1MiAxMzQuNzY2QzE0NS41MDIgMTM0LjgzIDE0NS4yNjIgMTM0LjkyMiAxNDUuMDM0IDEzNS4wMzlDMTQ0LjgwNiAxMzUuMTU2IDE0NC42MTEgMTM1LjI2MSAxNDQuNDUzIDEzNS4zNTZDMTQ0LjMwMSAxMzUuNDUyIDE0NC4xMyAxMzUuNDg2IDE0My45NCAxMzUuNDU5QzE0My43NSAxMzUuNDI3IDE0My41ODcgMTM1LjMzOSAxNDMuNDU3IDEzNS4xOUMxNDMuMzMyIDEzNS4wNDcgMTQzLjI4NCAxMzQuODcgMTQzLjMwNiAxMzQuNjYzQzE0My4zMjcgMTM0LjQ1IDE0My40MjQgMTM0LjI2NSAxNDMuNTk5IDEzNC4xMTZDMTQzLjc3OCAxMzMuOTYyIDE0NC4wMyAxMzMuODAyIDE0NC4zNTUgMTMzLjYzOEMxNDQuNjgyIDEzMy40NjcgMTQ1LjAzOSAxMzMuMzM4IDE0NS40MiAxMzMuMjQ3QzE0NS44MDYgMTMzLjE1NyAxNDYuMjc2IDEzMy4xMSAxNDYuODMxIDEzMy4xMVpNMTQ2LjYyNiAxMzcuNjAzQzE0NS45OTEgMTM3LjYwMyAxNDUuNDkxIDEzNy43NDYgMTQ1LjEyNyAxMzguMDI3QzE0NC43NjIgMTM4LjMwNCAxNDQuNTggMTM4LjY5NCAxNDQuNTggMTM5LjE5NEMxNDQuNTggMTM5LjY5IDE0NC43MzggMTQwLjA3OSAxNDUuMDU0IDE0MC4zNTZDMTQ1LjM3NSAxNDAuNjI3IDE0NS44MTcgMTQwLjc2MiAxNDYuMzgyIDE0MC43NjJDMTQ3LjA2OCAxNDAuNzYyIDE0Ny42NDcgMTQwLjUzMiAxNDguMTE1IDE0MC4wNjhDMTQ4LjU4OSAxMzkuNTk5IDE0OC44MjMgMTM5LjA0MyAxNDguODIzIDEzOC40MDNWMTM4LjM0QzE0OC41NTcgMTM4LjExMSAxNDguMjI4IDEzNy45MzEgMTQ3LjgzNyAxMzcuODAzQzE0Ny40NDUgMTM3LjY2OSAxNDcuMDQgMTM3LjYwMyAxNDYuNjI2IDEzNy42MDNaIiBmaWxsPSJ1cmwoI3BhaW50NV9saW5lYXJfMjAxXzIxNikiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xODYuMjcgMTMzLjExQzE4Ny40MjggMTMzLjExMSAxODguMzYgMTMzLjQwOCAxODkuMDY3IDEzMy45OTlDMTg5Ljc3NSAxMzQuNTg1IDE5MC4xMzIgMTM1LjQwNSAxOTAuMTMyIDEzNi40NTVWMTQxLjA4OUMxOTAuMTMyIDE0MS4zNDUgMTkwLjAzOCAxNDEuNTYyIDE4OS44NTggMTQxLjczOEMxODkuNjc5IDE0MS45MTMgMTg5LjQ2OCAxNDIuMDAyIDE4OS4yMjQgMTQyLjAwMkMxODguOTY4IDE0Mi4wMDIgMTg4Ljc0OSAxNDEuOTE4IDE4OC41NjkgMTQxLjc1M0MxODguMzkxIDE0MS41ODMgMTg4LjMwMSAxNDEuMzgxIDE4OC4zMDEgMTQxLjE0N1YxNDAuNzk2SDE4OC4yNTJDMTg3Ljk5MSAxNDEuMTc0IDE4Ny42MDYgMTQxLjUwMSAxODcuMSAxNDEuNzcyQzE4Ni41OTQgMTQyLjA0NCAxODUuOTkzIDE0Mi4xNzggMTg1LjMwMyAxNDIuMTc4QzE4NC4zNjggMTQyLjE3OCAxODMuNTk3IDE0MS45MjYgMTgyLjk5MyAxNDEuNDIxQzE4Mi4zODkgMTQwLjkxNSAxODIuMDg1IDE0MC4yMDMgMTgyLjA4NSAxMzkuMjkyQzE4Mi4wODUgMTM4LjM3NSAxODIuNDE3IDEzNy42NTYgMTgzLjA4MSAxMzcuMTM5QzE4My43NDUgMTM2LjYxNiAxODQuNjEyIDEzNi4zNTggMTg1LjY3OSAxMzYuMzU3QzE4Ni4xOTYgMTM2LjM1NyAxODYuNjcgMTM2LjQxNiAxODcuMDk1IDEzNi41MzNDMTg3LjUxOCAxMzYuNjQ1IDE4Ny44OTYgMTM2LjggMTg4LjIyOCAxMzYuOTk3VjEzNi40NTVDMTg4LjIyOCAxMzUuODUzIDE4OC4wMjUgMTM1LjQwMSAxODcuNjIyIDEzNS4xMDdDMTg3LjIxOSAxMzQuODEgMTg2LjcwNCAxMzQuNjYzIDE4Ni4wNzkgMTM0LjY2M0MxODUuNzQyIDEzNC42NjMgMTg1LjQ0NiAxMzQuNjk3IDE4NS4xOSAxMzQuNzY2QzE4NC45NCAxMzQuODMgMTg0LjcwMSAxMzQuOTIyIDE4NC40NzMgMTM1LjAzOUMxODQuMjQ0IDEzNS4xNTYgMTg0LjA0OSAxMzUuMjYxIDE4My44OTIgMTM1LjM1NkMxODMuNzQgMTM1LjQ1MiAxODMuNTY5IDEzNS40ODUgMTgzLjM3OSAxMzUuNDU5QzE4My4xODkgMTM1LjQyNyAxODMuMDI2IDEzNS4zMzkgMTgyLjg5NiAxMzUuMTlDMTgyLjc3MSAxMzUuMDQ3IDE4Mi43MTggMTM0Ljg3IDE4Mi43MzkgMTM0LjY2M0MxODIuNzYxIDEzNC40NSAxODIuODU4IDEzNC4yNjUgMTgzLjAzMiAxMzQuMTE2QzE4My4yMTIgMTMzLjk2MiAxODMuNDY3IDEzMy44MDMgMTgzLjc5NCAxMzMuNjM4QzE4NC4xMiAxMzMuNDY4IDE4NC40NzMgMTMzLjMzOCAxODQuODU0IDEzMy4yNDdDMTg1LjI0IDEzMy4xNTYgMTg1LjcxNCAxMzMuMTEgMTg2LjI3IDEzMy4xMVpNMTg2LjA2NCAxMzcuNjAzQzE4NS40MjggMTM3LjYwMyAxODQuOTI1IDEzNy43NDUgMTg0LjU2MSAxMzguMDI3QzE4NC4xOTYgMTM4LjMwNCAxODQuMDE0IDEzOC42OTQgMTg0LjAxNCAxMzkuMTk0QzE4NC4wMTQgMTM5LjY5IDE4NC4xNzIgMTQwLjA3OSAxODQuNDg3IDE0MC4zNTZDMTg0LjgwOCAxNDAuNjI4IDE4NS4yNTUgMTQwLjc2MiAxODUuODIgMTQwLjc2MkMxODYuNTA1IDE0MC43NjEgMTg3LjA4MSAxNDAuNTMxIDE4Ny41NDkgMTQwLjA2OEMxODguMDIyIDEzOS41OTkgMTg4LjI2MiAxMzkuMDQzIDE4OC4yNjIgMTM4LjQwM1YxMzguMzRDMTg3Ljk5NSAxMzguMTExIDE4Ny42NjMgMTM3LjkzMSAxODcuMjcxIDEzNy44MDNDMTg2Ljg3OSAxMzcuNjcgMTg2LjQ3NyAxMzcuNjAzIDE4Ni4wNjQgMTM3LjYwM1oiIGZpbGw9InVybCgjcGFpbnQ2X2xpbmVhcl8yMDFfMjE2KSIvPgo8cGF0aCBkPSJNMTQxLjk4MiAxMzMuMTY0QzE0Mi4xNzggMTMzLjIwMSAxNDIuMzQ1IDEzMy4yNjQgMTQyLjQ3NiAxMzMuMzVDMTQyLjYwNiAxMzMuNDM1IDE0Mi43MDMgMTMzLjU1NyAxNDIuNzczIDEzMy43MTFDMTQyLjg0NCAxMzMuODY2IDE0Mi44NjEgMTM0LjA0MSAxNDIuODE3IDEzNC4yMzhDMTQyLjc2OCAxMzQuNDMgMTQyLjY3OSAxMzQuNTggMTQyLjU1NCAxMzQuNjkyQzE0Mi40MzQgMTM0Ljc5OCAxNDIuMzA4IDEzNC44NjYgMTQyLjE3MyAxMzQuODkzQzE0Mi4wMzcgMTM0LjkxOSAxNDEuODg2IDEzNC45MTkgMTQxLjcyNCAxMzQuODg4QzE0MS41NjYgMTM0Ljg1NiAxNDEuNDE2IDEzNC44MzkgMTQxLjI3NCAxMzQuODM5QzE0MC42NiAxMzQuODM5IDE0MC4xNDUgMTM1LjA2MSAxMzkuNzMxIDEzNS41MDhDMTM5LjMyMyAxMzUuOTU2IDEzOS4xMTYgMTM2LjYwOCAxMzkuMTE2IDEzNy40NjFWMTQxLjA1QzEzOS4xMTYgMTQxLjMxIDEzOS4wMjIgMTQxLjUzNyAxMzguODMzIDE0MS43MjlDMTM4LjY0MyAxNDEuOTE1IDEzOC40MTUgMTQyLjAxMiAxMzguMTU0IDE0Mi4wMTJDMTM3Ljg5MyAxNDIuMDEyIDEzNy42NjYgMTQxLjkxNSAxMzcuNDc2IDE0MS43MjlDMTM3LjI4NiAxNDEuNTM3IDEzNy4xODggMTQxLjMxMSAxMzcuMTg4IDE0MS4wNVYxMzQuMTk5QzEzNy4xODggMTMzLjk0OSAxMzcuMjgxIDEzMy43MzUgMTM3LjQ2MSAxMzMuNTZDMTM3LjY0IDEzMy4zODQgMTM3Ljg1MSAxMzMuMjk2IDEzOC4wOTYgMTMzLjI5NkMxMzguMzQ2IDEzMy4yOTYgMTM4LjU2MSAxMzMuMzc5IDEzOC43MzUgMTMzLjU1QzEzOC45MTQgMTMzLjcyIDEzOS4wMDQgMTMzLjkyNiAxMzkuMDA0IDEzNC4xNjVWMTM0LjY5MkgxMzkuMDU4QzEzOS4yMzcgMTM0LjIyNCAxMzkuNTQ2IDEzMy44NDMgMTM5Ljk4IDEzMy41NUMxNDAuNDIxIDEzMy4yNTcgMTQwLjkwOCAxMzMuMTExIDE0MS40MzYgMTMzLjExQzE0MS42MDkgMTMzLjExIDE0MS43OTIgMTMzLjEyNyAxNDEuOTgyIDEzMy4xNjRaIiBmaWxsPSJ1cmwoI3BhaW50N19saW5lYXJfMjAxXzIxNikiLz4KPHBhdGggZD0iTTE2MS4xNTcgMTMwQzE2MS40MTkgMTMwIDE2MS42NDYgMTMwLjA5MiAxNjEuODMxIDEzMC4yNzhDMTYyLjAyMSAxMzAuNDY1IDE2Mi4xMTQgMTMwLjY5MSAxNjIuMTE0IDEzMC45NTJWMTM0LjU1MUgxNjIuMTczQzE2Mi40NTYgMTM0LjE0IDE2Mi44NDkgMTMzLjc5NyAxNjMuMzUgMTMzLjUyNUMxNjMuODU2IDEzMy4yNTQgMTY0LjQ2IDEzMy4xMiAxNjUuMTYxIDEzMy4xMkMxNjYuMTUyIDEzMy4xMiAxNjYuOTIxIDEzMy4zODcgMTY3LjQ2NiAxMzMuOTI2QzE2OC4wMTUgMTM0LjQ1OCAxNjguMjkxIDEzNS4xOTIgMTY4LjI5MSAxMzYuMTIzVjE0MS4wNUMxNjguMjkxIDE0MS4zMTYgMTY4LjE5MyAxNDEuNTQyIDE2OC4wMDMgMTQxLjcyOUMxNjcuODEyIDE0MS45MTUgMTY3LjU4NiAxNDIuMDEyIDE2Ny4zMjQgMTQyLjAxMkMxNjcuMDU4IDE0Mi4wMTEgMTY2LjgzMSAxNDEuOTE1IDE2Ni42NDEgMTQxLjcyOUMxNjYuNDUgMTQxLjU0MiAxNjYuMzUzIDE0MS4zMTYgMTY2LjM1MyAxNDEuMDVWMTM2LjU4MkMxNjYuMzUzIDEzNS45NDMgMTY2LjE5NSAxMzUuNDY1IDE2NS44NzQgMTM1LjE1NkMxNjUuNTU4IDEzNC44NDcgMTY1LjA4OCAxMzQuNjkzIDE2NC40NjggMTM0LjY5MkMxNjMuNzgyIDEzNC42OTIgMTYzLjIxOSAxMzQuOTE0IDE2Mi43NzggMTM1LjM1MkMxNjIuMzQzIDEzNS43ODggMTYyLjEyNCAxMzYuMzExIDE2Mi4xMjQgMTM2LjkyNFYxNDEuMDVDMTYyLjEyNCAxNDEuMzE2IDE2Mi4wMjYgMTQxLjU0MiAxNjEuODM2IDE0MS43MjlDMTYxLjY1MSAxNDEuOTE1IDE2MS40MjQgMTQyLjAxMiAxNjEuMTU3IDE0Mi4wMTJDMTYwLjg5NyAxNDIuMDExIDE2MC42NzMgMTQxLjkxNSAxNjAuNDgzIDE0MS43MjlDMTYwLjI5MyAxNDEuNTQyIDE2MC4xOTUgMTQxLjMxNiAxNjAuMTk1IDE0MS4wNVYxMzAuOTUyQzE2MC4xOTUgMTMwLjY5MSAxNjAuMjkzIDEzMC40NjUgMTYwLjQ4MyAxMzAuMjc4QzE2MC42NzMgMTMwLjA5MyAxNjAuODk4IDEzMC4wMDEgMTYxLjE1NyAxMzBaIiBmaWxsPSJ1cmwoI3BhaW50OF9saW5lYXJfMjAxXzIxNikiLz4KPHBhdGggZD0iTTE5Ni44NDEgMTMzLjEyQzE5Ny44NDEgMTMzLjEyIDE5OC42MTUgMTMzLjM4OCAxOTkuMTY1IDEzMy45MjZDMTk5LjcyIDEzNC40NTggMjAwIDEzNS4xOTEgMjAwIDEzNi4xMjNWMTQxLjA1QzIwMCAxNDEuMzE2IDE5OS45MDIgMTQxLjU0MiAxOTkuNzEyIDE0MS43MjlDMTk5LjUyMiAxNDEuOTE1IDE5OS4yOTkgMTQyLjAxMSAxOTkuMDM4IDE0Mi4wMTJDMTk4Ljc3MSAxNDIuMDEyIDE5OC41NCAxNDEuOTE1IDE5OC4zNSAxNDEuNzI5QzE5OC4xNiAxNDEuNTQyIDE5OC4wNjYgMTQxLjMxNiAxOTguMDY2IDE0MS4wNVYxMzYuNTg3QzE5OC4wNjYgMTM1Ljk4NSAxOTcuOTE2IDEzNS41MiAxOTcuNjE3IDEzNS4xOTVDMTk3LjMyMyAxMzQuODY1IDE5Ni44NCAxMzQuNzAyIDE5Ni4xNzIgMTM0LjcwMkMxOTUuNDk3IDEzNC43MDIgMTk0LjkzOCAxMzQuOTEyIDE5NC40OTcgMTM1LjMzMkMxOTQuMDU2IDEzNS43NTMgMTkzLjgzMyAxMzYuMjg5IDE5My44MzMgMTM2LjkzNFYxNDEuMDVDMTkzLjgzMyAxNDEuMzE2IDE5My43MzkgMTQxLjU0MiAxOTMuNTUgMTQxLjcyOUMxOTMuMzY1IDE0MS45MTUgMTkzLjEzOCAxNDIuMDEyIDE5Mi44NzEgMTQyLjAxMkMxOTIuNjEgMTQyLjAxMiAxOTIuMzgzIDE0MS45MTUgMTkyLjE5MiAxNDEuNzI5QzE5Mi4wMDMgMTQxLjU0MiAxOTEuOTA5IDE0MS4zMTYgMTkxLjkwOSAxNDEuMDVWMTM0LjIwNEMxOTEuOTEgMTMzLjk1NCAxOTEuOTk5IDEzMy43NCAxOTIuMTc4IDEzMy41NjRDMTkyLjM2MyAxMzMuMzg0IDE5Mi41ODIgMTMzLjI5NiAxOTIuODMyIDEzMy4yOTZDMTkzLjA4MiAxMzMuMjk2IDE5My4yOTcgMTMzLjM4IDE5My40NzcgMTMzLjU1QzE5My42NjEgMTMzLjcyIDE5My43NTUgMTMzLjkyNiAxOTMuNzU1IDEzNC4xNjVWMTM0LjU5SDE5My44MDRDMTk0LjEwMyAxMzQuMTQ4IDE5NC41MTYgMTMzLjc5MiAxOTUuMDQ0IDEzMy41MjVDMTk1LjU3MiAxMzMuMjU0IDE5Ni4xNzIgMTMzLjEyIDE5Ni44NDEgMTMzLjEyWiIgZmlsbD0idXJsKCNwYWludDlfbGluZWFyXzIwMV8yMTYpIi8+CjxwYXRoIGQ9Ik0yNjUgNDBDMjg3LjA5MSA0MCAzMDUgNTcuOTA4NiAzMDUgODBDMzA1IDEwMi4wOTEgMjg3LjA5MSAxMjAgMjY1IDEyMEg2NUM0Mi45MDg2IDEyMCAyNSAxMDIuMDkxIDI1IDgwQzI1IDU3LjkwODYgNDIuOTA4NiA0MCA2NSA0MEgyNjVaIiBmaWxsPSJ1cmwoI3BhaW50MTBfbGluZWFyXzIwMV8yMTYpIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjY1IDQwQzI4Ny4wOTEgNDAgMzA1IDU3LjkwODYgMzA1IDgwQzMwNSAxMDIuMDkxIDI4Ny4wOTEgMTIwIDI2NSAxMjBINjVMNjMuOTY3OCAxMTkuOTg3QzQyLjM1MzQgMTE5LjQ0IDI1IDEwMS43NDYgMjUgODBDMjUgNTcuOTA4NiA0Mi45MDg2IDQwIDY1IDQwSDI2NVpNNjUgNDVDNDUuNjcgNDUgMzAgNjAuNjcgMzAgODBDMzAgOTkuMzMgNDUuNjcgMTE1IDY1IDExNUgyNjVDMjg0LjMzIDExNSAzMDAgOTkuMzMgMzAwIDgwQzMwMCA2MC42NyAyODQuMzMgNDUgMjY1IDQ1SDY1WiIgZmlsbD0idXJsKCNwYWludDExX2xpbmVhcl8yMDFfMjE2KSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzIwMV8yMTYiIHgxPSIzMDUiIHkxPSIyMTAiIHgyPSIyNS4wMjEzIiB5Mj0iMjEyLjQ0MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjRDlEOUQ5Ii8+CjxzdG9wIG9mZnNldD0iMC4wOTQ3MTQxIiBzdG9wLWNvbG9yPSIjRjhGOEY4Ii8+CjxzdG9wIG9mZnNldD0iMC4yNjkyNjgiIHN0b3AtY29sb3I9IiNFNkU2RTYiLz4KPHN0b3Agb2Zmc2V0PSIwLjY5ODk0MiIgc3RvcC1jb2xvcj0iI0RFREVERSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNDRENEQ0QiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzIwMV8yMTYiIHgxPSIzMi45OTM1IiB5MT0iNDk4LjE4MSIgeDI9IjMzNy4yNDUiIHkyPSI0NzMuNTE5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNDRUNFQ0UiLz4KPHN0b3Agb2Zmc2V0PSIwLjEyOTg0IiBzdG9wLWNvbG9yPSIjQ0VDRUNFIi8+CjxzdG9wIG9mZnNldD0iMC4yMTE1NzQiIHN0b3AtY29sb3I9IiM5OTk5OTkiLz4KPHN0b3Agb2Zmc2V0PSIwLjc2NDQ4MSIgc3RvcC1jb2xvcj0iI0E4QTRBNCIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNERkRGREYiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyXzIwMV8yMTYiIHgxPSIyNSIgeTE9IjIxMCIgeDI9IjMwNSIgeTI9IjIxMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjQTNBM0EzIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0I0QjRCNCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50M19saW5lYXJfMjAxXzIxNiIgeDE9IjI1IiB5MT0iMjEwIiB4Mj0iMzA1IiB5Mj0iMjEwIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNBM0EzQTMiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQjRCNEI0Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ0X2xpbmVhcl8yMDFfMjE2IiB4MT0iMjUiIHkxPSIyMTAiIHgyPSIzMDUiIHkyPSIyMTAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0EzQTNBMyIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNCNEI0QjQiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDVfbGluZWFyXzIwMV8yMTYiIHgxPSIyNSIgeTE9IjIxMCIgeDI9IjMwNSIgeTI9IjIxMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjQTNBM0EzIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0I0QjRCNCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50Nl9saW5lYXJfMjAxXzIxNiIgeDE9IjI1IiB5MT0iMjEwIiB4Mj0iMzA1IiB5Mj0iMjEwIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNBM0EzQTMiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQjRCNEI0Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ3X2xpbmVhcl8yMDFfMjE2IiB4MT0iMjUiIHkxPSIyMTAiIHgyPSIzMDUiIHkyPSIyMTAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0EzQTNBMyIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNCNEI0QjQiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDhfbGluZWFyXzIwMV8yMTYiIHgxPSIyNSIgeTE9IjIxMCIgeDI9IjMwNSIgeTI9IjIxMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjQTNBM0EzIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0I0QjRCNCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50OV9saW5lYXJfMjAxXzIxNiIgeDE9IjI1IiB5MT0iMjEwIiB4Mj0iMzA1IiB5Mj0iMjEwIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNBM0EzQTMiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQjRCNEI0Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxMF9saW5lYXJfMjAxXzIxNiIgeDE9IjE2NSIgeTE9IjQwIiB4Mj0iMTY1IiB5Mj0iMzgwIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNCRUJFQkUiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQUNBQ0FDIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxMV9saW5lYXJfMjAxXzIxNiIgeDE9IjE2NSIgeTE9IjEyMCIgeDI9IjE2NSIgeTI9IjQwIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNFOUU5RTkiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQ0VDRUNFIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==",Wc=({isVisible:e})=>Bn.createPortal(o.jsx("div",{id:"sticker-recycle-bin",className:`${h.recycleBin} ${e?h.visible:""}`,children:o.jsx("img",{src:Fc,alt:"Trash Can",className:h.recycleIcon})}),document.body),Gc=({onOpenSettings:e})=>{const t=r.useRef(null),n=r.useRef(null),{stickers:s,selectedStickerId:i,confirmDelete:c,addSticker:a,updateSticker:l,deleteSticker:g,selectSticker:M,bringToTop:d}=Co(),{isEditMode:x,setIsEditMode:D}=Pt(),{t:N}=We(),[I,u]=r.useState(null),[j,y]=r.useState(null),C=1920,[O,F]=r.useState(()=>window.innerWidth/C);r.useEffect(()=>{const z=()=>{F(window.innerWidth/C)};return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]);const[b,p]=r.useState(null),[L,E]=r.useState(!1),Q=r.useCallback(()=>{E(!0)},[]),J=r.useCallback(()=>{E(!1)},[]),K=r.useCallback(z=>{c?setTimeout(()=>{window.confirm(N.space.deleteStickerConfirm)&&g(z)},10):g(z)},[c,g,N]),U=["[data-dock-container]",".dock","header",'[class*="Searcher"]','[class*="Modal"]','[class*="Settings"]','[class*="Editor"]','[class*="FolderView"]','[class*="textInputPopup"]','[class*="contextMenu"]'].join(", ");r.useEffect(()=>{const z=T=>{const S=T.target;if(S.closest(U))return;const G=S.closest("[data-sticker-id]");if(G){T.preventDefault();const Y=G.dataset.stickerId;Y&&y({x:T.clientX,y:T.clientY,type:"sticker",stickerId:Y});return}T.preventDefault(),y({x:T.clientX,y:T.clientY,type:"background"})};return document.addEventListener("contextmenu",z),()=>document.removeEventListener("contextmenu",z)},[s]),r.useEffect(()=>{const z=T=>{const S=T.target;S.closest(U)||S.closest("[data-sticker-id]")||I||u({x:T.clientX,y:T.clientY})};return document.addEventListener("dblclick",z),()=>document.removeEventListener("dblclick",z)},[I]),r.useEffect(()=>{const z=T=>{if(T.key==="Delete"||T.key==="Backspace"){const S=document.activeElement;if(S?.tagName==="INPUT"||S?.tagName==="TEXTAREA")return;i&&K(i)}};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[i,K]);const P=r.useCallback(async z=>{const T=z.target.files?.[0];if(!T)return;const S=new FileReader;S.onload=async()=>{const G=S.result,Y=await Xt(G),W=new Image;W.onload=()=>{const w=(window.innerWidth/2-Math.min(W.width,it)/2)/O,m=(window.innerHeight/2-W.height*Math.min(W.width,it)/W.width/2)/O;a({type:"image",content:Y,x:w,y:m})},W.src=Y},S.readAsDataURL(T),n.current&&(n.current.value="")},[a]),H=r.useCallback((z,T)=>{b?l(b.id,{content:z,style:T?{color:T.color,textAlign:T.textAlign,fontSize:T.fontSize}:b.style}):I&&a({type:"text",content:z,x:I.x/O,y:I.y/O,style:T?{color:T.color,textAlign:T.textAlign,fontSize:T.fontSize}:void 0}),u(null),p(null)},[I,b,a,l]),k=r.useCallback(()=>{u(null),p(null)},[]),_=r.useCallback(z=>{p(z),u({x:z.x*O,y:z.y*O})},[O]);return r.useEffect(()=>{const z=async T=>{const S=document.activeElement;if((S?.tagName==="INPUT"||S?.tagName==="TEXTAREA")&&(S.closest('[class*="Searcher"]')||S.closest('[class*="textInputPopup"]')))return;const G=T.clipboardData?.items;if(G){for(const Y of G)if(Y.type.startsWith("image/")){T.preventDefault();const W=Y.getAsFile();if(!W)continue;const w=new FileReader;w.onload=async()=>{const m=w.result,v=await Xt(m),$=new Image;$.onload=()=>{const X=(window.innerWidth/2-Math.min($.width,it)/2)/O,ne=(window.innerHeight/2-$.height*Math.min($.width,it)/$.width/2)/O;a({type:"image",content:v,x:X,y:ne})},$.src=v},w.readAsDataURL(W);break}}};return document.addEventListener("paste",z),()=>document.removeEventListener("paste",z)},[a]),o.jsxs("div",{ref:t,className:`${h.canvas} ${x?h.creativeMode:""}`,children:[s.filter(z=>!b||z.id!==b.id).map(z=>o.jsx(Yc,{sticker:z,isSelected:i===z.id,isCreativeMode:x,onSelect:()=>M(z.id),onDelete:()=>K(z.id),onPositionChange:(T,S)=>l(z.id,{x:T,y:S}),onStyleChange:T=>{z.style&&l(z.id,{style:{...z.style,...T}})},onBringToTop:()=>d(z.id),onScaleChange:T=>{l(z.id,{scale:T})},isEditMode:x,viewportScale:O,onDoubleClick:()=>{z.type==="text"&&_(z)},onDragStart:Q,onDragEnd:J},z.id)),I&&o.jsx(Pc,{x:I.x,y:I.y,initialText:b?.content||"",initialStyle:b?.style,onSubmit:H,onCancel:k,viewportScale:O}),o.jsx(Wc,{isVisible:L}),j&&o.jsx(Bc,{x:j.x,y:j.y,type:j.type,stickerId:j.stickerId,isImageSticker:(()=>s.find(T=>T.id===j.stickerId)?.type==="image")(),onClose:()=>y(null),onAddSticker:()=>{u({x:j.x,y:j.y})},onUploadImage:()=>{n.current?.click()},onToggleEditMode:()=>{D(!x)},isEditMode:x,onEditSticker:()=>{const z=s.find(T=>T.id===j.stickerId);z&&_(z)},onDeleteSticker:()=>{j.stickerId&&K(j.stickerId)},onCopyImage:async()=>{const z=s.find(T=>T.id===j.stickerId);if(z&&z.type==="image")try{const T=new Image;T.onload=async()=>{const S=await So(T);S&&await Lo(S)},T.src=z.content}catch{}},onExportImage:async()=>{const z=s.find(T=>T.id===j.stickerId);if(z&&z.type==="text")try{const T=await ko(z);T&&ln(T,`sticker-${Date.now()}.png`)}catch{}},onCopyText:()=>{const z=s.find(T=>T.id===j.stickerId);z&&z.type==="text"&&navigator.clipboard.writeText(z.content)},onExportImageSticker:async()=>{const z=s.find(T=>T.id===j.stickerId);if(z&&z.type==="image")try{const T=await Oo(z);T&&ln(T,`sticker-${Date.now()}.png`)}catch{}},onOpenSettings:()=>{j&&e?.({x:j.x,y:j.y})}}),o.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:P})]})},$c="_app_xy3ny_3",Zc="_container_xy3ny_15",Vc="_containerCenter_xy3ny_39",Hc="_settingsArea_xy3ny_60",Xc="_editorArea_xy3ny_73",st={app:$c,container:Zc,containerCenter:Vc,settingsArea:Hc,editorArea:Xc},Jc=r.lazy(()=>Et(()=>import("./FolderView-7eb8ea4b.js"),["./FolderView-7eb8ea4b.js","./vendor-react-d4bca6d7.js","./vendor-utils-654bd828.js","./FolderView-6ba4a8c1.css"],import.meta.url).then(e=>({default:e.FolderView}))),Kc=r.lazy(()=>Et(()=>import("./AddEditModal-a5ac01ed.js"),["./AddEditModal-a5ac01ed.js","./vendor-react-d4bca6d7.js","./vendor-utils-654bd828.js","./AddEditModal-0bb10ee4.css"],import.meta.url).then(e=>({default:e.AddEditModal}))),qc=r.lazy(()=>Et(()=>import("./SearchEngineModal-cf17f8c1.js"),["./SearchEngineModal-cf17f8c1.js","./vendor-react-d4bca6d7.js","./vendor-utils-654bd828.js","./SearchEngineModal-a6441b00.css"],import.meta.url).then(e=>({default:e.SearchEngineModal}))),ea=r.lazy(()=>Et(()=>import("./SettingsModal-381d0b19.js"),["./SettingsModal-381d0b19.js","./vendor-react-d4bca6d7.js","./vendor-utils-654bd828.js","./SettingsModal-551d4591.css"],import.meta.url).then(e=>({default:e.SettingsModal})));function ta(){const{dockItems:e,selectedSearchEngine:t,setSelectedSearchEngine:n,handleItemDelete:s,handleItemSave:i,handleItemsReorder:c,handleFolderItemsReorder:a,handleFolderItemDelete:l,handleDragFromFolder:g,handleDragToFolder:M,handleDropOnFolder:d}=Nr(),{isEditMode:x,openFolderId:D,folderAnchor:N,setIsEditMode:I,setOpenFolderId:u,setFolderAnchor:j}=Pt(),{draggingItem:y,setDraggingItem:C,setFolderPlaceholderActive:O}=Sn(),{dockPosition:F}=at(),b=r.useMemo(()=>e.find(f=>f.id===D),[e,D]),p=r.useCallback((f,B)=>{f.type==="folder"?(u(f.id),j(B??null)):f.url&&window.open(f.url,"_blank")},[u,j]),L=r.useCallback((f,B)=>{B.type==="folder"&&u(B.id)},[u]),[E,Q]=r.useState(!1),[J,K]=r.useState(!1),[U,P]=r.useState(!1),[H,k]=r.useState(null),[_,z]=r.useState(null),[T,S]=r.useState(null),[G,Y]=r.useState(null),[W,w]=r.useState(!1),[m,v]=r.useState(!1),[$,X]=r.useState(null),ne=48,q=.5,[V,ue]=r.useState(1);r.useLayoutEffect(()=>{const f=()=>{const B=window.innerWidth,te=($??640)+ne;if(B>=te)ue(1);else{const se=Math.max(q,B/te);ue(se)}};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[$]);const[Ie,De]=r.useState(!1),ce=r.useRef(null),ae=r.useRef(null);r.useEffect(()=>{const f=B=>{if(ce.current){const Z=ce.current.getBoundingClientRect(),te=B.clientX>=Z.left&&B.clientX<=Z.right&&B.clientY>=Z.top&&B.clientY<=Z.bottom;v(te)}if(ae.current){const Z=ae.current.getBoundingClientRect(),te=B.clientX>=Z.left&&B.clientX<=Z.right&&B.clientY>=Z.top&&B.clientY<=Z.bottom;w(te)}};return document.addEventListener("mousemove",f),()=>document.removeEventListener("mousemove",f)},[]);const xe=f=>{if(t.id==="default"){if(typeof chrome<"u"&&chrome.search&&chrome.search.query){chrome.search.query({text:f,disposition:"CURRENT_TAB"});return}window.open(`https://www.google.com/search?q=${encodeURIComponent(f)}`,"_blank");return}const B=`${t.url}${encodeURIComponent(f)}`;window.open(B,"_blank")},ye=(f,B)=>{Y(f),S(B??null),Q(!0)},Ae=()=>{Y(null),Q(!0)},ze=f=>{i(f,G),Q(!1),Y(null)},A=r.useCallback(f=>{f.url&&window.open(f.url,"_blank")},[]),R=r.useCallback((f,B)=>{ye(f,B)},[]);return r.useEffect(()=>{const f=()=>{const Z=getComputedStyle(document.documentElement).getPropertyValue("--color-sticker-stroke").trim(),te=document.querySelector("#text-sticker-stroke feFlood");te&&Z&&te.setAttribute("flood-color",Z)};f();const B=new MutationObserver(Z=>{Z.forEach(te=>{te.type==="attributes"&&te.attributeName==="data-theme"&&f()})});return B.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>B.disconnect()},[]),o.jsxs("div",{className:st.app,children:[o.jsx("svg",{width:"0",height:"0",style:{position:"absolute",visibility:"hidden"},children:o.jsx("defs",{children:o.jsxs("filter",{id:"text-sticker-stroke",x:"-25%",y:"-25%",width:"150%",height:"150%",children:[o.jsx("feMorphology",{in:"SourceAlpha",operator:"dilate",radius:"4.5",result:"dilated"}),o.jsx("feGaussianBlur",{in:"dilated",stdDeviation:"2",result:"blurred"}),o.jsx("feComponentTransfer",{in:"blurred",result:"rounded",children:o.jsx("feFuncA",{type:"table",tableValues:"0 0 0.5 1 1 1 1 1"})}),o.jsx("feFlood",{floodColor:"white",result:"white"}),o.jsx("feComposite",{in:"white",in2:"rounded",operator:"in",result:"stroke"}),o.jsxs("feMerge",{children:[o.jsx("feMergeNode",{in:"stroke"}),o.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})}),o.jsx(Ao,{}),o.jsx(Gc,{onOpenSettings:f=>{z({left:f.x,top:f.y,right:f.x,bottom:f.y,width:0,height:0,x:f.x,y:f.y,toJSON:()=>({})}),P(!0)}}),o.jsxs("div",{className:F==="center"?st.containerCenter:st.container,"data-ui-zone":"bottom",style:V<1?{transform:F==="center"?`translate(-50%, -50%) scale(${V})`:`translate(-50%, -100%) scale(${V})`,transformOrigin:F==="center"?"center center":"bottom center"}:void 0,children:[o.jsx(os,{searchEngine:t,onSearch:xe,onSearchEngineClick:f=>{k(f),K(!0)},containerStyle:$?{width:`${$}px`}:void 0}),o.jsx(uo,{items:e,isEditMode:x,onItemClick:p,onItemEdit:ye,onItemDelete:s,onItemAdd:f=>{S(f??null),Ae()},onItemsReorder:c,onDropToFolder:d,onDragToOpenFolder:M,onHoverOpenFolder:L,onLongPressEdit:()=>I(!0),onWidthChange:f=>X(f),onDragStart:f=>C(f),onDragEnd:()=>C(null),externalDragItem:y})]}),o.jsx("div",{ref:ce,className:st.settingsArea,"data-ui-zone":"top-left",children:o.jsx(yo,{visible:m,onClick:f=>{f.stopPropagation();const B=f.currentTarget.getBoundingClientRect();z(B),P(!0)}})}),o.jsx("div",{ref:ae,className:st.editorArea,"data-ui-zone":"top-right",children:o.jsx(No,{visible:W||x,isEditMode:x,onClick:()=>I(!x)})}),b&&b.type==="folder"&&o.jsx(r.Suspense,{fallback:null,children:o.jsx(Jc,{folder:b,isEditMode:x,onItemClick:A,onItemEdit:R,onItemDelete:f=>l(b.id,f),onClose:()=>{u(null),j(null)},onItemsReorder:f=>a(b.id,f),onItemDragOut:g,anchorRect:N,onDragStart:f=>{C(f),De(!0)},onDragEnd:()=>{C(null),De(!1)},externalDragItem:Ie?null:y,onFolderPlaceholderChange:O,onToggleEditMode:()=>I(!x)})}),E&&o.jsx(r.Suspense,{fallback:null,children:o.jsx(Kc,{isOpen:E,item:G,onClose:()=>{Q(!1),Y(null)},onSave:ze,anchorRect:T,hideHeader:!0})}),o.jsx(r.Suspense,{fallback:null,children:o.jsx(qc,{isOpen:J,selectedEngine:t,engines:En,onClose:()=>K(!1),onSelect:n,anchorRect:H})}),U&&o.jsx(r.Suspense,{fallback:null,children:o.jsx(ea,{isOpen:U,onClose:()=>P(!1),anchorPosition:_?{x:_.left,y:_.top<100?_.top+60:_.top}:{x:0,y:0}})})]})}bt.createRoot(document.getElementById("root")).render(o.jsx(vr,{children:o.jsx(Ir,{children:o.jsx(Dr,{children:o.jsx(ho,{children:o.jsx(es,{children:o.jsx(ta,{})})})})})}));export{Qn as D,cn as E,aa as F,zr as G,Dt as H,ri as M,Oe as S,kn as T,ua as a,bi as b,Ia as c,ga as d,la as e,Oi as f,Zs as g,fi as h,Ma as i,o as j,Ai as k,Be as l,We as m,ct as n,_n as o,oa as p,Ut as q,da as r,Ke as s,ca as t,vi as u,Ar as v,Co as w,xr as x};
